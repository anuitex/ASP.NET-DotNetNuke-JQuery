@inherits DotNetNuke.Web.Mvc.Framework.DnnWebViewPage<RazorCart.ProductGrid.Models.GridModel>
@using DotNetNuke.Web.Mvc.Helpers

<div class="row">
    <div class="col-xs-3 col-md-2">
        <nav class="rzc-category-menu">
            <div class="list-group">
                <div class="list-group-item" ng-repeat="field in grid.templateFields">
                    <div class="inner-list-info" ng-click="field.IsExpanded = !field.IsExpanded">
                        <a href="" target="_self">
                            <span class="glyphicon" ng-class="field.IsExpanded ? 'glyphicon-minus' : 'glyphicon-plus'"></span> {{field.Label}}
                        </a>
                    </div>
                    <div ng-if="field.IsExpanded">
                        <div class="list-group-item inner-list-group-item" ng-repeat="prop in field.Values" ng-click="prop.IsChecked = !prop.IsChecked; grid.rebindProducts(true)">
                            <div style="float: left; height: 32px; width: 30px;"></div>
                            <div class="inner-list-info">
                                <a href="" target="_self">
                                    <span class="glyphicon" ng-class="prop.IsChecked ? 'glyphicon-check' : 'glyphicon-unchecked'"></span> {{prop.Key}}
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="list-group-item" ng-if="grid.templateFields.length < 1">
                    <div class="inner-list-info">
                        @Dnn.LocalizeString("NoFields")
                    </div>
                </div>
            </div>
        </nav>
    </div>
    <div class="col-xs-9 col-md-10">
        <div class="rzc-basket">
            <div class="table-responsive">
                <table class="table table-hover">
                    <thead>
                        <tr>
                            <th>@Dnn.LocalizeString("SKU")</th>
                            <th>@Dnn.LocalizeString("ProductName")</th>
                            <th ng-repeat="field in grid.productList[0].CustomFields">{{field.Key}}</th>
                            <th class="text-right">@Dnn.LocalizeString("UnitCost")</th>
                            <th class="text-right">@Dnn.LocalizeString("QuantityOnHand")</th>
                            <th class="text-right">@Dnn.LocalizeString("Quantity")</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody ng-repeat="product in grid.productList">
                        <tr>
                            <td>{{product.ModelNumber}}</td>
                            <td><a ng-href="{{product.ProductDetailUrl}}">{{product.ModelName}}</a></td>
                            <td ng-repeat="field in product.CustomFields">{{field.Value}}</td>
                            <td class="text-right">{{product.UnitCost}}</td>
                            <td class="text-right">{{product.QuantityOnHand}}</td>
                            <td class="text-right">
                                <input type="number" step="1" min="1" max="999999" ng-model="product.ClientQuantity" ng-init="product.ClientQuantity = ''" class="form-control" style="max-width: 80px; display: inline;" />
                            </td>
                            <td class="text-right">
                                <i class="fa fa-cart-plus fa-lg" role="button" ng-click="grid.addToCart($index)"></i>
                            </td>
                        </tr>
                    </tbody>
                    <tbody ng-if="grid.productList.length < 1">
                        <tr>
                            <td colspan="6">@Dnn.LocalizeString("NoProducts")</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="row">
            <div class="text-right">
                @Html.Partial("_Pager", Model.Pager)
            </div>
        </div>
        <div class="row">
            <div class="col-xxs-6 text-left">
                <input type="button" class="btn btn-primary" value="@Dnn.LocalizeString("AddToCart")" ng-click="grid.addToCart(-1)" />
            </div>
            <div class="col-xxs-6 text-right">
                <input type="button" class="btn btn-default" value="@Dnn.LocalizeString("ViewCart")" onclick="window.location.href='@(Model.CheckoutPage)';">
            </div>
        </div>
    </div>
</div>