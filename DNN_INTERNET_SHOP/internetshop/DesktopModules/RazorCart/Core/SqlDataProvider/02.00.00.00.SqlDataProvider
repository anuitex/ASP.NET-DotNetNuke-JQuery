/************************************************************/
/*****              SqlDataProvider                     *****/
/*****                                                  *****/
/*****                                                  *****/
/***** Note: To manually execute this script you must   *****/
/*****       perform a search and replace operation     *****/
/*****       for {databaseOwner} and {objectQualifier}  *****/
/*****                                                  *****/
/************************************************************/



/************************************************************/
/*****               Create Tables                      *****/
/************************************************************/
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_Analytics') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_Analytics
	(
		[ID] [INT] IDENTITY(1,1) NOT NULL,
		[Date] [DATETIME] NOT NULL,
		[Action] [VARCHAR](64) NOT NULL,
		[ProductID] [INT] NOT NULL,
		[UserID] [INT] NULL,
		[CartID] [INT] NULL,
		[StoreID] [INT] NULL,
		[PortalID] [INT] NOT NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_Analytics] PRIMARY KEY CLUSTERED
		(
			[ID] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_BookingDisabledDates') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_BookingDisabledDates
	(
		[ID] [INT] IDENTITY(1,1) NOT NULL,
		[ProductID] [INT] NOT NULL,
		[Type] [VARCHAR](32) NULL,
		[DisableDay] [INT] NULL,
		[DisableDate] [DATETIME] NULL,
		[DisableDateRangeFrom] [DATETIME] NULL,
		[DisableDateRangeTo] [DATETIME] NULL,
		[EveryYear] [BIT] NULL,
		[Calendar] [VARCHAR](32) NULL,
		[CreatedDate] [DATETIME] NULL,
		[CreatedBy] [INT] NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_BookingDisabledDates] PRIMARY KEY CLUSTERED
		(
			[ID] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_BookingDisabledTimes') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_BookingDisabledTimes
	(
		[ID] [INT] IDENTITY(1,1) NOT NULL,
		[ProductID] [INT] NOT NULL,
		[Type] [VARCHAR](32) NULL,
		[DisableTime] [TIME] NULL,
		[DisableTimeRangeFrom] [TIME] NULL,
		[DisableTimeRangeTo] [TIME] NULL,
		[Repeat] [INT] NULL,
		[Calendar] [VARCHAR](32) NULL,
		[CreatedDate] [DATETIME] NULL,
		[CreatedBy] [INT] NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_BookingDisabledTimes] PRIMARY KEY CLUSTERED
		(
			[ID] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_BundleProducts') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_BundleProducts
	(
		[ID] [INT] IDENTITY(1,1) NOT NULL,
		[ProductID] [INT] NULL,
		[BundleProductID] [INT] NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_BundleProducts] PRIMARY KEY CLUSTERED
		(
			[ID] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_Category') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_Category
	(
		[CategoryID] [INT] IDENTITY(1,1) NOT NULL,
		[ParentID] [INT] NULL,
		[CategoryName] [VARCHAR](50) NOT NULL,
		[SortOrder] [INT] NULL,
		[CatSEOURL] [VARCHAR](50) NULL,
		[CatDescription] [NTEXT] NULL,
		[ShowCategoryRole] [BIT] NULL,
		[MinOrderAmount] [MONEY] NULL,
		[MinOrderQty] [INT] NULL,
		[DepartmentID] [INT] NULL,
		[Featured] [BIT] NULL,
		[Share] [BIT] NULL,
		[CatImage] [NVARCHAR](500) NULL,
		[BreadCrumb] [NVARCHAR](200) NULL,
		[LinkUrl] [NVARCHAR](1000) NULL,
		[H2Tag] [NVARCHAR](100) NULL,
		[AltTag] [NVARCHAR](120) NULL,
		[MetaDescription] [NVARCHAR](160) NULL,
		[StoreID] [INT] NULL,
		[PortalID] [INT] NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_Category] PRIMARY KEY CLUSTERED
		(
			[CategoryID] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_CategoryProduct') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_CategoryProduct
	(
		[ID] [INT] IDENTITY(1,1) NOT NULL,
		[CategoryID] [INT] NULL,
		[ProductID] [INT] NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_CategoryProduct] PRIMARY KEY CLUSTERED
		(
			[ID] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_CategoryQtyDiscounts') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_CategoryQtyDiscounts
	(
		[QtyDiscountID] [INT] IDENTITY(1,1) NOT NULL,
		[CategoryID] [INT] NOT NULL,
		[QtyFrom] [INT] NULL,
		[QtyTo] [INT] NULL,
		[Price] [MONEY] NULL,
		[DiscountGroup] [VARCHAR](50) NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_CategoryQtyDiscounts] PRIMARY KEY CLUSTERED
		(
			[QtyDiscountID] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ClientCredentials') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_ClientCredentials
	(
		[ID] [BIGINT] IDENTITY(1,1) NOT NULL,
		[Title] [NVARCHAR](256) NOT NULL,
		[Summary] [NVARCHAR](1024) NULL,
		[ClientID] [NVARCHAR](64) NOT NULL,
		[ClientSecret] [NVARCHAR](256) NOT NULL,
		[CallbackUrl] [NVARCHAR](256) NOT NULL,
		[ApplicationUrl] [NVARCHAR](256) NOT NULL,
		[Status] [SMALLINT] NULL,
		[SortOrder] [FLOAT] NULL,
		[CreatedDate] [DATETIME] NULL,
		[CreatedByUser] [NVARCHAR](64) NULL,
		[ModifiedDate] [DATETIME] NULL,
		[ModifiedByUser] [NVARCHAR](64) NULL,
		[StoreID] [INT] NULL,
		[PortalID] [INT] NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_ClientCredentials] PRIMARY KEY CLUSTERED
		(
			[ID] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_CouponProduct') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_CouponProduct
	(
		[ID] [INT] IDENTITY(1,1) NOT NULL,
		[CouponID] [INT] NULL,
		[ProductID] [INT] NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_CouponProduct] PRIMARY KEY CLUSTERED
		(
			[ID] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_Coupons') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_Coupons
	(
		[CouponID] [INT] IDENTITY(1,1) NOT NULL,
		[CouponCode] [VARCHAR](50) NULL,
		[CouponName] [VARCHAR](255) NULL,
		[CouponAmount] [MONEY] NOT NULL,
		[CouponQuantity] [VARCHAR](50) NULL,
		[DiscountByItem] [BIT] NULL,
		[CreatedByUser] [NVARCHAR](100) NULL,
		[CreatedDate] [DATETIME] NULL,
		[ProductID] [INT] NULL,
		[CouponLimit] [INT] NULL,
		[CouponShipping] [MONEY] NULL,
		[DiscountPercent] [DECIMAL](18, 0) NULL,
		[ExpireDate] [DATETIME] NULL,
		[DiscountFirstPaymentOnly] [BIT] NULL,
		[CouponRoleExists] [BIT] NULL,
		[MaxUseProduct] [INT] NULL,
		[Active] [BIT] NULL,
		[StartDate] [DATETIME] NULL,
		[MinOrderAmount] [MONEY] NULL,
		[FreeStandardShipping] [BIT] NULL,
		[UpgradeShipping] [BIT] NULL,
		[StoreID] [INT] NULL,
		[PortalID] [INT] NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_Coupons] PRIMARY KEY CLUSTERED
		(
			[CouponID] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_CouponVariant') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_CouponVariant
	(
		[ID] [INT] IDENTITY(1,1) NOT NULL,
		[CouponID] [INT] NULL,
		[ProductID] [INT] NULL,
		[VariantID] [INT] NULL,
		[VariantName] [VARCHAR](50) NULL,
		[LifecycleStatus] [VARCHAR](50) NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_CouponVariant] PRIMARY KEY CLUSTERED
		(
			[ID] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_Customer') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_Customer
	(
		[CustomerID] [INT] IDENTITY(1,1) NOT NULL,
		[DNNLogin] [NVARCHAR](128) NULL,
		[CompanyName] [NVARCHAR](128) NULL,
		[FirstName] [NVARCHAR](64) NULL,
		[LastName] [NVARCHAR](64) NULL,
		[Address1] [NVARCHAR](256) NULL,
		[Address2] [NVARCHAR](128) NULL,
		[City] [NVARCHAR](64) NULL,
		[Zip] [NVARCHAR](64) NULL,
		[State] [NVARCHAR](64) NULL,
		[Country] [NVARCHAR](64) NULL,
		[BillingAddress1] [NVARCHAR](256) NULL,
		[BillingAddress2] [NVARCHAR](50),
		[BillingCity] [NVARCHAR](50) NULL,
		[BillingZip] [NVARCHAR](64) NULL,
		[BillingState] [NVARCHAR](50) NULL,
		[BillingCountry] [NVARCHAR](50) NULL,
		[HomePhone] [VARCHAR](50) NULL,
		[CellPhone] [VARCHAR](50) NULL,
		[WorkPhone] [VARCHAR](50) NULL,
		[PhoneCarrier] [VARCHAR](50) NULL,
		[Email] [VARCHAR](50) NULL,
		[AccountNo] [VARCHAR](50) NULL,
		[MaskAccountNo] [VARCHAR](50) NULL,
		[ABAExpire] [VARCHAR](50) NULL,
		[DateCreated] [DATETIME] NULL,
		[Contact] [BIT] NULL,
		[Remind] [BIT] NULL,
		[IPAddress] [VARCHAR](50) NULL,
		[UDF] [VARCHAR](50) NULL,
		[UDTB1] [VARCHAR](50) NULL,
		[UDTB2] [VARCHAR](50) NULL,
		[UDDate] [DATETIME] NULL,
		[BuyerRole] [VARCHAR](50) NULL,
		[AnniversaryDate] [DATETIME] NULL,
		[CreditLimit] [DECIMAL](18, 2) NULL,
		[BidLimit] [DECIMAL](18, 2) NULL,
		[ModifiedBy] [NVARCHAR](100) NULL,
		[DateModified] [DATETIME] NULL,
		[TaxID] [VARCHAR](50) NULL,
		[StoreID] [INT] NULL,
		[PortalID] [INT] NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_Customer] PRIMARY KEY CLUSTERED
		(
			[CustomerID] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_CustomerWallet') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_CustomerWallet
	(
		[ID] [INT] IDENTITY(1,1) NOT NULL,
		[CustomerID] [INT] NOT NULL,
		[WalletName] [NVARCHAR](150) NULL,
		[BillingName] [NVARCHAR](50) NULL,
		[Address1] [NVARCHAR](50) NULL,
		[Address2] [NVARCHAR](50) NULL,
		[City] [NVARCHAR](50) NULL,
		[Zip] [VARCHAR](50) NULL,
		[State] [NVARCHAR](50) NULL,
		[Country] [NVARCHAR](50) NULL,
		[PayType] [VARCHAR](50) NULL,
		[AcctNo] [VARCHAR](64) NULL,
		[ExpRoute] [VARCHAR](50) NULL,
		[DNNLogin] [VARCHAR](50) NULL,
		[DNNRole] [NVARCHAR](50) NULL,
		[PortalID] [INT] NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_CustomerWallet] PRIMARY KEY CLUSTERED
		(
			[ID] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_Department') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_Department
	(
		[DepartmentID] [INT] IDENTITY(1,1) NOT NULL,
		[ParentID] [INT] NULL,
		[SortOrder] [INT] NULL,
		[DepartmentName] [NVARCHAR](50) NOT NULL,
		[DeptDescription] [NVARCHAR](MAX) NULL,
		[DeptSEOURL] [VARCHAR](50) NULL,
		[Share] [BIT] NULL,
		[ShowDepartmentRole] [BIT] NULL,
		[MinOrderQty] [INT] NULL,
		[MinOrderAmount] [MONEY] NULL,
		[Featured] [BIT] NULL,
		[DeptImage] [NVARCHAR](500) NULL,
		[StoreID] [INT] NULL,
		[PortalID] [INT] NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_Department] PRIMARY KEY CLUSTERED
		(
			[DepartmentID] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_EmailCampaign') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_EmailCampaign
	(
		[EmailCampaignID] [INT] IDENTITY(1,1) NOT NULL,
		[Name] [NVARCHAR](128) NULL,
		[Type] [NVARCHAR](32) NULL,
		[EmailFrom] [NVARCHAR](256) NULL,
		[Subject] [NVARCHAR](256) NULL,
		[Template] [NTEXT] NULL,
		[Active] [BIT] NULL,
		[Interval] [SMALLINT] NULL,
		[Units] [NVARCHAR](10) NULL,
		[CouponID] [INT] NULL,
		[EmailsSent] [INT] NULL,
		[LanguageLocale] [NVARCHAR](20) NULL,
		[StoreID] [INT] NULL,
		[PortalID] [INT] NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_EmailCampaign] PRIMARY KEY CLUSTERED
		(
			[EmailCampaignID] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_EmailTemplateSC') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_EmailTemplateSC
	(
		[TemplateID] [INT] IDENTITY(1,1) NOT NULL,
		[Name] [NVARCHAR](50) NOT NULL,
		[Subject] [NVARCHAR](255) NOT NULL,
		[Template] [NTEXT] NOT NULL,
		[LanguageLocale] [NVARCHAR](20) NULL,
		[Type] [NVARCHAR](150) NULL,
		[StoreID] [INT] NULL,
		[PortalID] [INT] NOT NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_EmailTemplateSC] PRIMARY KEY CLUSTERED
		(
			[TemplateID] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_InvoiceTemplate') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_InvoiceTemplate
	(
		[TemplateID] [INT] IDENTITY(1,1) NOT NULL,
		[Name] [NVARCHAR](100) NOT NULL,
		[LanguageLocale] [NVARCHAR](20) NOT NULL,
		[Template] [NTEXT],
		[StoreID] [INT] NULL,
		[PortalID] [INT] NOT NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_InvoiceTemplate] PRIMARY KEY CLUSTERED
		(
			[TemplateID] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_LicenseKey') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_LicenseKey
	(
		[LicenseKeyID] [INT] IDENTITY(1,1) NOT NULL,
		[Hostname] [VARCHAR](256) NULL,
		[LicenseKey] [VARCHAR](MAX) NULL,
		[CreateDate] [DATETIME] NULL,
		[CreatedByUser] [INT] NULL,
		[PortalID] [INT] NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_LicenseKey] PRIMARY KEY CLUSTERED
		(
			[LicenseKeyID] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_Manufacturer') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_Manufacturer
	(
		[ManufacturerID] [INT] IDENTITY(1,1) NOT NULL,
		[ManufacturerName] [NVARCHAR](50) NOT NULL,
		[FirstName] [NVARCHAR](50) NULL,
		[LastName] [NVARCHAR](50) NULL,
		[Address1] [NVARCHAR](50) NULL,
		[Address2] [NVARCHAR](50) NULL,
		[City] [NVARCHAR](50) NULL,
		[State] [NVARCHAR](50) NULL,
		[Country] [NVARCHAR](50) NULL,
		[Zip] [VARCHAR](50) NULL,
		[Phone] [VARCHAR](50) NULL,
		[Fax] [VARCHAR](50) NULL,
		[Email] [VARCHAR](50) NULL,
		[IDNumber] [VARCHAR](50) NULL,
		[ContactName] [NVARCHAR](75) NULL,
		[Description] [NVARCHAR](100) NULL,
		[Occupation] [NVARCHAR](50) NULL,
		[Comments] [NTEXT] NULL,
		[AccountNumber] [VARCHAR](50) NULL,
		[RoutingNumber] [VARCHAR](50) NULL,
		[Share] [BIT] NULL,
		[StoreID] [INT] NULL,
		[PortalID] [INT] NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_Manufacturer] PRIMARY KEY CLUSTERED
		(
			[ManufacturerID] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_OrderDiscounts') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_OrderDiscounts
	(
		[OrderDiscountID] [INT] IDENTITY(1,1) NOT NULL,
		[RoleID] [INT] NULL,
		[DiscountPercent] [DECIMAL](6, 2) NULL,
		[DiscountAmount] [MONEY] NULL,
		[TextBox1Required] [BIT] NULL,
		[TextBox2Required] [BIT] NULL,
		[DateRequired] [BIT] NULL,
		[StoreID] [INT] NULL,
		[PortalID] [INT] NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_OrderDiscounts] PRIMARY KEY CLUSTERED
		(
			[OrderDiscountID] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_OrderFulfillmentDetails') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_OrderFulfillmentDetails
	(
		[ID] [INT] IDENTITY(1, 1) NOT NULL,
		[FulfillmentID] [INT] NOT NULL,
		[OrderDetailID] [INT] NOT NULL,
		[Quantity] [DECIMAL](10,2) NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_OrderFulfillmentDetails] PRIMARY KEY CLUSTERED
		(
			[ID] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_OrderFulfillments') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_OrderFulfillments
	(
		[FulfillmentID] [INT] IDENTITY(1, 1) NOT NULL,
		[OrderID] [INT] NOT NULL,
		[ShipCarrier] [NVARCHAR](64) NULL,
		[ShipMethod] [NVARCHAR](128) NULL,
		[ShipDate] [DATETIME] NULL,
		[Width] [DECIMAL](12,2) NULL,
		[Height] [DECIMAL](12,2) NULL,
		[Length] [DECIMAL](12,2) NULL,
		[Shipped] [BIT] NOT NULL,
		[TrackingNumber] [NVARCHAR](128) NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_OrderFulfillments] PRIMARY KEY CLUSTERED
		(
			[FulfillmentID] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_OrderNotes') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_OrderNotes
	(
		[ID] [INT] IDENTITY(1,1) NOT NULL,
		[OrderID] [INT] NOT NULL,
		[Notes] [NVARCHAR](MAX) NULL,
		[ModifiedBy] [NVARCHAR](100) NULL,
		[DateModified] [DATETIME] NULL,
		[DateCreated] [DATETIME] NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_OrderNotes] PRIMARY KEY CLUSTERED
		(
			[ID] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_PayHist') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_PayHist
	(
		[PayHistID] [INT] IDENTITY(1,1) NOT NULL,
		[CustomerID] [INT] NOT NULL,
		[OrderID] [INT] NULL,
		[SubscriptionID] [INT] NULL,
		[PayMethodID] [INT] NULL,
		[PayType] [VARCHAR](50) NULL,
		[PayDate] [DATETIME] NULL,
		[Amount] [MONEY] NULL,
		[Quantity] [INT] NULL,
		[InvoiceNo] [VARCHAR](50) NULL,
		[PONumber] [VARCHAR](50) NULL,
		[AcctNo] [VARCHAR](64) NULL,
		[ExpRoute] [VARCHAR](50) NULL,
		[CVV] [VARCHAR](50) NULL,
		[MaskAcctNo] [VARCHAR](50) NULL,
		[BillingName] [VARCHAR](50) NULL,
		[BillingAddress] [VARCHAR](50) NULL,
		[BillingCity] [VARCHAR](50) NULL,
		[BillingState] [VARCHAR](50) NULL,
		[BillingZip] [VARCHAR](50) NULL,
		[BillingCountry] [VARCHAR](50) NULL,
		[Coupon] [VARCHAR](50) NULL,
		[TransType] [VARCHAR](50) NULL,
		[TransID] [VARCHAR](50) NULL,
		[Success] [BIT] NULL,
		[Status] [VARCHAR](50) NULL,
		[AuthCode] [VARCHAR](50) NULL,
		[Notes] [VARCHAR](50) NULL,
		[GiftCardID] [INT] NULL,
		[IPAddress] [VARCHAR](50) NULL,
		[ClearDate] [DATETIME] NULL,
		[AdminNotes] [NVARCHAR](MAX) NULL,
		[OffsetID] [INT] NULL,
		[ModifiedBy] [NVARCHAR](100) NULL,
		[DateModified] [DATETIME] NULL,
		[StoreID] [INT] NULL,
		[PortalID] [INT] NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_PayHist] PRIMARY KEY CLUSTERED
		(
			[PayHistID] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_PayHistImages') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_PayHistImages
	(
		[ID] [INT] IDENTITY(1,1) NOT NULL,
		[PayHistID] [INT] NOT NULL,
		[SignatureData] [NVARCHAR](MAX) NULL,
		[CreatedDate] [DATETIME] NULL,
		[CreatedByUser] [NVARCHAR](100) NULL,
		[ModifiedDate] [DATETIME] NULL,
		[ModifiedByUser] [NVARCHAR](100) NULL,
		[PortalID] [INT] NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_PayHistImages] PRIMARY KEY CLUSTERED
		(
			[ID] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_PaymentMethods') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_PaymentMethods
	(
		[PayMethodID] [INT] IDENTITY(1,1) NOT NULL,
		[Type] [VARCHAR](100) NULL,
		[Name] [NVARCHAR](100) NOT NULL,
		[Active] [BIT] NULL,
		[PayZoneID] [INT] NOT NULL,
		[SortOrder] [INT] NULL,
		[SurchargeAmount] [DECIMAL](18, 2) NULL,
		[SurchargePercentage] [DECIMAL](18, 2) NULL,
		[Step2Label1] [NVARCHAR](200) NULL,
		[Step2Label2] [NVARCHAR](200) NULL,
		[EmailMessage] [NVARCHAR](500) NULL,
		[GatewayCode] [NVARCHAR](128) NULL,
		[GatewayUserID] [NVARCHAR](256) NULL,
		[GatewayPassword] [NVARCHAR](256) NULL,
		[GatewayKey] [NVARCHAR](1024) NULL,
		[GatewayProvider] [NVARCHAR] (64) NULL,
		[PriceFrom] [DECIMAL](18, 2) NULL,
		[PriceTo] [DECIMAL](18, 2) NULL,
		[MonthlyLimit] [DECIMAL](18, 2) NULL,
		[DepositRequired] [BIT] NULL,
		[DepositPercent] [DECIMAL](18, 2) NULL,
		[Share] [BIT] NULL,
		[Roles] [VARCHAR](100) NULL,
		[StoreID] [INT] NULL,
		[PortalID] [INT] NOT NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_PaymentMethods] PRIMARY KEY CLUSTERED
		(
			[PayMethodID] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_PaymentMethodsZones') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_PaymentMethodsZones
	(
		[PayZoneID] [INT] IDENTITY(1,1) NOT NULL,
		[Name] [NVARCHAR](100) NOT NULL,
		[Country] [VARCHAR](1000) NULL,
		[State] [VARCHAR](200) NULL,
		[StoreID] [INT] NULL,
		[PortalID] [INT] NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_PaymentMethodsZones] PRIMARY KEY CLUSTERED
		(
			[PayZoneID] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_PriceClass') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_PriceClass
	(
		[PriceClassID] [INT] IDENTITY(1,1) NOT NULL,
		[PriceClass] [VARCHAR](20) NULL,
		[QtyFrom] [INT] NULL,
		[QtyTo] [INT] NULL,
		[Price] [MONEY] NULL,
		[DiscountPercent] [DECIMAL](10, 2) NULL,
		[AdjustType] [VARCHAR](50) NULL,
		[Description] [NVARCHAR](200) NULL,
		[StoreID] [INT] NULL,
		[PortalID] [INT] NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_PriceClass] PRIMARY KEY CLUSTERED
		(
			[PriceClassID] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ProductCustomFields') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_ProductCustomFields
	(
		[PCID] [INT] IDENTITY(1,1) NOT NULL,
		[ProductID] [INT] NOT NULL,
		[Label] [NVARCHAR](150) NULL,
		[Type] [VARCHAR](50) NULL,
		[Value] [NVARCHAR](500) NULL,
		[CustomFieldValue] [NVARCHAR](1024) NULL,
		[TabName] [VARCHAR](50) NULL,
		[SortOrder] [INT] NULL,
		[Share] [BIT] NULL,
		[PortalID] [INT] NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_ProductCustomFields] PRIMARY KEY CLUSTERED
		(
			[PCID] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ProductDiscountsByRole') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_ProductDiscountsByRole
	(
		[DiscountID] [INT] IDENTITY(1,1) NOT NULL,
		[ProductID] [INT] NULL,
		[RoleID] [INT] NULL,
		[DiscountPercent] [DECIMAL](6, 2) NULL,
		[DiscountAmount] [MONEY] NULL,
		[UserName] [NVARCHAR](100) NULL,
		[StartDate] [DATETIME] NULL,
		[EndDate] [DATETIME] NULL,
		[InvertRole] [BIT] NULL,
		[DiscountLevel] [VARCHAR](512) NULL,
		[PortalID] [INT] NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_ProductDiscountsByRole] PRIMARY KEY CLUSTERED
		(
			[DiscountID] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ProductDownloadHistory') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_ProductDownloadHistory
	(
		[ID] [INT] IDENTITY(1,1) NOT NULL,
		[ProductID] [INT] NOT NULL,
		[OrderDetailGUID] [UNIQUEIDENTIFIER] NOT NULL,
		[DownloadUrl] [NVARCHAR](2048) NULL,
		[DownloadDate] [DATETIME] NOT NULL,
		[IPAddress] [VARCHAR](45) NULL,
		[UserAgent] [NVARCHAR](512) NULL,
		[PortalID] [INT] NOT NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_ProductDownloadHistory] PRIMARY KEY CLUSTERED
		(
			[ID] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ProductImages') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_ProductImages
	(
		[ID] [INT] IDENTITY(1,1) NOT NULL,
		[ProductID] [INT] NULL,
		[SortOrder] [INT] NULL,
		[ThumbImage] [NVARCHAR](500) NULL,
		[LargeImage] [NVARCHAR](500) NULL,
		[ZoomImage] [NVARCHAR](500) NULL,
		[Title] [NVARCHAR](100) NULL,
		[AltTag] [NVARCHAR](200) NULL,
		[Status] [SMALLINT] NULL,
		[CreatedDate] [DATETIME] NULL,
		[CreatedByUser] [NVARCHAR](100) NULL,
		[ModifiedDate] [DATETIME] NULL,
		[ModifiedByUser] [NVARCHAR](100) NULL,
		[PortalID] [INT] NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_ProductImages] PRIMARY KEY CLUSTERED
		(
			[ID] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ProductLocalization') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_ProductLocalization
	(
		[ProductID] [INT] NOT NULL,
		[LanguageLocale] [NVARCHAR](20) NULL,
		[ModelName] [NVARCHAR](200) NOT NULL,
		[Summary] [NVARCHAR](1000) NULL,
		[TabName1] [NVARCHAR](50) NULL,
		[Description] [NTEXT] NULL,
		[TabName2] [NVARCHAR](50) NULL,
		[Description2] [NTEXT] NULL,
		[TabName3] [NVARCHAR](50) NULL,
		[Description3] [NTEXT] NULL,
		[TabName4] [NVARCHAR](50) NULL,
		[Description4] [NTEXT] NULL,
		[TabName5] [NVARCHAR](50) NULL,
		[Description5] [NTEXT] NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_ProductLocalization] PRIMARY KEY CLUSTERED
		(
			[ProductID] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ProductManageRole') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_ProductManageRole
	(
		[ID] [INT] IDENTITY(1,1) NOT NULL,
		[ProductID] [INT] NOT NULL,
		[RoleID] [INT] NOT NULL,
		[Action] [VARCHAR](16) NULL,
		[Type] [VARCHAR](16) NULL,
		[ExpireDays] [INT] NULL,
		[StartDate] [DATETIME] NULL,
		[EndDate] [DATETIME] NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_ProductManageRole] PRIMARY KEY CLUSTERED
		(
			[ID] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ProductPackage') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_ProductPackage
	(
		[ID] [INT] IDENTITY(1,1) NOT NULL,
		[ProductID] [INT] NOT NULL,
		[PackageName] [NVARCHAR](255) NULL,
		[Weight] [DECIMAL](18, 2) NOT NULL,
		[WeightUnits] [VARCHAR](20) NULL,
		[Length] [DECIMAL](18, 2) NOT NULL,
		[Width] [DECIMAL](18, 2) NOT NULL,
		[Height] [DECIMAL](18, 2) NOT NULL,
		[DimUnits] [VARCHAR](20) NULL,
		[Notes] [NVARCHAR](1000) NULL,
		[IsEnvelope] [BIT] NULL,
		[ProductPackage_Product] [INT] NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_ProductPackage] PRIMARY KEY CLUSTERED
		(
			[ID] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ProductQtyDiscounts') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_ProductQtyDiscounts
	(
		[QtyDiscountID] [INT] IDENTITY(1,1) NOT NULL,
		[ProductID] [INT] NOT NULL,
		[QtyFrom] [INT] NULL,
		[QtyTo] [INT] NULL,
		[Price] [MONEY] NULL,
		[AdjustType] [VARCHAR](50) NULL,
		[RoleID] [INT] NULL,
		[PaymentMethod] [VARCHAR](100) NULL,
		[DisplayLabel] [NVARCHAR](50) NULL,
		[DiscountLevel] [VARCHAR](512) NULL,
		[PortalID] [INT] NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_ProductQtyDiscounts] PRIMARY KEY CLUSTERED
		(
			[QtyDiscountID] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ProductReviews') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_ProductReviews
	(
		[ReviewID] [INT] IDENTITY(1,1) NOT NULL,
		[ProductID] [INT] NULL,
		[DNNUserName] [VARCHAR](50) NULL,
		[Rate] [DECIMAL](4, 2) NULL,
		[Comments] [VARCHAR](2000) NULL,
		[NickName] [VARCHAR](50) NULL,
		[ReviewDate] [DATETIME] NULL,
		[Approved] [SMALLINT] NULL,
		[DateApproved] [DATETIME] NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_ProductReviews] PRIMARY KEY CLUSTERED
		(
			[ReviewID] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_Products') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_Products
	(
		[ProductID] [INT] IDENTITY(1,1) NOT NULL,
		[Manufacturer] [NVARCHAR](50) NULL,
		[ModelNumber] [NVARCHAR](50) NULL,
		[ModelName] [NVARCHAR](200) NULL,
		[Summary] [NVARCHAR](1000) NULL,
		[SortOrder] [INT] NULL,
		[QuantityOnHand] [INT] NULL,
		[UnitCost] [MONEY] NOT NULL,
		[SalePrice] [MONEY] NULL,
		[WholesalePrice] [MONEY] NULL,
		[MemberPrice] [MONEY] NULL,
		[ShipCost] [MONEY] NULL,
		[PriceClass] [VARCHAR](20) NULL,
		[SEOURL] [VARCHAR](80) NULL,
		[ProductDetailUrl] [NVARCHAR](1000) NULL,
		[Width] [INT] NULL,
		[Height] [INT] NULL,
		[Length] [INT] NULL,
		[Weight] [DECIMAL](12, 2) NULL,
		[ShipCodes] [VARCHAR](100) NULL,
		[ShipText] [NVARCHAR](500) NULL,
		[MinOrderQty] [INT] NULL,
		[MaxOrderQty] [INT] NULL,
		[TaxableAmount] [MONEY] NULL,
		[GiftCard] [BIT] NULL,
		[TaxExempt] [BIT] NULL,
		[SaleStartDate] [DATETIME] NULL,
		[SaleEndDate] [DATETIME] NULL,
		[ActiveFrom] [DATETIME] NULL,
		[ActiveTo] [DATETIME] NULL,
		[Items] [INT] NULL,
		[Share] [BIT] NULL,
		[Featured] [BIT] NOT NULL,
		[HideProduct] [BIT] NULL,
		[Archived] [BIT] NOT NULL,
		[RequireLogin] [BIT] NULL,
		[RequireCoupon] [BIT] NULL,
		[ExcludeCoupon] [BIT] NULL,
		[HideThumbnail] [BIT] NULL,
		[HidePrice] [BIT] NULL,
		[HideQuantity] [BIT] NULL,
		[LogicallyDeleted] [BIT] NULL,
		[UserEnteredAmount] [BIT] NULL,
		[TabName1] [VARCHAR](50) NULL,
		[TabName2] [VARCHAR](50) NULL,
		[TabName3] [VARCHAR](50) NULL,
		[TabName4] [VARCHAR](50) NULL,
		[TabName5] [VARCHAR](50) NULL,
		[Description] [NTEXT] NULL,
		[Description2] [NTEXT] NULL,
		[Description3] [NTEXT] NULL,
		[Description4] [NTEXT] NULL,
		[Description5] [NTEXT] NULL,
		[DownloadUrl] [NVARCHAR](1000) NULL,
		[MaxDownloadAttempts] [INT] NULL,
		[MaxDownloadDays] [INT] NULL,
		[AutoGUID] [BIT] NULL,
		[UrlGUID] [VARCHAR](1000) NULL,
		[EncryptUrl] [BIT] NULL,
		[Booking] [BIT] NULL,
		[BookingUnits] [NVARCHAR](100) NULL,
		[Recurring] [BIT] NULL,
		[SubscriptionInterval] [VARCHAR](50) NULL,
		[RecurringStartDate] [VARCHAR](15) NULL,
		[RecurringOccurances] [INT] NULL,
		[RecurStartDateSetup] [VARCHAR](50) NULL,
		[ExcludeVariantRecur] [BIT] NULL,
		[EnableTrial] [BIT] NULL,
		[TrialInterval] [VARCHAR](50) NULL,
		[TrialOccurences] [VARCHAR](50) NULL,
		[TrialAmount] [MONEY] NULL,
		[AffiliateURL] [NVARCHAR](1000) NULL,
		[TitleTag] [VARCHAR](85) NULL,
		[DescriptionTag] [NVARCHAR](200) NULL,
		[KeywordTag] [NVARCHAR](300) NULL,
		[AddDNNRole] [VARCHAR](50) NULL,
		[RemoveDNNRole] [VARCHAR](70) NULL,
		[ShowProductRole] [BIT] NULL,
		[RoleExpireDays] [NVARCHAR](500) NULL,
		[UsePriPriceWght] [BIT] NULL,
		[BundleID] [INT] NULL,
		[MasterBundleID] [INT] NULL,
		[ChargeHandling] [BIT] NULL,
		[LeadTime] [VARCHAR](50) NULL,
		[PriceUnits] [NVARCHAR](50) NULL,
		[TaxRate] [FLOAT] NULL,
		[Upsell] [BIT] NULL,
		[UseCompanyLogo] [BIT] NULL,
		[CompareGroup] [NVARCHAR](150) NULL,
		[ProductTypeID] [INT] NULL,
		[ShowPDUDF] [BIT] NULL,
		[CreatedByUser] [NVARCHAR](100) NULL,
		[CreatedDate] [DATETIME] NULL,
		[UpdatedDate] [DATETIME] NULL,
		[StoreID] [INT] NULL,
		[PortalID] [INT] NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_Products] PRIMARY KEY CLUSTERED
		(
			[ProductID] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_Products2') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_Products2
	(
		[ProductID] [INT] NOT NULL,
		[ShowOrderAsIs] [BIT] NOT NULL,
		[Ecard] [BIT] NULL,
		[BinLocation] [NVARCHAR](150) NULL,
		[NumberOfBoxes] [NVARCHAR](50) NULL,
		[DateAddedToInventory] [DATETIME] NULL,
		[Client] [NVARCHAR](200) NULL,
		[Owner] [NVARCHAR](200) NULL,
		[ShowDatePicker] [BIT] NULL,
		[ShowTimePicker] [BIT] NULL,
		[ProductFlags] [BIGINT] NULL,
		[MinPartialAmount] [DECIMAL](18, 2) NULL,
		[BookingFields] [VARCHAR](16) NULL,
		[BookingDuration] [VARCHAR](32) NULL,
		[MinBookingDuration] [INT] NULL,
		[MaxBookingDuration] [INT] NULL,
		[FirstBookingDate] [INT] NULL,
		[MinBookingTimeDuration] [INT] NULL,
		[MaxBookingTimeDuration] [INT] NULL,
		[AddRolesEffectiveInCart] [BIT] NULL,
		[RemoveRolesEffectiveInCart] [BIT] NULL,
		[SafetyStockQty] [INT] NULL,
		[CustomModalTabID] [INT] NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_Products_2] PRIMARY KEY CLUSTERED
		(
			[ProductID] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ProductTemplate') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_ProductTemplate
	(
		[PTID] [INT] IDENTITY(1,1) NOT NULL,
		[Label] [NVARCHAR](256) NULL,
		[Type] [VARCHAR](50) NULL,
		[Value] [NVARCHAR](2048) NULL,
		[SortOrder] [INT] NULL,
		[Share] [BIT] NULL,
		[CategoryID] [INT] NULL,
		[StoreID] [INT] NULL,
		[PortalID] [INT] NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_ProductTemplate] PRIMARY KEY CLUSTERED
		(
			[PTID] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ProductVariant') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_ProductVariant
	(
		[VariantID] [INT] IDENTITY(1,1) NOT NULL,
		[ProductID] [INT] NULL,
		[VariantGroupID] [INT] NULL,
		[VariantGroup] [VARCHAR](50) NULL,
		[VariantName] [VARCHAR](50) NULL,
		[VariantImage] [NVARCHAR](500) NULL,
		[VariantDesc] [NVARCHAR](2048) NULL,
		[SortOrder] [INT] NULL,
		[VariantDisplayType] [VARCHAR](50) NULL,
		[QtyOnHand] [INT] NULL,
		[Sku] [VARCHAR](50) NULL,
		[VariantRequired] [BIT] NULL,
		[PriceAdjustment] [MONEY] NULL,
		[SalePrice] [MONEY] NULL,
		[EnablePriceAdjustment] [BIT] NULL,
		[WeightAdjustment] [FLOAT] NULL,
		[ConditionalGroupID] [INT] NULL,
		[VariantZoomImage] [NVARCHAR](200) NULL,
		[VariantIconImage] [NVARCHAR](200) NULL,
		[DropDownImageOption] [VARCHAR](50) NULL,
		[IconImageOption] [VARCHAR](50) NULL,
		[RenderTextInImage] [BIT] NULL,
		[LifecycleStatus] [VARCHAR](50) NULL,
		[Notes] [NVARCHAR](500) NULL,
		[FeaturedVariant] [BIT] NULL,
		[TaxableAmount] [MONEY] NULL,
		[PriceType] [VARCHAR](50) NULL,
		[PortalID] [INT] NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_ProductVariant] PRIMARY KEY CLUSTERED
		(
			[VariantID] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ProductVariantGroup') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_ProductVariantGroup
	(
		[VariantGroupID] [INT] IDENTITY(1,1) NOT NULL,
		[ProductID] [INT] NULL,
		[VariantGroup] [VARCHAR](50) NULL,
		[VariantHelpURL] [VARCHAR](150) NULL,
		[SortOrder] [INT] NULL,
		[GroupDescription] [NVARCHAR](2048) NULL,
		[Hide] [BIT] NULL,
		[PortalID] [INT] NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_ProductVariantGroup] PRIMARY KEY CLUSTERED
		(
			[VariantGroupID] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ProductVariantInventory') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_ProductVariantInventory
	(
		[VariantInventoryID] [INT] IDENTITY(1,1) NOT NULL,
		[ProductID] [INT] NOT NULL,
		[VariantName] [VARCHAR](500) NULL,
		[Sku] [VARCHAR](50) NULL,
		[QtyOnHand] [INT] NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_ProductVariantInventory] PRIMARY KEY CLUSTERED
		(
			[VariantInventoryID] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ProductVariantInvLinker') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_ProductVariantInvLinker
	(
		[ID] [INT] IDENTITY(1,1) NOT NULL,
		[ProductID] [INT] NOT NULL,
		[VariantInventoryID] [INT] NOT NULL,
		[VariantID] [INT] NOT NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_ProductVariantInvLinker] PRIMARY KEY CLUSTERED
		(
			[ID] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ProductVariantRole') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_ProductVariantRole
	(
		[ID] [INT] IDENTITY(1,1) NOT NULL,
		[ManageRoleID] [INT] NOT NULL,
		[VariantID] [INT] NOT NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_ProductVariantRole] PRIMARY KEY CLUSTERED
		(
			[ID] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ProductVisibilityRole') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_ProductVisibilityRole
	(
		[ID] [INT] IDENTITY(1,1) NOT NULL,
		[ProductID] [INT] NOT NULL,
		[RoleID] [INT] NOT NULL,
		[Action] [VARCHAR](16) NULL,
		[Message] [NVARCHAR](512) NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_ProductVisibilityRole] PRIMARY KEY CLUSTERED
		(
			[ID] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_RelatedProducts') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_RelatedProducts
	(
		[ID] [INT] IDENTITY(1,1) NOT NULL,
		[ProductID] [INT] NULL,
		[RelatedProductID] [INT] NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_RelatedProducts] PRIMARY KEY CLUSTERED
		(
			[ID] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_SavedCart') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_SavedCart
	(
		[CartID] [INT] IDENTITY(1,1) NOT NULL,
		[Description] [VARCHAR](150) NULL,
		[DNNLogin] [VARCHAR](50) NULL,
		[CreateDate] [DATETIME] NULL,
		[ShippingTotal] [MONEY] NULL,
		[HandlingCharge] [MONEY] NULL,
		[TaxTotal] [MONEY] NULL,
		[Discount] [MONEY] NULL,
		[StoreID] [INT] NULL,
		[PortalID] [INT] NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_SavedCart] PRIMARY KEY CLUSTERED
		(
			[CartID] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_SavedCartDetail') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_SavedCartDetail
	(
		[CartDetailID] [INT] IDENTITY(1,1) NOT NULL,
		[CartID] [INT] NOT NULL,
		[ProductID] [INT] NOT NULL,
		[Manufacturer] [VARCHAR](50) NULL,
		[ModelName] [NVARCHAR](255) NULL,
		[UnitCost] [MONEY] NULL,
		[QuantityOnHand] [INT] NULL,
		[Quantity] [INT] NULL,
		[Weight] [DECIMAL](18, 0) NULL,
		[ProductName] [VARCHAR](255) NULL,
		[ProductSku] [VARCHAR](50) NULL,
		[IsRequired] [BIT] NULL,
		[BundleID] [INT] NULL,
		[AddDnnRole] [VARCHAR](50) NULL,
		[Recurring] [BIT] NULL,
		[RequireLogin] [BIT] NULL,
		[UsePriPriceWght] [BIT] NULL,
		[MasterBundleID] [INT] NULL,
		[LineItem] [INT] NULL,
		[RoleExpireDays] [VARCHAR](50) NULL,
		[MemberPrice] [MONEY] NULL,
		[TaxExempt] [BIT] NULL,
		[ShipCodes] [VARCHAR](100) NULL,
		[ShipText] [NVARCHAR](500) NULL,
		[ShipCost] [MONEY] NULL,
		[PriceClass] [VARCHAR](20) NULL,
		[VariantCost] [MONEY] NULL,
		[RemoveDNNRole] [VARCHAR](70) NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_SavedCartDetail] PRIMARY KEY CLUSTERED
		(
			[CartDetailID] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_SavedCartDetailVariant') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_SavedCartDetailVariant
	(
		[DetailVariantID] [INT] IDENTITY(1,1) NOT NULL,
		[CartDetailID] [INT] NOT NULL,
		[VariantGroupID] [INT] NULL,
		[VariantGroup] [VARCHAR](50) NULL,
		[VariantID] [INT] NULL,
		[VariantName] [VARCHAR](50) NULL,
		[VariantHasText] [BIT] NULL,
		[VariantText] [VARCHAR](200) NULL,
		[PriceCalculated] [MONEY] NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_Saved_Cart_Detail_Variant] PRIMARY KEY CLUSTERED
		(
			[DetailVariantID] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_SavedSearches') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_SavedSearches
	(
		[SavedSearchID] [INT] IDENTITY(1,1) NOT NULL,
		[UserID] [INT] NULL,
		[Type] [NVARCHAR](200) NULL,
		[Name] [NVARCHAR](200) NULL,
		[Value] [NVARCHAR](MAX) NULL,
		[IsJson] [BIT] NULL,
		[DateCreated] [DATETIME] NULL,
		[DateModified] [DATETIME] NULL,
		[PortalID] [INT] NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_SavedSearches] PRIMARY KEY CLUSTERED
		(
			[SavedSearchID] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_SearchKeys') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_SearchKeys
	(
		[iIndex] [INT] IDENTITY(1,1) NOT NULL,
		[ProductID] [INT] NULL,
		[SearchTerm] [NVARCHAR](250) NULL,
		[SearchModuleDD1] [NVARCHAR](500) NULL,
		[SearchModuleDD2] [NVARCHAR](500) NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_SearchKeys] PRIMARY KEY CLUSTERED
		(
			[iIndex] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_SessionState') AND type IN (N'U'))
BEGIN
	DROP TABLE {databaseOwner}{objectQualifier}RZC_SessionState
END
GO
CREATE TABLE {databaseOwner}{objectQualifier}RZC_SessionState
(
	[ID] [INT] IDENTITY(1,1) NOT NULL,
	[ClientGUID] [UNIQUEIDENTIFIER] NOT NULL,
	[UserID] [INT] NULL,
	[SessionTitle] [NVARCHAR](150) NULL,
	[SessionData] [NVARCHAR](MAX) NULL,
	[CreatedDate] [DATETIME] NULL,
	[ModifiedDate] [DATETIME] NULL,
	[StoreID] [INT] NULL,
	[PortalID] [INT] NULL,
	CONSTRAINT [PK_{objectQualifier}RZC_Session_State] PRIMARY KEY CLUSTERED
	(
		[ID] ASC
	),
	CONSTRAINT [IX_{objectQualifier}RZC_Session_State_Unique] UNIQUE NONCLUSTERED
	(
		[ClientGUID] ASC,
		[UserID] ASC,
		[SessionTitle] ASC,
		[PortalID] ASC,
		[StoreID] ASC
	)
)
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ShipCategories') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_ShipCategories
	(
		[CategoryID] [INT] NOT NULL,
		[StoreID] [INT] NULL,
		[PortalID] [INT] NOT NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_ShipCategories] PRIMARY KEY CLUSTERED
		(
			[CategoryID] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ShipFree') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_ShipFree
	(
		[ID] [INT] IDENTITY(1,1) NOT NULL,
		[ZipCode] [NVARCHAR](50) NULL,
		[ShipMethodID] [INT] NULL,
		[CategoryID] [INT] NULL,
		[Country] [VARCHAR](50) NULL,
		[StoreID] [INT] NULL,
		[PortalID] [INT] NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_ShipFree] PRIMARY KEY CLUSTERED
		(
			[ID] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ShipMethods') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_ShipMethods
	(
		[ShipMethodID] [INT] IDENTITY(1,1) NOT NULL,
		[ShipMethodName] [VARCHAR](50) NULL,
		[ShipMethodAmount] [DECIMAL](18, 2) NULL,
		[Share] [BIT] NULL,
		[SortOrder] [INT] NULL,
		[SurchargePercentage] [DECIMAL](18, 2) NULL,
		[SurchargeAmount] [DECIMAL](18, 2) NULL,
		[RoleID] [INT] NULL,
		[StoreID] [INT] NULL,
		[PortalID] [INT] NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_ShipMethods] PRIMARY KEY CLUSTERED
		(
			[ShipMethodID] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ShippingByAmount') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_ShippingByAmount
	(
		[ShipCostID] [INT] IDENTITY(1,1) NOT NULL,
		[AmountFrom] [DECIMAL](18, 2) NULL,
		[AmountTo] [DECIMAL](18, 2) NULL,
		[Price] [MONEY] NULL,
		[ShipMethodID] [INT] NULL,
		[CategoryID] [INT] NULL,
		[IsIntl] [BIT] NULL,
		[StoreID] [INT] NULL,
		[PortalID] [INT] NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_ShippingByAmount] PRIMARY KEY CLUSTERED
		(
			[ShipCostID] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ShippingByQuantity') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_ShippingByQuantity
	(
		[ShipCostID] [INT] IDENTITY(1,1) NOT NULL,
		[QuantityFrom] [INT] NULL,
		[QuantityTo] [INT] NULL,
		[Price] [MONEY] NULL,
		[ShipMethodID] [INT] NULL,
		[CategoryID] [INT] NULL,
		[ZoneID] [INT] NULL,
		[ZoneName] [VARCHAR](200) NULL,
		[StoreID] [INT] NULL,
		[PortalID] [INT] NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_ShippingByQuantity] PRIMARY KEY CLUSTERED
		(
			[ShipCostID] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ShippingByWeight') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_ShippingByWeight
	(
		[ShipCostID] [INT] IDENTITY(1,1) NOT NULL,
		[WeightFrom] [DECIMAL](18, 2) NULL,
		[WeightTo] [DECIMAL](18, 2) NULL,
		[Price] [MONEY] NULL,
		[ShipMethodID] [INT] NULL,
		[CategoryID] [INT] NULL,
		[ZoneID] [INT] NULL,
		[ZoneName] [VARCHAR](200) NULL,
		[StoreID] [INT] NULL,
		[PortalID] [INT] NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_ShippingByWeight] PRIMARY KEY CLUSTERED
		(
			[ShipCostID] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ShippingByZipCode') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_ShippingByZipCode
	(
		[ShipCostID] [INT] IDENTITY(1,1) NOT NULL,
		[ZipCode] [VARCHAR](50) NULL,
		[Price] [MONEY] NULL,
		[ShipMethodID] [INT] NULL,
		[CategoryID] [INT] NULL,
		[Country] [VARCHAR](50) NULL,
		[StoreID] [INT] NULL,
		[PortalID] [INT] NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_ShippingByZipCode] PRIMARY KEY CLUSTERED
		(
			[ShipCostID] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ShipZone') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_ShipZone
	(
		[ZoneID] [INT] IDENTITY(1,1) NOT NULL,
		[ZoneName] [NVARCHAR](512) NOT NULL,
		[Country] [VARCHAR](1024) NULL,
		[State] [VARCHAR](MAX) NULL,
		[Codes] [NVARCHAR](MAX) NULL,
		[Price] [DECIMAL](18, 2) NULL,
		[FreeShipOverAmount] [DECIMAL](18, 2) NULL,
		[StoreID] [INT] NULL,
		[PortalID] [INT] NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_ShipZone] PRIMARY KEY CLUSTERED
		(
			[ZoneID] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ShoppingCart') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_ShoppingCart
	(
		[CartID] [INT] IDENTITY(1,1) NOT NULL,
		[ProductID] [INT] NOT NULL,
		[ProductName] [NVARCHAR](255) NULL,
		[ProductSku] [VARCHAR](50) NULL,
		[Quantity] [DECIMAL](10, 2) NULL,
		[UnitCost] [MONEY] NULL,
		[CartCookie] [VARCHAR](50) NULL,
		[IsRequired] [BIT] NULL,
		[PriceClass] [VARCHAR](20) NULL,
		[VariantCost] [DECIMAL](10, 2) NULL,
		[ImageName] [NVARCHAR](200) NULL,
		[BundleID] [INT] NULL,
		[DNNLogin] [NVARCHAR](150) NULL,
		[Email] [NVARCHAR](256) NULL,
		[Weight] [DECIMAL](12, 2) NULL,
		[OtherCartFields] [NVARCHAR](MAX) NULL,
		[CreateDate] [DATETIME] NULL,
		[StoreID] [INT] NULL,
		[PortalID] [INT] NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_ShoppingCart] PRIMARY KEY CLUSTERED
		(
			[CartID] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ShoppingCartVariant') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_ShoppingCartVariant
	(
		[CartVariantID] [INT] IDENTITY(1,1) NOT NULL,
		[CartID] [INT] NOT NULL,
		[VariantGroupID] [INT] NULL,
		[VariantGroup] [VARCHAR](50) NULL,
		[VariantID] [INT] NULL,
		[VariantName] [VARCHAR](50) NULL,
		[VariantHasText] [BIT] NULL,
		[VariantText] [VARCHAR](200) NULL,
		[PriceCalculated] [MONEY] NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_Shopping_Cart_Variant] PRIMARY KEY CLUSTERED
		(
			[CartVariantID] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_StoreConfig') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_StoreConfig
	(
		[ConfigID] [INT] IDENTITY(1,1) NOT NULL,
		[ConfigName] [NVARCHAR](100) NOT NULL,
		[ConfigValue] [NVARCHAR](MAX) NULL,
		[ModifiedBy] [NVARCHAR](150) NULL,
		[ModifiedDate] [DATETIME] NULL,
		[StoreID] [INT] NOT NULL,
		[PortalID] [INT] NULL
		CONSTRAINT [PK_{objectQualifier}RZC_Store_Config] PRIMARY KEY CLUSTERED
		(
			[ConfigID] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_StoreOrderDetails') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_StoreOrderDetails
	(
		[OrderDetailID] [INT] IDENTITY(1,1) NOT NULL,
		[OrderID] [INT] NOT NULL,
		[ProductID] [INT] NOT NULL,
		[Quantity] [DECIMAL](10, 2) NOT NULL,
		[UnitCost] [MONEY] NOT NULL,
		[ProductName] [NVARCHAR](1000) NULL,
		[ProductSKU] [VARCHAR](50) NULL,
		[Shipped] [BIT] NULL,
		[Returned] [BIT] NULL,
		[DateUpdated] [DATETIME] NULL,
		[OrderDetailGUID] [UNIQUEIDENTIFIER] NULL,
		[SerialNumber] [VARCHAR](70) NULL,
		[WebServiceData] [VARCHAR](255) NULL,
		[VendorID] [INT] NULL,
		[TaxRate] [FLOAT] NULL,
		[Commission] [MONEY] NULL,
		[StatusID] [INT] NULL,
		[QtyShipped] [DECIMAL](10, 2) NULL,
		[Weight] [DECIMAL](12, 2) NULL,
		[CartAddDate] [DATETIME] NULL,
		[OtherDetailFields] [NVARCHAR](MAX) NULL,
		[PortalID] [INT] NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_StoreOrderDetails] PRIMARY KEY CLUSTERED
		(
			[OrderDetailID] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_StoreOrderDetailVariant') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_StoreOrderDetailVariant
	(
		[DetailVariantID] [INT] IDENTITY(1,1) NOT NULL,
		[OrderDetailID] [INT] NOT NULL,
		[VariantGroupID] [INT] NULL,
		[VariantGroup] [VARCHAR](50) NULL,
		[VariantID] [INT] NULL,
		[VariantName] [VARCHAR](50) NULL,
		[VariantHasText] [BIT] NULL,
		[VariantText] [VARCHAR](200) NULL,
		[PriceCalculated] [MONEY] NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_Order_Detail_Variant] PRIMARY KEY CLUSTERED
		(
			[DetailVariantID] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_StoreOrders') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_StoreOrders
	(
		[OrderID] [INT] IDENTITY(1,1) NOT NULL,
		[CustomerID] [INT] NOT NULL,
		[OrderDate] [DATETIME] NOT NULL,
		[DNNUserID] [INT] NULL,
		[Status] [VARCHAR](20) NULL,
		[ShipFirstName] [NVARCHAR](50) NULL,
		[ShipLastName] [NVARCHAR](50) NULL,
		[ShipAddress1] [VARCHAR](200) NULL,
		[ShipAddress2] [VARCHAR](200) NULL,
		[ShipCity] [VARCHAR](60) NULL,
		[ShipState] [VARCHAR](60) NULL,
		[ShipZipcode] [VARCHAR](25) NULL,
		[ShipCountry] [VARCHAR](50) NULL,
		[SpecialInstructions] [NVARCHAR](500) NULL,
		[CouponID] [INT] NULL,
		[MemberRole] [NVARCHAR](50) NULL,
		[SubTotal] [MONEY] NULL,
		[ShippingTotal] [MONEY] NULL,
		[HandlingCharge] [MONEY] NULL,
		[Discount] [MONEY] NULL,
		[MemberDiscount] [MONEY] NULL,
		[TaxTotal] [MONEY] NULL,
		[Surcharge] [MONEY] NULL,
		[GrandTotal] [MONEY] NULL,
		[RecalcTax] [BIT] NULL,
		[RecalcShipping] [BIT] NULL,
		[ShipMethod] [NVARCHAR](50) NULL,
		[ShipDate] [DATETIME] NULL,
		[ShipCarrier] [NVARCHAR](50) NULL,
		[TrackingNumber] [VARCHAR](50) NULL,
		[ResidentialStatus] [VARCHAR](100) NULL,
		[DNNProfileField] [NVARCHAR](150) NULL,
		[IPAddress] [VARCHAR](50) NULL,
		[AffiliateID] [VARCHAR](20) NULL,
		[AuctionID] [INT] NULL,
		[DeletedFlag] [BIT] NOT NULL,
		[UDF1] [VARCHAR](50) NULL,
		[UDF2] [VARCHAR](50) NULL,
		[UDDate1] [DATETIME] NULL,
		[UDDate2] [DATETIME] NULL,
		[UDDropDown] [VARCHAR](50) NULL,
		[UDDate] [DATETIME] NULL,
		[PDTextbox] [VARCHAR](50) NULL,
		[ModifiedBy] [NVARCHAR](100) NULL,
		[DateModified] [DATETIME] NULL,
		[StoreID] [INT] NULL,
		[PortalID] [INT] NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_StoreOrders] PRIMARY KEY CLUSTERED
		(
			[OrderID] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_StorePermissions') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_StorePermissions
	(
		[ID] [INT] IDENTITY(1,1) NOT NULL,
		[RoleID] [INT] NOT NULL,
		[Access] [NVARCHAR](64) NULL,
		[Section] [NVARCHAR](64) NULL,
		[CreatedBy] [INT] NULL,
		[DateCreated] [DATETIME] NULL,
		[ModifiedBy] [INT] NULL,
		[DateModified] [DATETIME] NULL,
		[StoreID] [INT] NULL,
		[PortalID] [INT] NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_StorePermissions] PRIMARY KEY CLUSTERED
		(
			[ID] ASC
		)
	)
END
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_Stores') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_Stores
	(
		[StoreID] [INT] IDENTITY(1,1) NOT NULL,
		[StoreName] [NVARCHAR](150) NOT NULL,
		[CreatedDate] [DATETIME] NULL,
		[CreatedBy] [NVARCHAR](150) NULL,
		[PortalID] [INT] NULL
		CONSTRAINT [PK_{objectQualifier}RZC_Stores] PRIMARY KEY CLUSTERED
		(
			[StoreID] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_SubscriptionSC') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_SubscriptionSC
	(
		[SubscriptionID] [INT] IDENTITY(1,1) NOT NULL,
		[CustomerID] [INT] NULL,
		[ProductID] [INT] NULL,
		[CreateDate] [DATETIME] NULL,
		[CancelDate] [DATETIME] NULL,
		[SubStartDate] [DATETIME] NULL,
		[SubEndDate] [DATETIME] NULL,
		[TransID] [VARCHAR](50) NULL,
		[IPAddress] [VARCHAR](50) NULL,
		[OrderID] [INT] NULL,
		[Amount] [money] NULL,
		[Interval] [NVARCHAR](50) NULL,
		[Occurrences] [INT] NULL,
		[BillingName] [NVARCHAR](50) NULL,
		[BillingAddress] [NVARCHAR](50) NULL,
		[BillingCity] [NVARCHAR](50) NULL,
		[BillingState] [NVARCHAR](50) NULL,
		[BillingCountry] [NVARCHAR](50) NULL,
		[BillingZip] [NVARCHAR](50) NULL,
		[AcctNo] [VARCHAR](64) NULL,
		[MaskAcctNo] [VARCHAR](50) NULL,
		[ExpRoute] [VARCHAR](50) NULL,
		[Status] [NVARCHAR](50) NULL,
		[Suspend] [SMALLINT] NULL,
		[NextPaymentDate] [DATE] NULL,
		[PayMethodID] [INT] NULL,
		[PayType] [VARCHAR](50) NULL,
		[OrderDetailID] [INT] NULL,
		[CreatedBy] [NVARCHAR](100) NULL,
		[ModifiedBy] [NVARCHAR](100) NULL,
		[DateModified] [DATETIME] NULL,
		[StoreID] [INT] NULL,
		[PortalID] [INT] NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_SubscriptionSC] PRIMARY KEY CLUSTERED
		(
			[SubscriptionID] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_Tax') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_Tax
	(
		[TaxID] [INT] IDENTITY(1,1) NOT NULL,
		[State] [VARCHAR](50) NULL,
		[County] [VARCHAR](50) NULL,
		[City] [VARCHAR](255) NULL,
		[TaxRate] [FLOAT] NOT NULL,
		[PostalCode] [VARCHAR](50) NULL,
		[StoreID] [INT] NULL,
		[PortalID] [INT] NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_Tax] PRIMARY KEY CLUSTERED
		(
			[TaxID] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_TaxStates') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_TaxStates
	(
		[TaxStateID] [INT] IDENTITY(1,1) NOT NULL,
		[StateText] [VARCHAR](200) NULL,
		[State] [VARCHAR](50) NULL,
		[CountryCode] [VARCHAR](50) NULL,
		[ZipCode] [VARCHAR](50) NULL,
		[TaxExemptAmount] [DECIMAL](18, 2) NULL,
		[StoreID] [INT] NULL,
		[PortalID] [INT] NOT NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_TaxStates] PRIMARY KEY CLUSTERED
		(
			[TaxStateID] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_VariantConditionalGroup') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_VariantConditionalGroup
	(
		[ID] [INT] IDENTITY(1,1) NOT NULL,
		[VariantID] [INT] NOT NULL,
		[VariantGroupID] [INT] NOT NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_VariantConditionalGroup] PRIMARY KEY CLUSTERED
		(
			[ID] ASC
		)
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_VendorBooking') AND type IN (N'U'))
BEGIN
	CREATE TABLE {databaseOwner}{objectQualifier}RZC_VendorBooking
	(
		[ID] [INT] IDENTITY(1,1) NOT NULL,
		[VendorProductID] [INT] NULL,
		[OrderDetailID] [INT] NULL,
		[CustomerID] [INT] NULL,
		[StartDate] [DATETIME] NULL,
		[EndDate] [DATETIME] NULL,
		[BookQtyReserved] [INT] NULL,
		[BookQtyPurchased] [INT] NULL,
		[AllDay] [BIT] NULL,
		[IsConfirmed] [BIT] NULL,
		[PortalID] [INT] NULL,
		CONSTRAINT [PK_{objectQualifier}RZC_VendorBooking] PRIMARY KEY CLUSTERED
		(
			[ID] ASC
		)
	)
END
GO



/************************************************************/
/*****                 Alter Tables                     *****/
/************************************************************/



/************************************************************/
/*****               Create Table Types                 *****/
/************************************************************/
IF NOT EXISTS (SELECT * FROM sys.types WHERE user_type_id = TYPE_ID(N'{databaseOwner}{objectQualifier}RCStoreConfig'))
BEGIN
	CREATE TYPE {databaseOwner}{objectQualifier}RCStoreConfig AS TABLE
	(
		[StoreID] [INT] NOT NULL,
		[ConfigName] [NVARCHAR](100) NOT NULL,
		[ConfigValue] [NVARCHAR](MAX) NULL,
		[ModifiedBy] [NVARCHAR](150) NULL,
		[ModifiedDate] [DATETIME] NULL,
		[PortalID] [INT] NULL
	)
END
GO



/************************************************************/
/*****              Drop Functions                      *****/
/************************************************************/
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_FxSplit') AND type IN (N'FN', N'TF'))
    DROP FUNCTION {databaseOwner}{objectQualifier}RZC_FxSplit
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_FxGetCatIDsBySEOUrlList') AND type IN (N'FN', N'TF'))
    DROP FUNCTION {databaseOwner}{objectQualifier}RZC_FxGetCatIDsBySEOUrlList
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_FxGetProductTopLevelCategory') AND type IN (N'FN', N'TF'))
    DROP FUNCTION {databaseOwner}{objectQualifier}RZC_FxGetProductTopLevelCategory
GO



/************************************************************/
/*****              Create Functions                    *****/
/************************************************************/
CREATE FUNCTION {databaseOwner}{objectQualifier}RZC_FxSplit
(
    @String nvarchar(4000),
    @Delimiter nvarchar(10)
)
RETURNS @table TABLE
(
    [Value] NVARCHAR(4000)
)
BEGIN
    DECLARE @NextString NVARCHAR(4000)
    DECLARE @Pos INT, @NextPos INT
    SET @NextString = ''
    SET @String = @String + @Delimiter
    SET @Pos = CHARINDEX(@Delimiter, @String)
    SET @NextPos = 1
    WHILE (@Pos <> 0)
    BEGIN
        SET @NextString = SUBSTRING(@String, 1, @Pos - 1)
        INSERT INTO @table
			([Value])
        SELECT
			(@NextString)
		WHERE
			NULLIF(@NextString, '') IS NOT NULL
        SET @String = SUBSTRING(@String, @Pos + LEN(@Delimiter), LEN(@String))
        SET @NextPos = @Pos
        SET @Pos = CHARINDEX(@Delimiter, @String)
    END
    RETURN
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE FUNCTION {databaseOwner}{objectQualifier}RZC_FxGetCatIDsBySEOUrlList
(
	@CatSEOUrlList NVARCHAR(MAX) = NULL,
	@StoreID INT = NULL,
	@PortalID INT = NULL
)
RETURNS VARCHAR(MAX)
AS
BEGIN
	DECLARE @CatIdList VARCHAR(MAX) = ''
	DECLARE @CatSEOUrlTbl1 TABLE ([ID] INT IDENTITY, [CatList] NVARCHAR(MAX))
	DECLARE @CatSEOUrlTbl2 TABLE ([SEOList] NVARCHAR(MAX))
	IF NULLIF(@CatSEOUrlList, '') IS NOT NULL
		INSERT INTO
			@CatSEOUrlTbl1
		SELECT
			[Value]
		FROM
			{databaseOwner}{objectQualifier}RZC_FxSplit(@CatSEOUrlList, '|')
		DECLARE @CurrentRow INT = 1
		WHILE @CurrentRow <= (SELECT COUNT([CatList]) FROM @CatSEOUrlTbl1)
		BEGIN
			DELETE FROM
				@CatSEOUrlTbl2
			INSERT INTO
				@CatSEOUrlTbl2
			SELECT
				[Value]
			FROM
				{databaseOwner}{objectQualifier}RZC_FxSplit((SELECT [CatList] FROM @CatSEOUrlTbl1 WHERE [ID] = @CurrentRow), '~')
			SET @CatIdList = (
				CASE WHEN 
					@CatIdList = '' THEN '' ELSE @CatIdList + '|' END) + (SELECT STUFF((SELECT ',' + CAST(C.[CategoryID] AS VARCHAR)
				FROM
					{databaseOwner}{objectQualifier}RZC_Category C
				WHERE
					C.[PortalID] = @PortalID
					AND (C.[StoreID] = @StoreID OR C.[Share] = 1)
					AND C.[CatSEOURL] IN (SELECT [SEOList] FROM @CatSEOUrlTbl2)
					OR CAST(C.[CategoryID] AS VARCHAR) IN (SELECT [SEOList] FROM @CatSEOUrlTbl2)
				FOR XML PATH('')), 1, 1, '')
			)
			SET @CurrentRow = @CurrentRow + 1
		END
	RETURN @CatIdList
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE FUNCTION {databaseOwner}{objectQualifier}RZC_FxGetProductTopLevelCategory
(
    @ProductID INT
)
RETURNS @Table TABLE
(
	[CategoryID] INT,
    [CategoryName] VARCHAR(50),
	[ParentID] INT,
	[Level] INT
)
BEGIN
    ;WITH [CategoryPage] AS
	(
		SELECT
			C1.[CategoryID], C1.[CategoryName], C1.[ParentID], 0 AS [Level]
		FROM
			{databaseOwner}{objectQualifier}RZC_Category C1
		INNER JOIN
			{databaseOwner}{objectQualifier}RZC_CategoryProduct CP
		ON
			CP.[CategoryID] = C1.[CategoryID]
		WHERE
			CP.[ProductID] = @ProductID
		UNION ALL
		SELECT
			C2.[CategoryID], C2.[CategoryName], C2.[ParentID], [Level] + 1 AS [Level]
		FROM
			{databaseOwner}{objectQualifier}RZC_Category C2
		INNER JOIN
			[CategoryPage] CTE
		ON
			C2.[CategoryID] = CTE.[ParentID]
	)
	INSERT INTO
		@Table
	SELECT TOP 1
		CTE.*
	FROM
		[CategoryPage] CTE
	ORDER BY
		CTE.[Level] DESC
	RETURN
END
GO



/************************************************************/
/*****                Drop Sprocs                       *****/
/************************************************************/
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ClearBundleProducts') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ClearBundleProducts
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ClearCouponProducts') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ClearCouponProducts
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ClearFulfillmentDetails') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ClearFulfillmentDetails
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ClearOrderDetailVariants') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ClearOrderDetailVariants
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ClearProductCategories') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ClearProductCategories
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ClearProductDownloadHistory') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ClearProductDownloadHistory
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ClearProductInventoryVariants') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ClearProductInventoryVariants
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ClearProductPurchaseDownloadHistory') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ClearProductPurchaseDownloadHistory
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ClearProductVariantRoles') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ClearProductVariantRoles
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ClearProductVisibilityRoles') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ClearProductVisibilityRoles
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ClearRelatedProducts') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ClearRelatedProducts
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ClearShippingCategories') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ClearShippingCategories
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ClearShoppingCartByUser') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ClearShoppingCartByUser
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ClearStoreConfig') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ClearStoreConfig
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ClearTaxTable') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ClearTaxTable
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ClearVariantConditionalGroups') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ClearVariantConditionalGroups
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ConfirmBookingHistory') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ConfirmBookingHistory
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_CreateAnalyticsEvent') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateAnalyticsEvent
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_CreateBookableProductDisabledDate') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateBookableProductDisabledDate
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_CreateBookableProductDisabledTime') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateBookableProductDisabledTime
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_CreateBookingHistory') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateBookingHistory
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_CreateBundleProduct') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateBundleProduct
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_CreateCategory') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateCategory
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_CreateCategoryQuantityDiscount') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateCategoryQuantityDiscount
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_CreateClientCredential') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateClientCredential
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_CreateCoupon') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateCoupon
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_CreateCouponProduct') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateCouponProduct
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_CreateCouponProductVariant') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateCouponProductVariant
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_CreateCustomer') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateCustomer
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_CreateCustomerWalletItem') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateCustomerWalletItem
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_CreateCustomShipMethod') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateCustomShipMethod
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_CreateEmailCampaign') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateEmailCampaign
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_CreateEmailTemplate') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateEmailTemplate
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_CreateFreeShipping') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateFreeShipping
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_CreateFulfillmentDetail') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateFulfillmentDetail
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_CreateInvoiceTemplate') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateInvoiceTemplate
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_CreateLicenseKey') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateLicenseKey
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_CreateManufacturer') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateManufacturer
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_CreateOrder') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateOrder
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_CreateOrderDetail') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateOrderDetail
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_CreateOrderDetailVariant') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateOrderDetailVariant
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_CreateOrderDiscount') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateOrderDiscount
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_CreateOrderFulfillment') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateOrderFulfillment
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_CreateOrderNote') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateOrderNote
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_CreatePayment') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_CreatePayment
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_CreatePaymentImage') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_CreatePaymentImage
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_CreatePaymentMethod') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_CreatePaymentMethod
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_CreatePriceClass') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_CreatePriceClass
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_CreateProduct') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateProduct
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_CreateProductCategory') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateProductCategory
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_CreateProductCustomField') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateProductCustomField
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_CreateProductDownloadHistory') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateProductDownloadHistory
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_CreateProductII') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateProductII
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_CreateProductImage') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateProductImage
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_CreateProductInventory') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateProductInventory
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_CreateProductInventoryVariant') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateProductInventoryVariant
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_CreateProductQuantityDiscount') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateProductQuantityDiscount
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_CreateProductReview') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateProductReview
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_CreateProductRoleDiscount') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateProductRoleDiscount
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_CreateProductSearchKey') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateProductSearchKey
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_CreateProductTemplateField') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateProductTemplateField
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_CreateProductVariant') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateProductVariant
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_CreateProductVariantGroup') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateProductVariantGroup
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_CreateProductVariantRole') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateProductVariantRole
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_CreateProductVisibilityRole') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateProductVisibilityRole
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_CreateRegionalTax') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateRegionalTax
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_CreateRelatedProduct') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateRelatedProduct
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_CreateSavedSearch') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateSavedSearch
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_CreateSessionState') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateSessionState
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_CreateShippingAmountCost') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateShippingAmountCost
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_CreateShippingCategory') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateShippingCategory
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_CreateShippingPostalCost') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateShippingPostalCost
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_CreateShippingQuantityCost') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateShippingQuantityCost
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_CreateShippingWeightCost') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateShippingWeightCost
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_CreateShippingZone') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateShippingZone
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_CreateShoppingCartItem') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateShoppingCartItem
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_CreateShoppingCartVariant') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateShoppingCartVariant
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_CreateStore') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateStore
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_CreateStorePermission') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateStorePermission
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_CreateSubscription') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateSubscription
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_CreateTaxTableEntry') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateTaxTableEntry
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_CreateVariantConditionalGroup') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateVariantConditionalGroup
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_DeleteBookableProductDisabledDate') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteBookableProductDisabledDate
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_DeleteBookableProductDisabledTime') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteBookableProductDisabledTime
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_DeleteCategory') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteCategory
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_DeleteCategoryQuantityDiscount') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteCategoryQuantityDiscount
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_DeleteClientCredential') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteClientCredential
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_DeleteCoupon') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteCoupon
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_DeleteCouponProductVariant') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteCouponProductVariant
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_DeleteCustomer') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteCustomer
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_DeleteCustomerWalletItem') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteCustomerWalletItem
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_DeleteCustomShipMethod') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteCustomShipMethod
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_DeleteEmailCampaign') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteEmailCampaign
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_DeleteEmailTemplate') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteEmailTemplate
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_DeleteFreeShipping') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteFreeShipping
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_DeleteFulfillmentDetail') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteFulfillmentDetail
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_DeleteInvoiceTemplate') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteInvoiceTemplate
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_DeleteLicenseKey') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteLicenseKey
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_DeleteManufacturer') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteManufacturer
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_DeleteOrder') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteOrder
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_DeleteOrderDetail') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteOrderDetail
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_DeleteOrderDiscount') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteOrderDiscount
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_DeleteOrderFulfillment') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteOrderFulfillment
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_DeleteOrderNote') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteOrderNote
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_DeletePayment') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_DeletePayment
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_DeletePaymentMethod') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_DeletePaymentMethod
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_DeletePriceClass') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_DeletePriceClass
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_DeleteProduct') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteProduct
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_DeleteProductCategory') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteProductCategory
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_DeleteProductCustomField') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteProductCustomField
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_DeleteProductII') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteProductII
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_DeleteProductImage') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteProductImage
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_DeleteProductInventory') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteProductInventory
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_DeleteProductManageRole') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteProductManageRole
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_DeleteProductQuantityDiscount') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteProductQuantityDiscount
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_DeleteProductReview') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteProductReview
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_DeleteProductRoleDiscount') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteProductRoleDiscount
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_DeleteProductSearchKey') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteProductSearchKey
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_DeleteProductTemplateField') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteProductTemplateField
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_DeleteProductVariant') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteProductVariant
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_DeleteProductVariantGroup') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteProductVariantGroup
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_DeleteRegionalTax') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteRegionalTax
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_DeleteSavedShoppingCart') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteSavedShoppingCart
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_DeleteShippingAmountCost') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteShippingAmountCost
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_DeleteShippingCategory') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteShippingCategory
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_DeleteShippingPostalCost') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteShippingPostalCost
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_DeleteShippingQuantityCost') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteShippingQuantityCost
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_DeleteShippingWeightCost') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteShippingWeightCost
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_DeleteShippingZone') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteShippingZone
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_DeleteShoppingCartItem') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteShoppingCartItem
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_DeleteStore') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteStore
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_DeleteStorePermission') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteStorePermission
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_DeleteSubscription') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteSubscription
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_DeleteUserSavedSearch') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteUserSavedSearch
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_DestroySessionState') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_DestroySessionState
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetAbandonedCartRevenueStatistics') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetAbandonedCartRevenueStatistics
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetAbandonedCartSummary') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetAbandonedCartSummary
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetBookingHistoryByDetailID') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetBookingHistoryByDetailID
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetBookingHistoryByID') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetBookingHistoryByID
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetCategoryByID') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetCategoryByID
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetCategoryByName') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetCategoryByName
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetCategoryBySEO') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetCategoryBySEO
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetCategoryQuantityDiscountByID') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetCategoryQuantityDiscountByID
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetCatIDsBySEOUrlList') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetCatIDsBySEOUrlList
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetClientCredentialByID') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetClientCredentialByID
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetClientCredentialByKey') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetClientCredentialByKey
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetCouponByCode') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetCouponByCode
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetCouponByID') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetCouponByID
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetCustomerByID') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetCustomerByID
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetCustomerByOrderID') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetCustomerByOrderID
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetCustomerByUser') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetCustomerByUser
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetCustomerWalletItemByID') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetCustomerWalletItemByID
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetCustomShipMethodByID') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetCustomShipMethodByID
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetEmailCampaignByID') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetEmailCampaignByID
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetEmailTemplateByID') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetEmailTemplateByID
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetEmailTemplateByName') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetEmailTemplateByName
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetFreeShippingByID') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetFreeShippingByID
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetInvoiceTemplateByID') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetInvoiceTemplateByID
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetInvoiceTemplateByName') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetInvoiceTemplateByName
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetManufacturerByID') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetManufacturerByID
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetOrderByID') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetOrderByID
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetOrderDetailByGuid') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetOrderDetailByGuid
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetOrderDetailByID') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetOrderDetailByID
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetOrderDiscountByID') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetOrderDiscountByID
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetOrderFulfillmentByID') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetOrderFulfillmentByID
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetOrderNoteByID') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetOrderNoteByID
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetOrdersRevenueStatistics') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetOrdersRevenueStatistics
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetOrdersRevenueSummary') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetOrdersRevenueSummary
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetOrdersStateSummary') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetOrdersStateSummary
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetPaymentByID') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetPaymentByID
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetPaymentByOrderID') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetPaymentByOrderID
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetPaymentImageByID') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetPaymentImageByID
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetPaymentMethodByID') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetPaymentMethodByID
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetPaymentMethodByType') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetPaymentMethodByType
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetPriceClassByID') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetPriceClassByID
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetProdCountByPriceRange') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetProdCountByPriceRange
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetProductByID') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetProductByID
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetProductBySEO') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetProductBySEO
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetProductBySKU') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetProductBySKU
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetProductCustomFieldByID') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetProductCustomFieldByID
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetProductCustomFieldByLabel') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetProductCustomFieldByLabel
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetProductII') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetProductII
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetProductInventoryByID') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetProductInventoryByID
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetProductLocalization') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetProductLocalization
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetProductQuantityDiscountByID') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetProductQuantityDiscountByID
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetProductReviewByID') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetProductReviewByID
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetProductRoleDiscountByID') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetProductRoleDiscountByID
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetProductSearchKeyByID') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetProductSearchKeyByID
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetProductTemplateFieldByID') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetProductTemplateFieldByID
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetProductVariantByID') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetProductVariantByID
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetProductVariantGroupByID') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetProductVariantGroupByID
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetRegionalTaxByID') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetRegionalTaxByID
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetSavedSearchByID') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetSavedSearchByID
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetSessionState') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetSessionState
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetShippingAmountCostByID') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetShippingAmountCostByID
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetShippingByOrderAmount') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetShippingByOrderAmount
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetShippingByWeight') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetShippingByWeight
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetShippingPostalCostByID') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetShippingPostalCostByID
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetShippingQuantityCostByID') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetShippingQuantityCostByID
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetShippingWeightCostByID') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetShippingWeightCostByID
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetShippingZoneByID') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetShippingZoneByID
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetStoreByID') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetStoreByID
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetStorePermissionByID') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetStorePermissionByID
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetSubscriptionByID') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetSubscriptionByID
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetSubscriptionByOrderID') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetSubscriptionByOrderID
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetTopProductsRevenue') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetTopProductsRevenue
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_GetTopStoreNotifications') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_GetTopStoreNotifications
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListAbandonedCartByFilter') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListAbandonedCartByFilter
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListAdvancedSearchProducts') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListAdvancedSearchProducts
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListAutoCompleteProducts') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListAutoCompleteProducts
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListBookableProductDisabledDates') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListBookableProductDisabledDates
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListBookableProductDisabledTimes') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListBookableProductDisabledTimes
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListBundleProducts') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListBundleProducts
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListCategories') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListCategories
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListCategoriesByFilter') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListCategoriesByFilter
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListCategoriesByPathOrder') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListCategoriesByPathOrder
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListCategoriesRevenueByFilter') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListCategoriesRevenueByFilter
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListCategoryDirectChilds') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListCategoryDirectChilds
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListCategoryMenu') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListCategoryMenu
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListCategoryQuantityDiscounts') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListCategoryQuantityDiscounts
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListClassDiscountsByName') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListClassDiscountsByName
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListClientCredentials') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListClientCredentials
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListCouponOrders') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListCouponOrders
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListCouponProducts') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListCouponProducts
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListCouponProductVariants') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListCouponProductVariants
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListCouponsByFilter') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListCouponsByFilter
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListCustomersByFilter') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListCustomersByFilter
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListCustomerWalletItems') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListCustomerWalletItems
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListCustomShipMethods') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListCustomShipMethods
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListCustomShippingByFixedAmount') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListCustomShippingByFixedAmount
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListCustomShippingByOrderAmount') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListCustomShippingByOrderAmount
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListCustomShippingByPostalCode') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListCustomShippingByPostalCode
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListCustomShippingByQuantity') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListCustomShippingByQuantity
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListCustomShippingByWeight') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListCustomShippingByWeight
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListCustomZoneShippingByQuantity') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListCustomZoneShippingByQuantity
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListCustomZoneShippingByWeight') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListCustomZoneShippingByWeight
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListDepartments') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListDepartments
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListEmailCampaigns') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListEmailCampaigns
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListEmailTemplates') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListEmailTemplates
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListExpiringCreditCardSubscriptions') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListExpiringCreditCardSubscriptions
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListExpiringSubscriptions') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListExpiringSubscriptions
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListFeaturedProducts') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListFeaturedProducts
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListFreeShippings') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListFreeShippings
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListFulfillmentDetails') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListFulfillmentDetails
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListInvoiceTemplates') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListInvoiceTemplates
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListLicenseKeys') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListLicenseKeys
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListManufacturers') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListManufacturers
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListOrderDetails') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListOrderDetails
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListOrderDetailsByFilter') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListOrderDetailsByFilter
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListOrderDetailVariants') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListOrderDetailVariants
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListOrderDiscounts') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListOrderDiscounts
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListOrderFulfillments') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListOrderFulfillments
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListOrderLevelDiscounts') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListOrderLevelDiscounts
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListOrderNotes') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListOrderNotes
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListOrdersByFilter') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListOrdersByFilter
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListPaymentMethods') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListPaymentMethods
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListPaymentsByFilter') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListPaymentsByFilter
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListPaymentsByOrderID') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListPaymentsByOrderID
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListPortalBookableProducts') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListPortalBookableProducts
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListPortalProducts') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListPortalProducts
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListPortalStoreProducts') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListPortalStoreProducts
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListPriceClasses') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListPriceClasses
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListProductBookingHistory') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListProductBookingHistory
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListProductCategories') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListProductCategories
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListProductCategoryDiscounts') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListProductCategoryDiscounts
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListProductCategoryTemplateFields') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListProductCategoryTemplateFields
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListProductCustomFields') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListProductCustomFields
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListProductDownloadHistory') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListProductDownloadHistory
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListProductGridCustomFields') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListProductGridCustomFields
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListProductGroupVariants') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListProductGroupVariants
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListProductImages') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListProductImages
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListProductInventory') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListProductInventory
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListProductInventoryVariants') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListProductInventoryVariants
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListProductManageRoles') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListProductManageRoles
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListProductPackages') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListProductPackages
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListProductPurchaseDownloadHistory') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListProductPurchaseDownloadHistory
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListProductQuantityDiscounts') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListProductQuantityDiscounts
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListProductReviews') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListProductReviews
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListProductRoleDiscounts') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListProductRoleDiscounts
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListProductsByFilter') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListProductsByFilter
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListProductsByPidList') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListProductsByPidList
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListProductSearchKeys') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListProductSearchKeys
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListProductStoreCategories') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListProductStoreCategories
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListProductTemplateFields') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListProductTemplateFields
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListProductTemplateFieldsByFilter') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListProductTemplateFieldsByFilter
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListProductVariantGroups') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListProductVariantGroups
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListProductVariantRole') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListProductVariantRole
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListProductVariants') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListProductVariants
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListProductVisibilityRoles') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListProductVisibilityRoles
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListRecommendedProducts') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListRecommendedProducts
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListRegionalTaxesByAddress') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListRegionalTaxesByAddress
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListRegionalTaxesByFilter') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListRegionalTaxesByFilter
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListRelatedProducts') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListRelatedProducts
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListSafetyStockByFilter') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListSafetyStockByFilter
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListSavedShoppingCartByUser') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListSavedShoppingCartByUser
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListSavedShoppingCartItems') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListSavedShoppingCartItems
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListSavedShoppingCartItemVariants') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListSavedShoppingCartItemVariants
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListShippingAmountCosts') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListShippingAmountCosts
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListShippingCategories') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListShippingCategories
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListShippingPostalCosts') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListShippingPostalCosts
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListShippingQuantityCosts') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListShippingQuantityCosts
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListShippingWeightCosts') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListShippingWeightCosts
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListShippingZones') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListShippingZones
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListShoppingCartByTimeLapse') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListShoppingCartByTimeLapse
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListShoppingCartByUser') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListShoppingCartByUser
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListShoppingCartVariants') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListShoppingCartVariants
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListStoreBookingHistory') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListStoreBookingHistory
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListStoreBookingHistoryByFilter') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListStoreBookingHistoryByFilter
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListStoreCoupons') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListStoreCoupons
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListStorePermissions') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListStorePermissions
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListStorePermissionsByRole') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListStorePermissionsByRole
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListStorePermissionsBySection') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListStorePermissionsBySection
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListStoreReviewsByFilter') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListStoreReviewsByFilter
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListStores') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListStores
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListSubscriptionsByFilter') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListSubscriptionsByFilter
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListSubscriptionsByOrderID') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListSubscriptionsByOrderID
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListTaxesByAddress') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListTaxesByAddress
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListTaxesByFilter') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListTaxesByFilter
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListTerminationSubscriptions') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListTerminationSubscriptions
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListTodaySubscriptions') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListTodaySubscriptions
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListUserOrders') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListUserOrders
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListUserOrdersByFilter') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListUserOrdersByFilter
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListUserProductOrders') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListUserProductOrders
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListUserSavedSearches') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListUserSavedSearches
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListVariantConditionalGroups') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListVariantConditionalGroups
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_ListVariantGroupConditionals') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_ListVariantGroupConditionals
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_LoadStoreConfig') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_LoadStoreConfig
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_SaveProductLocalization') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_SaveProductLocalization
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_SaveProductManageRole') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_SaveProductManageRole
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_SaveShoppingCart') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_SaveShoppingCart
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_SaveShoppingCartItem') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_SaveShoppingCartItem
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_SaveShoppingCartItemVariant') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_SaveShoppingCartItemVariant
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_SaveStoreConfig') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_SaveStoreConfig
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_SearchAutoComplete') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_SearchAutoComplete
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_UpdateBookingHistory') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateBookingHistory
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_UpdateCategory') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateCategory
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_UpdateCategoryQuantityDiscount') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateCategoryQuantityDiscount
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_UpdateClientCredential') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateClientCredential
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_UpdateCoupon') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateCoupon
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_UpdateCustomer') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateCustomer
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_UpdateCustomerWalletItem') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateCustomerWalletItem
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_UpdateCustomShipMethod') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateCustomShipMethod
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_UpdateEmailCampaign') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateEmailCampaign
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_UpdateEmailTemplate') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateEmailTemplate
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_UpdateFreeShipping') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateFreeShipping
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_UpdateInvoiceTemplate') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateInvoiceTemplate
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_UpdateManufacturer') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateManufacturer
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_UpdateOrder') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateOrder
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_UpdateOrderDetail') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateOrderDetail
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_UpdateOrderDetailVariant') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateOrderDetailVariant
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_UpdateOrderDiscount') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateOrderDiscount
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_UpdateOrderFulfillment') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateOrderFulfillment
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_UpdateOrderNote') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateOrderNote
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_UpdatePayment') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdatePayment
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_UpdatePaymentMethod') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdatePaymentMethod
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_UpdatePriceClass') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdatePriceClass
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_UpdateProduct') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateProduct
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_UpdateProductCustomField') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateProductCustomField
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_UpdateProductII') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateProductII
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_UpdateProductImage') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateProductImage
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_UpdateProductInventory') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateProductInventory
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_UpdateProductQuantityDiscount') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateProductQuantityDiscount
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_UpdateProductReview') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateProductReview
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_UpdateProductRoleDiscount') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateProductRoleDiscount
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_UpdateProductSearchKey') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateProductSearchKey
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_UpdateProductStock') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateProductStock
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_UpdateProductTemplateField') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateProductTemplateField
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_UpdateProductVariant') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateProductVariant
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_UpdateProductVariantGroup') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateProductVariantGroup
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_UpdateRegionalTax') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateRegionalTax
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_UpdateSavedShoppingCart') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateSavedShoppingCart
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_UpdateShippingAmountCost') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateShippingAmountCost
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_UpdateShippingPostalCost') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateShippingPostalCost
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_UpdateShippingQuantityCost') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateShippingQuantityCost
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_UpdateShippingWeightCost') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateShippingWeightCost
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_UpdateShippingZone') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateShippingZone
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_UpdateShoppingCartEmail') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateShoppingCartEmail
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_UpdateShoppingCartItem') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateShoppingCartItem
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_UpdateShoppingCartVariant') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateShoppingCartVariant
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_UpdateStore') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateStore
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_UpdateStorePermission') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateStorePermission
GO
IF EXISTS(SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}RZC_UpdateSubscription') AND type IN (N'P', N'PC'))
	DROP PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateSubscription
GO




/************************************************************/
/*****               Create Sprocs                      *****/
/************************************************************/
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ClearBundleProducts
	@ProductID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	DELETE BP FROM
		{databaseOwner}{objectQualifier}RZC_BundleProducts BP
	INNER JOIN
		{databaseOwner}{objectQualifier}RZC_Products P
	ON
		P.[ProductID] = BP.[ProductID]
	WHERE
		BP.[ProductID] = @ProductID
		AND P.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ClearCouponProducts
	@CouponID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	DELETE CP FROM
		{databaseOwner}{objectQualifier}RZC_CouponProduct CP
	INNER JOIN
		{databaseOwner}{objectQualifier}RZC_Coupons C
	ON
		C.[CouponID] = CP.[CouponID]
	WHERE
		CP.[CouponID] = @CouponID
		AND C.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ClearFulfillmentDetails
	@FulfillmentID INT = NULL,
	@OrderID INT = NULL
AS
BEGIN
	DELETE FD FROM
		{databaseOwner}{objectQualifier}RZC_OrderFulfillmentDetails FD
	INNER JOIN
		{databaseOwner}{objectQualifier}RZC_OrderFulfillments F
	ON
		F.[FulfillmentID] = FD.[FulfillmentID]
	INNER JOIN
		{databaseOwner}{objectQualifier}RZC_StoreOrders O
	ON
		O.[OrderID] = F.[OrderID]
	WHERE
		FD.[FulfillmentID] = @FulfillmentID
		AND O.[OrderID] = @OrderID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ClearOrderDetailVariants
	@OrderDetailID INT = NULL,
	@OrderID INT = NULL
AS
BEGIN
	DELETE
		ODV
	FROM
		{databaseOwner}{objectQualifier}RZC_StoreOrderDetailVariant ODV
	INNER JOIN
		{databaseOwner}{objectQualifier}RZC_StoreOrderDetails OD
	ON
		ODV.[OrderDetailID] = OD.[OrderDetailID]
	WHERE
		ODV.[OrderDetailID] = @OrderDetailID
		AND OD.[OrderID] = @OrderID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ClearProductCategories
	@ProductID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	DELETE CP FROM
		{databaseOwner}{objectQualifier}RZC_CategoryProduct CP
	INNER JOIN
		{databaseOwner}{objectQualifier}RZC_Products P
	ON
		P.[ProductID] = CP.[ProductID]
	WHERE
		P.[ProductID] = @ProductID
		AND P.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ClearProductDownloadHistory
	@ProductID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	DELETE PDH FROM
		{databaseOwner}{objectQualifier}RZC_ProductDownloadHistory PDH
	WHERE
		PDH.[ProductID] = @ProductID
		AND PDH.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ClearProductInventoryVariants
	@VariantInventoryID INT = NULL,
	@ProductID INT = NULL
AS
BEGIN
	DELETE FROM
		{databaseOwner}{objectQualifier}RZC_ProductVariantInvLinker
	WHERE
		[VariantInventoryID] = @VariantInventoryID
		AND [ProductID] = @ProductID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ClearProductPurchaseDownloadHistory
	@OrderDetailGUID UNIQUEIDENTIFIER = NULL,
	@PortalID INT = NULL
AS
BEGIN
	DELETE PDH FROM
		{databaseOwner}{objectQualifier}RZC_ProductDownloadHistory PDH
	WHERE
		PDH.[OrderDetailGUID] = @OrderDetailGUID
		AND PDH.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ClearProductVariantRoles
	@ManageRoleID INT = NULL,
	@ProductID INT = NULL
AS
BEGIN
	DELETE PVR FROM
		{databaseOwner}{objectQualifier}RZC_ProductVariantRole PVR
	INNER JOIN
		{databaseOwner}{objectQualifier}RZC_ProductManageRole PMR
	ON
		PMR.[ID] = PVR.[ManageRoleID]
	WHERE
		PVR.[ManageRoleID] = @ManageRoleID
		AND PMR.[ProductID] = @ProductID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ClearProductVisibilityRoles
	@ProductID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	DELETE PVR FROM
		{databaseOwner}{objectQualifier}RZC_ProductVisibilityRole PVR
	INNER JOIN
		{databaseOwner}{objectQualifier}RZC_Products P
	ON
		PVR.[ProductID] = P.[ProductID]
	WHERE
		PVR.[ProductID] = @ProductID
		AND P.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ClearRelatedProducts
	@ProductID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	DELETE RP FROM
		{databaseOwner}{objectQualifier}RZC_RelatedProducts RP
	INNER JOIN
		{databaseOwner}{objectQualifier}RZC_Products P
	ON
		P.[ProductID] = RP.[ProductID]
	WHERE
		RP.[ProductID] = @ProductID
		AND P.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ClearShippingCategories
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	DELETE FROM
		{databaseOwner}{objectQualifier}RZC_ShipCategories
	WHERE
		[StoreID] = @StoreID
		AND [PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ClearShoppingCartByUser
	@Persistent VARCHAR(16) = NULL,
	@CartCookie VARCHAR(100) = NULL,
	@DNNLogin NVARCHAR(100) = NULL,
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	DELETE FROM
		{databaseOwner}{objectQualifier}RZC_ShoppingCartVariant
	WHERE
		[CartID] IN (
			SELECT
				SC.[CartID]
			FROM
				{databaseOwner}{objectQualifier}RZC_ShoppingCart SC
			WHERE
				(SC.[CartCookie] = @CartCookie OR (@Persistent <> 'Machine' AND @DNNLogin <> ''))
				AND (SC.[DNNLogin] = @DNNLogin OR @Persistent <> 'User')
				AND SC.[StoreID] = @StoreID
				AND SC.[PortalID] = @PortalID
		)
	DELETE FROM
		{databaseOwner}{objectQualifier}RZC_ShoppingCart
	WHERE
		([CartCookie] = @CartCookie OR (@Persistent <> 'Machine' AND @DNNLogin <> ''))
		AND ([DNNLogin] = @DNNLogin OR @Persistent <> 'User')
		AND [StoreID] = @StoreID
		AND [PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ClearStoreConfig
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	DELETE FROM
		{databaseOwner}{objectQualifier}RZC_StoreConfig
	WHERE
		[StoreID] = @StoreID
		AND [PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ClearTaxTable
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	DELETE FROM
		{databaseOwner}{objectQualifier}RZC_Tax
	WHERE
		[StoreID] = @StoreID
		AND [PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ClearVariantConditionalGroups
	@VariantID INT = NULL
AS
BEGIN
	DELETE FROM
		{databaseOwner}{objectQualifier}RZC_VariantConditionalGroup
	WHERE
		[VariantID] = @VariantID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ConfirmBookingHistory
	@VendorProductID INT = NULL,
	@OrderDetailID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	UPDATE
		{databaseOwner}{objectQualifier}RZC_VendorBooking
	SET
		[IsConfirmed] = 1
	WHERE
		[VendorProductID] = @VendorProductID
		AND [OrderDetailID] = @OrderDetailID
		AND [PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateAnalyticsEvent
	@Action VARCHAR(64) = NULL,
	@ProductID INT = NULL,
	@UserID INT = NULL,
	@CartID INT = NULL,
	@PortalID INT = NULL,
	@StoreID INT = NULL
AS
BEGIN
	INSERT INTO {databaseOwner}{objectQualifier}RZC_Analytics
		([Date]
		,[Action]
		,[ProductID]
		,[UserID]
		,[CartID]
		,[PortalID]
		,[StoreID])
	VALUES
		(GETDATE()
		,@Action
		,@ProductID
		,@UserID
		,@CartID
		,@PortalID
		,@StoreID)
	SELECT SCOPE_IDENTITY()
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateBookableProductDisabledDate
	@ProductID INT = NULL,
	@Type VARCHAR(50) = NULL,
	@DisableDay INT = NULL,
	@DisableDate DATETIME = NULL,
	@DisableDateRangeFrom DATETIME = NULL,
	@DisableDateRangeTo DATETIME = NULL,
	@EveryYear BIT = NULL,
	@Calendar VARCHAR(50) = NULL,
	@CreatedBy INT = NULL
AS
BEGIN
	INSERT INTO
		{databaseOwner}{objectQualifier}RZC_BookingDisabledDates
		([ProductID]
		,[Type]
		,[DisableDay]
		,[DisableDate]
		,[DisableDateRangeFrom]
		,[DisableDateRangeTo]
		,[EveryYear]
		,[Calendar]
		,[CreatedDate]
		,[CreatedBy])
	VALUES
		(@ProductID
		,@Type
		,@DisableDay
		,@DisableDate
		,@DisableDateRangeFrom
		,@DisableDateRangeTo
		,@EveryYear
		,@Calendar
		,GETDATE()
		,@CreatedBy)
	SELECT SCOPE_IDENTITY()
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateBookableProductDisabledTime
	@ProductID INT = NULL,
	@Type VARCHAR(50) = NULL,
	@DisableTime TIME = NULL,
	@DisableTimeRangeFrom TIME = NULL,
	@DisableTimeRangeTo TIME = NULL,
	@Repeat INT = NULL,
	@Calendar VARCHAR(50) = NULL,
	@CreatedBy INT = NULL
AS
BEGIN
	INSERT INTO
		{databaseOwner}{objectQualifier}RZC_BookingDisabledTimes
		([ProductID]
		,[Type]
		,[DisableTime]
		,[DisableTimeRangeFrom]
		,[DisableTimeRangeTo]
		,[Repeat]
		,[Calendar]
		,[CreatedDate]
		,[CreatedBy])
	VALUES
		(@ProductID
		,@Type
		,@DisableTime
		,@DisableTimeRangeFrom
		,@DisableTimeRangeTo
		,@Repeat
		,@Calendar
		,GETDATE()
		,@CreatedBy)
	SELECT SCOPE_IDENTITY()
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateBookingHistory
	@VendorProductID INT = NULL,
	@OrderDetailID INT = NULL,
	@CustomerID INT = NULL,
	@StartDate DATETIME = NULL,
	@EndDate DATETIME = NULL,
	@BookQtyReserved INT = NULL,
	@BookQtyPurchased INT = NULL,
	@AllDay BIT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	INSERT INTO
		{databaseOwner}{objectQualifier}RZC_VendorBooking
		([VendorProductID]
		,[OrderDetailID]
		,[CustomerID]
		,[StartDate]
		,[EndDate]
		,[BookQtyReserved]
		,[BookQtyPurchased]
		,[AllDay]
		,[PortalID])
	VALUES
		(@VendorProductID
		,@OrderDetailID
		,@CustomerID
		,@StartDate
		,@EndDate
		,@BookQtyReserved
		,@BookQtyPurchased
		,@AllDay
		,@PortalID)
	SELECT SCOPE_IDENTITY()
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateBundleProduct
	@ProductID INT = NULL,
	@BundleProductID INT = NULL
AS
BEGIN
	INSERT INTO
		{databaseOwner}{objectQualifier}RZC_BundleProducts
		([ProductID]
		,[BundleProductID])
	VALUES
		(@ProductID
		,@BundleProductID)
	SELECT SCOPE_IDENTITY()
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateCategory
	@CategoryName VARCHAR(50) = NULL,
	@SortOrder INT = NULL,
	@Share BIT = NULL,
	@ParentID INT = NULL,
	@PortalID INT = NULL,
	@CatSEOURL VARCHAR(50) = NULL,
	@CatDescription NTEXT = NULL,
	@ShowCategoryRole BIT = NULL,
	@MinOrderAmount MONEY = NULL,
	@MinOrderQty INT = NULL,
	@DepartmentID INT = NULL,
	@Featured BIT = NULL,
	@CatImage NVARCHAR(500) = NULL,
	@BreadCrumb NVARCHAR(200) = NULL,
	@LinkUrl NVARCHAR(1000) = NULL,
	@H2Tag NVARCHAR(100) = NULL,
	@AltTag NVARCHAR(120) = NULL,
	@MetaDescription NVARCHAR(160) = NULL,
	@StoreID INT = NULL
AS
BEGIN
	INSERT INTO
		{databaseOwner}{objectQualifier}RZC_Category
		([CategoryName]
		,[SortOrder]
		,[Share]
		,[ParentID]
		,[PortalID]
		,[CatSEOURL]
		,[CatDescription]
		,[ShowCategoryRole]
		,[MinOrderAmount]
		,[MinOrderQty]
		,[DepartmentID]
		,[Featured]
		,[CatImage]
		,[BreadCrumb]
		,[LinkUrl]
		,[H2Tag]
		,[AltTag]
		,[MetaDescription]
		,[StoreID])
	VALUES
		(@CategoryName
		,@SortOrder
		,@Share
		,@ParentID
		,@PortalID
		,@CatSEOURL
		,@CatDescription
		,@ShowCategoryRole
		,@MinOrderAmount
		,@MinOrderQty
		,@DepartmentID
		,@Featured
		,@CatImage
		,@BreadCrumb
		,@LinkUrl
		,@H2Tag
		,@AltTag
		,@MetaDescription
		,@StoreID)
	SELECT SCOPE_IDENTITY()
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateCategoryQuantityDiscount
	@CategoryID INT = NULL,
	@QtyFrom INT = NULL,
	@QtyTo INT = NULL,
	@Price MONEY = NULL,
	@DiscountGroup VARCHAR(50) = NULL
AS
BEGIN
	INSERT INTO
		{databaseOwner}{objectQualifier}RZC_CategoryQtyDiscounts
		([CategoryID]
		,[QtyFrom]
		,[QtyTo]
		,[Price]
		,[DiscountGroup])
	VALUES
		(@CategoryID
		,@QtyFrom
		,@QtyTo
		,@Price
		,@DiscountGroup)
	SELECT SCOPE_IDENTITY()
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateClientCredential
	@Title NVARCHAR(256) = NULL,
	@Summary NVARCHAR(1024) = NULL,
	@ClientID NVARCHAR(64) = NULL,
	@ClientSecret NVARCHAR(256) = NULL,
	@CallbackUrl NVARCHAR(256) = NULL,
	@ApplicationUrl NVARCHAR(256) = NULL,
	@Status SMALLINT = NULL,
	@SortOrder FLOAT = NULL,
	@CreatedDate DATETIME = NULL,
	@CreatedByUser NVARCHAR(64) = NULL,
	@ModifiedDate DATETIME = NULL,
	@ModifiedByUser NVARCHAR(64) = NULL,
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	INSERT INTO
		{databaseOwner}{objectQualifier}RZC_ClientCredentials
		([Title]
		,[Summary]
		,[ClientID]
		,[ClientSecret]
		,[CallbackUrl]
		,[ApplicationUrl]
		,[Status]
		,[SortOrder]
		,[CreatedDate]
		,[CreatedByUser]
		,[ModifiedDate]
		,[ModifiedByUser]
		,[StoreID]
		,[PortalID])
	VALUES
		(@Title
		,@Summary
		,@ClientID
		,@ClientSecret
		,@CallbackUrl
		,@ApplicationUrl
		,@Status
		,@SortOrder
		,@CreatedDate
		,@CreatedByUser
		,@ModifiedDate
		,@ModifiedByUser
		,@StoreID
		,@PortalID)
	SELECT SCOPE_IDENTITY()
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateCoupon
	@CouponCode VARCHAR(50) = NULL,
	@CouponName VARCHAR(255) = NULL,
	@CouponAmount MONEY = NULL,
	@CouponQuantity VARCHAR(50) = NULL,
	@DiscountByItem BIT = NULL,
	@CreatedByUser VARCHAR(100) = NULL,
	@CreatedDate DATETIME = NULL,
	@ProductID INT = NULL,
	@CouponLimit INT = NULL,
	@CouponShipping MONEY = NULL,
	@DiscountPercent DECIMAL(18,2) = NULL,
	@PortalID INT = NULL,
	@ExpireDate DATETIME = NULL,
	@DiscountFirstPaymentOnly BIT = NULL,
	@CouponRoleExists BIT = NULL,
	@MaxUseProduct INT = NULL,
	@Active BIT = NULL,
	@StartDate DATETIME = NULL,
	@MinOrderAmount MONEY = NULL,
	@FreeStandardShipping BIT = NULL,
	@UpgradeShipping BIT = NULL,
	@StoreID INT = NULL
AS
BEGIN
	INSERT INTO
		{databaseOwner}{objectQualifier}RZC_Coupons
		([CouponCode]
		,[CouponName]
		,[CouponAmount]
		,[CouponQuantity]
		,[DiscountByItem]
		,[CreatedByUser]
		,[CreatedDate]
		,[ProductID]
		,[CouponLimit]
		,[CouponShipping]
		,[DiscountPercent]
		,[PortalID]
		,[ExpireDate]
		,[DiscountFirstPaymentOnly]
		,[CouponRoleExists]
		,[MaxUseProduct]
		,[Active]
		,[StartDate]
		,[MinOrderAmount]
		,[FreeStandardShipping]
		,[UpgradeShipping]
		,[StoreID])
	VALUES
		(@CouponCode
		,@CouponName
		,@CouponAmount
		,@CouponQuantity
		,@DiscountByItem
		,@CreatedByUser
		,@CreatedDate
		,@ProductID
		,@CouponLimit
		,@CouponShipping
		,@DiscountPercent
		,@PortalID
		,@ExpireDate
		,@DiscountFirstPaymentOnly
		,@CouponRoleExists
		,@MaxUseProduct
		,@Active
		,@StartDate
		,@MinOrderAmount
		,@FreeStandardShipping
		,@UpgradeShipping
		,@StoreID)
	SELECT SCOPE_IDENTITY()
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateCouponProduct
	@CouponID INT = NULL,
	@ProductID INT = NULL
AS
BEGIN
	INSERT INTO
		{databaseOwner}{objectQualifier}RZC_CouponProduct
		([CouponID]
		,[ProductID])
	VALUES
		(@CouponID
		,@ProductID)
	SELECT SCOPE_IDENTITY()
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateCouponProductVariant
	@CouponID INT = NULL,
	@ProductID INT = NULL,
	@VariantID INT = NULL,
	@VariantName VARCHAR(50) = NULL,
	@LifecycleStatus VARCHAR(50) = NULL
AS
BEGIN
	INSERT INTO
		{databaseOwner}{objectQualifier}RZC_CouponVariant
		([CouponID]
		,[ProductID]
		,[VariantID]
		,[VariantName]
		,[LifecycleStatus])
	VALUES
		(@CouponID
		,@ProductID
		,@VariantID
		,@VariantName
		,@LifecycleStatus)
	SELECT SCOPE_IDENTITY()
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateCustomer
	@FirstName NVARCHAR(64) = NULL,
	@LastName NVARCHAR(64) = NULL,
	@Address1 NVARCHAR(256) = NULL,
	@Address2 NVARCHAR(128) = NULL,
	@City NVARCHAR(64) = NULL,
	@Zip NVARCHAR(64) = NULL,
	@State NVARCHAR(64) = NULL,
	@Country NVARCHAR(64) = NULL,
	@HomePhone VARCHAR(50) = NULL,
	@CellPhone VARCHAR(50) = NULL,
	@WorkPhone VARCHAR(50) = NULL,
	@PhoneCarrier VARCHAR(50) = NULL,
	@Remind BIT = NULL,
	@Email VARCHAR(50) = NULL,
	@BillingAddress1 NVARCHAR(256) = NULL,
	@BillingAddress2 NVARCHAR(256) = NULL,
	@BillingCity NVARCHAR(64) = NULL,
	@BillingZip NVARCHAR(64) = NULL,
	@BillingState NVARCHAR(64) = NULL,
	@BillingCountry NVARCHAR(64) = NULL,
	@AccountNo VARCHAR(50) = NULL,
	@MaskAccountNo VARCHAR(50) = NULL,
	@ABAExpire VARCHAR(50) = NULL,
	@DNNLogin NVARCHAR(128) = NULL,
	@DateCreated DATETIME = NULL,
	@Contact BIT = NULL,
	@IPAddress VARCHAR(50) = NULL,
	@PortalID INT = NULL,
	@CompanyName NVARCHAR(128) = NULL,
	@BuyerRole VARCHAR(50) = NULL,
	@AnniversaryDate DATETIME = NULL,
	@CreditLimit DECIMAL(18,2) = NULL,
	@BidLimit DECIMAL(18,2) = NULL,
	@ModifiedBy VARCHAR(50) = NULL,
	@DateModified DATETIME = NULL,
	@TaxID VARCHAR(50) = NULL,
	@StoreID INT = NULL
AS
BEGIN
	INSERT INTO {databaseOwner}{objectQualifier}RZC_Customer
		([FirstName]
		,[LastName]
		,[Address1]
		,[Address2]
		,[City]
		,[Zip]
		,[State]
		,[Country]
		,[HomePhone]
		,[CellPhone]
		,[WorkPhone]
		,[PhoneCarrier]
		,[Remind]
		,[Email]	
		,[BillingAddress1]
		,[BillingAddress2]
		,[BillingCity]
		,[BillingZip]
		,[BillingState]
		,[BillingCountry]
		,[AccountNo]
		,[MaskAccountNo]
		,[ABAExpire]
		,[DNNLogin]
		,[DateCreated]
		,[Contact]
		,[IPAddress]
		,[PortalID]
		,[CompanyName]
		,[BuyerRole]
		,[AnniversaryDate]
		,[CreditLimit]
		,[BidLimit]
		,[ModifiedBy]
		,[DateModified]
		,[TaxID]
		,[StoreID])
	VALUES
		(@FirstName
		,@LastName
		,@Address1
		,@Address2
		,@City
		,@Zip
		,@State
		,@Country
		,@HomePhone
		,@CellPhone
		,@WorkPhone
		,@PhoneCarrier
		,@Remind
		,@Email
		,@BillingAddress1
		,@BillingAddress2
		,@BillingCity
		,@BillingZip
		,@State
		,@BillingCountry
		,@AccountNo
		,@MaskAccountNo
		,@ABAExpire
		,@DNNLogin
		,@DateCreated
		,@Contact
		,@IPAddress
		,@PortalID
		,@CompanyName
		,@BuyerRole
		,@AnniversaryDate
		,@CreditLimit
		,@BidLimit
		,@ModifiedBy
		,@DateModified
		,@TaxID
		,@StoreID)
	SELECT SCOPE_IDENTITY()
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateCustomerWalletItem
	@CustomerID INT = NULL,
	@BillingName NVARCHAR(50) = NULL,
	@Address1 NVARCHAR(50) = NULL,
	@Address2 NVARCHAR(50) = NULL,
	@City NVARCHAR(50) = NULL,
	@State NVARCHAR(50) = NULL,
	@Zip VARCHAR(50) = NULL,
	@Country NVARCHAR(50) = NULL,
	@WalletName NVARCHAR(150) = NULL,
	@PayType VARCHAR(50) = NULL,
	@AcctNo VARCHAR(64) = NULL,
	@ExpRoute VARCHAR(50) = NULL,
	@DNNLogin VARCHAR(50) = NULL,
	@DNNRole NVARCHAR(50) = NULL,
	@PortalID INT = NULL
AS
BEGIN
	INSERT INTO
		{databaseOwner}{objectQualifier}RZC_CustomerWallet
		([CustomerID]
		,[BillingName]
		,[Address1]
		,[Address2]
		,[City]
		,[State]
		,[Zip]
		,[Country]
		,[WalletName]
		,[PayType]
		,[AcctNo]
		,[ExpRoute]
		,[DNNLogin]
		,[DNNRole]
		,[PortalID])
	VALUES
		(@CustomerID
		,@BillingName
		,@Address1
		,@Address2
		,@City
		,@State
		,@Zip
		,@Country
		,@WalletName
		,@PayType
		,@AcctNo
		,@ExpRoute
		,@DNNLogin
		,@DNNRole
		,@PortalID)
	SELECT SCOPE_IDENTITY()
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateCustomShipMethod
	@ShipMethodName VARCHAR(50) = NULL,
	@ShipMethodAmount DECIMAL(18,2) = NULL,
	@Share BIT = NULL,
	@SortOrder INT = NULL,
	@PortalID INT = NULL,
	@SurchargePercentage DECIMAL(18,2) = NULL,
	@SurchargeAmount DECIMAL(18,2) = NULL,
	@RoleID INT = NULL,
	@StoreID INT = NULL
AS
BEGIN
	INSERT INTO
		{databaseOwner}{objectQualifier}RZC_ShipMethods
		([ShipMethodName]
		,[ShipMethodAmount]
		,[Share]
		,[SortOrder]
		,[PortalID]
		,[SurchargePercentage]
		,[SurchargeAmount]
		,[RoleID]
		,[StoreID])
	VALUES
		(@ShipMethodName
		,@ShipMethodAmount
		,@Share
		,@SortOrder
		,@PortalID
		,@SurchargePercentage
		,@SurchargeAmount
		,@RoleID
		,@StoreID)
	SELECT SCOPE_IDENTITY()
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateEmailCampaign
	@Name NVARCHAR(128) = NULL,
	@Type NVARCHAR(32) = NULL,
	@EmailFrom NVARCHAR(256) = NULL,
	@Subject NVARCHAR(256) = NULL,
	@Template NTEXT = NULL,
	@Active BIT = NULL,
	@Interval SMALLINT = NULL,
	@Units NVARCHAR(10) = NULL,
	@CouponID INT = NULL,
	@EmailsSent INT = NULL,
	@LanguageLocale NVARCHAR(20) = NULL,
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	INSERT INTO
		{databaseOwner}{objectQualifier}RZC_EmailCampaign
		([Name]
		,[Type]
		,[EmailFrom]
		,[Subject]
		,[Template]
		,[Active]
		,[Interval]
		,[Units]
		,[CouponID]
		,[EmailsSent]
		,[LanguageLocale]
		,[StoreID]
		,[PortalID])
	VALUES
		(@Name
		,@Type
		,@EmailFrom
		,@Subject
		,@Template
		,@Active
		,@Interval
		,@Units
		,@CouponID
		,@EmailsSent
		,@LanguageLocale
		,@StoreID
		,@PortalID)
	SELECT SCOPE_IDENTITY()
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateEmailTemplate
	@Name NVARCHAR(50) = NULL,
	@Subject NVARCHAR(255) = NULL,
	@Template NTEXT = NULL,
	@PortalID INT = NULL,
	@LanguageLocale NVARCHAR(20) = NULL,
	@Type NVARCHAR(150) = NULL,
	@StoreID INT = NULL
AS
BEGIN
	INSERT INTO
		{databaseOwner}{objectQualifier}RZC_EmailTemplateSC
		([Name]
		,[Subject]
		,[Template]
		,[PortalID]
		,[LanguageLocale]
		,[Type]
		,[StoreID])
	VALUES
		(@Name
		,@Subject
		,@Template
		,@PortalID
		,@LanguageLocale
		,@Type
		,@StoreID)
	SELECT SCOPE_IDENTITY()
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateFreeShipping
	@ZipCode VARCHAR(50) = NULL,
	@ShipMethodID INT = NULL,
	@CategoryID INT = NULL,
	@Country VARCHAR(50) = NULL,
	@PortalID INT = NULL,
	@StoreID INT = NULL
AS
BEGIN
	INSERT INTO
		{databaseOwner}{objectQualifier}RZC_ShipFree
		([ZipCode]
		,[ShipMethodID]
		,[CategoryID]
		,[Country]
		,[PortalID]
		,[StoreID])
	VALUES
		(@ZipCode
		,@ShipMethodID
		,@CategoryID
		,@Country
		,@PortalID
		,@StoreID)
	SELECT SCOPE_IDENTITY()
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateFulfillmentDetail
	@FulfillmentID INT = NULL,
	@OrderDetailID INT = NULL,
	@Quantity DECIMAL(10,2) = NULL
AS
BEGIN
	INSERT INTO
		{databaseOwner}{objectQualifier}RZC_OrderFulfillmentDetails
		([FulfillmentID]
		,[OrderDetailID]
		,[Quantity])
	VALUES
		(@FulfillmentID
		,@OrderDetailID
		,@Quantity)
	SELECT SCOPE_IDENTITY()
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateInvoiceTemplate
	@Name NVARCHAR(100) = NULL,
	@Template NTEXT = NULL,
	@PortalID INT = NULL,
	@LanguageLocale NVARCHAR(20) = NULL,
	@StoreID INT = NULL
AS
BEGIN
	INSERT INTO
		{databaseOwner}{objectQualifier}RZC_InvoiceTemplate
		([Name]
		,[Template]
		,[PortalID]
		,[LanguageLocale]
		,[StoreID])
	VALUES
		(@Name
		,@Template
		,@PortalID
		,@LanguageLocale
		,@StoreID)
	SELECT SCOPE_IDENTITY()
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateLicenseKey
	@Hostname VARCHAR(256) = NULL,
	@LicenseKey VARCHAR(MAX) = NULL,
	@CreateDate DATETIME = NULL,
	@CreatedByUser INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	INSERT INTO
		{databaseOwner}{objectQualifier}RZC_LicenseKey
		([Hostname]
		,[LicenseKey]
		,[CreateDate]
		,[CreatedByUser]
		,[PortalID])
	VALUES
		(@Hostname
		,@LicenseKey
		,@CreateDate
		,@CreatedByUser
		,@PortalID)
	SELECT SCOPE_IDENTITY()
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateManufacturer
	@ManufacturerName NVARCHAR(50) = NULL,
	@PortalID INT = NULL,
	@FirstName NVARCHAR(50) = NULL,
	@LastName NVARCHAR(50) = NULL,
	@Address1 NVARCHAR(50) = NULL,
	@Address2 NVARCHAR(50) = NULL,
	@City NVARCHAR(50) = NULL,
	@State NVARCHAR(50) = NULL,
	@Country NVARCHAR(50) = NULL,
	@Zip VARCHAR(50) = NULL,
	@Phone VARCHAR(50) = NULL,
	@Fax VARCHAR(50) = NULL,
	@Email VARCHAR(50) = NULL,
	@IDNumber VARCHAR(50) = NULL,
	@ContactName NVARCHAR(75) = NULL,
	@Description NVARCHAR(100) = NULL,
	@Occupation NVARCHAR(50) = NULL,
	@Comments NTEXT = NULL,
	@AccountNumber VARCHAR(50) = NULL,
	@RoutingNumber VARCHAR(50) = NULL,
	@Share BIT = NULL,
	@StoreID INT = NULL
AS
BEGIN
	INSERT INTO
		{databaseOwner}{objectQualifier}RZC_Manufacturer
		([ManufacturerName]
		,[PortalID]
		,[FirstName]
		,[LastName]
		,[Address1]
		,[Address2]
		,[City]
		,[State]
		,[Country]
		,[Zip]
		,[Phone]
		,[Fax]
		,[Email]
		,[IDNumber]
		,[ContactName]
		,[Description]
		,[Occupation]
		,[Comments]
		,[AccountNumber]
		,[RoutingNumber]
		,[Share]
		,[StoreID])
	VALUES
		(@ManufacturerName
		,@PortalID
		,@FirstName
		,@LastName
		,@Address1
		,@Address2
		,@City
		,@State
		,@Country
		,@Zip
		,@Phone
		,@Fax
		,@Email
		,@IDNumber
		,@ContactName
		,@Description
		,@Occupation
		,@Comments
		,@AccountNumber
		,@RoutingNumber
		,@Share
		,@StoreID)
	SELECT SCOPE_IDENTITY()
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateOrder
	@CustomerID INT = NULL,
	@OrderDate DATETIME = NULL,
	@ShippingTotal MONEY = NULL,
	@TaxTotal MONEY = NULL,
	@HandlingCharge MONEY = NULL,
	@ShipFirstName NVARCHAR(50) = NULL,
	@ShipLastName NVARCHAR(50) = NULL,
	@ShipAddress1 VARCHAR(200) = NULL,
	@ShipAddress2 VARCHAR(200) = NULL,
	@ShipCity VARCHAR(60) = NULL,
	@ShipState VARCHAR(60) = NULL,
	@ShipZipcode VARCHAR(25) = NULL,
	@ShipCountry VARCHAR(50) = NULL,
	@Status VARCHAR(20) = NULL,
	@ShipMethod NVARCHAR(50) = NULL,
	@AffiliateID VARCHAR(20) = NULL,
	@CouponID INT = NULL,
	@Discount MONEY = NULL,
	@MemberDiscount MONEY = NULL,
	@MemberRole NVARCHAR(50) = NULL,
	@TrackingNumber VARCHAR(50) = NULL,
	@PortalID INT = NULL,
	@Surcharge MONEY = NULL,
	@UDF1 VARCHAR(50) = NULL,
	@UDF2 VARCHAR(50) = NULL,
	@SpecialInstructions NVARCHAR(500) = NULL,
	@ShipDate DATETIME = NULL,
	@DeletedFlag BIT = NULL,
	@DNNProfileField NVARCHAR(150) = NULL,
	@ShipCarrier NVARCHAR(50) = NULL,
	@DNNUserID INT = NULL,
	@ResidentialStatus VARCHAR(100) = NULL,
	@IPAddress VARCHAR(50) = NULL,
	@ModifiedBy NVARCHAR(100) = NULL,
	@DateModified DATETIME = NULL,
	@AuctionID INT = NULL,
	@SubTotal MONEY = NULL,
	@GrandTotal MONEY = NULL,
	@RecalcTax BIT = NULL,
	@RecalcShipping BIT = NULL,
	@StoreID INT = NULL
AS
BEGIN
	INSERT INTO {databaseOwner}{objectQualifier}RZC_StoreOrders
		([CustomerID]
		,[OrderDate]
		,[ShippingTotal]
		,[TaxTotal]
		,[HandlingCharge]
		,[ShipFirstName]
		,[ShipLastName]
		,[ShipAddress1]
		,[ShipAddress2]
		,[ShipCity]
		,[ShipState]
		,[ShipZipcode]
		,[ShipCountry]
		,[Status]
		,[ShipMethod]
		,[AffiliateID]
		,[CouponID]
		,[Discount]
		,[MemberDiscount]
		,[MemberRole]
		,[TrackingNumber]
		,[PortalID]
		,[Surcharge]
		,[UDF1]
		,[UDF2]
		,[SpecialInstructions]
		,[ShipDate]
		,[DeletedFlag]
		,[DNNProfileField]
		,[ShipCarrier]
		,[DNNUserID]
		,[ResidentialStatus]
		,[IPAddress]
		,[ModifiedBy]
		,[DateModified]
		,[AuctionID]
		,[SubTotal]
		,[GrandTotal]
		,[RecalcTax]
		,[RecalcShipping]
		,[StoreID])
	VALUES
		(@CustomerID
		,@OrderDate
		,@ShippingTotal
		,@TaxTotal
		,@HandlingCharge
		,@ShipFirstName
		,@ShipLastName
		,@ShipAddress1
		,@ShipAddress2
		,@ShipCity
		,@ShipState
		,@ShipZipcode
		,@ShipCountry
		,@Status
		,@ShipMethod
		,@AffiliateID
		,@CouponID
		,@Discount
		,@MemberDiscount
		,@MemberRole
		,@TrackingNumber
		,@PortalID
		,@Surcharge
		,@UDF1
		,@UDF2
		,@SpecialInstructions
		,@ShipDate
		,@DeletedFlag
		,@DNNProfileField
		,@ShipCarrier
		,@DNNUserID
		,@ResidentialStatus
		,@IPAddress
		,@ModifiedBy
		,@DateModified
		,@AuctionID
		,@SubTotal
		,@GrandTotal
		,@RecalcTax
		,@RecalcShipping
		,@StoreID)
	SELECT SCOPE_IDENTITY()
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateOrderDetail
	@OrderID INT = NULL,
	@ProductID INT = NULL,
	@Quantity DECIMAL(10,2) = NULL,
	@UnitCost MONEY = 0,
	@ProductName NVARCHAR(1000) = NULL,
	@ProductSKU VARCHAR(50) = NULL,
	@Shipped BIT = NULL,
	@Returned BIT = NULL,
	@DateUpdated DATETIME = NULL,
	@PortalID INT = NULL,
	@OrderDetailGUID UNIQUEIDENTIFIER = NULL,
	@SerialNumber VARCHAR(70) = NULL,
	@WebServiceData VARCHAR(255) = NULL,
	@VendorID INT = NULL,
	@TaxRate FLOAT = NULL,
	@Commission MONEY = NULL,
	@StatusID INT = NULL,
	@QtyShipped DECIMAL(10,2) = NULL,
	@Weight DECIMAL(12,2) = NULL,
	@CartAddDate DATETIME = NULL,
	@OtherDetailFields NVARCHAR(MAX) = NULL
AS
BEGIN
	INSERT INTO {databaseOwner}{objectQualifier}RZC_StoreOrderDetails
		([OrderID]
		,[ProductID]
		,[Quantity]
		,[UnitCost]
		,[ProductName]
		,[ProductSKU]
		,[Shipped]
		,[Returned]
		,[DateUpdated]
		,[PortalID]
		,[OrderDetailGUID]
		,[SerialNumber]
		,[WebServiceData]
		,[VendorID]
		,[TaxRate]
		,[Commission]
		,[StatusID]
		,[QtyShipped]
		,[Weight]
		,[CartAddDate]
		,[OtherDetailFields])
	VALUES
		(@OrderID
		,@ProductID
		,@Quantity
		,@UnitCost
		,@ProductName
		,@ProductSKU
		,@Shipped
		,@Returned
		,@DateUpdated
		,@PortalID
		,@OrderDetailGUID
		,@SerialNumber
		,@WebServiceData
		,@VendorID
		,@TaxRate
		,@Commission
		,@StatusID
		,@QtyShipped
		,@Weight
		,@CartAddDate
		,@OtherDetailFields)
	SELECT SCOPE_IDENTITY()
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateOrderDetailVariant
	@OrderDetailID INT = NULL,
	@VariantGroupID INT = NULL,
	@VariantGroup VARCHAR(50) = NULL,
	@VariantID INT = NULL,
	@VariantName VARCHAR(50) = NULL,
	@VariantHasText BIT = NULL,
	@VariantText VARCHAR(200) = NULL,
	@PriceCalculated MONEY = NULL
AS
BEGIN
	INSERT INTO {databaseOwner}{objectQualifier}RZC_StoreOrderDetailVariant
		([OrderDetailID]
		,[VariantGroupID]
		,[VariantGroup]
		,[VariantID]
		,[VariantName]
		,[VariantHasText]
		,[VariantText]
		,[PriceCalculated])
	VALUES
		(@OrderDetailID
		,@VariantGroupID
		,@VariantGroup
		,@VariantID
		,@VariantName
		,@VariantHasText
		,@VariantText
		,@PriceCalculated)
	SELECT SCOPE_IDENTITY()
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateOrderDiscount
	@RoleID INT = NULL,
	@DiscountPercent DECIMAL(6,2) = NULL,
	@DiscountAmount MONEY = NULL,
	@TextBox1Required BIT = NULL,
	@TextBox2Required BIT = NULL,
	@DateRequired BIT = NULL,
	@PortalID INT = NULL,
	@StoreID INT = NULL
AS
BEGIN
	INSERT INTO
		{databaseOwner}{objectQualifier}RZC_OrderDiscounts
		([RoleID]
		,[DiscountPercent]
		,[DiscountAmount]
		,[TextBox1Required]
		,[TextBox2Required]
		,[DateRequired]
		,[PortalID]
		,[StoreID])
	VALUES
		(@RoleID
		,@DiscountPercent
		,@DiscountAmount
		,@TextBox1Required
		,@TextBox2Required
		,@DateRequired
		,@PortalID
		,@StoreID)
	SELECT SCOPE_IDENTITY()
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateOrderFulfillment
	@OrderID INT = NULL,
	@ShipCarrier NVARCHAR(64) = NULL,
	@ShipMethod NVARCHAR(128) = NULL,
	@ShipDate DATETIME = NULL,
	@Width DECIMAL(12,2) = NULL,
	@Height DECIMAL(12,2) = NULL,
	@Length DECIMAL(12,2) = NULL,
	@Shipped BIT = NULL,
	@TrackingNumber NVARCHAR(128) = NULL
AS
BEGIN
	INSERT INTO {databaseOwner}{objectQualifier}RZC_OrderFulfillments
		([OrderID]
		,[ShipCarrier]
		,[ShipMethod]
		,[ShipDate]
		,[Width]
		,[Height]
		,[Length]
		,[Shipped]
		,[TrackingNumber])
	VALUES
		(@OrderID
		,@ShipCarrier
		,@ShipMethod
		,@ShipDate
		,@Width
		,@Height
		,@Length
		,@Shipped
		,@TrackingNumber)
	SELECT SCOPE_IDENTITY()
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateOrderNote
	@OrderID INT = NULL,
	@Notes NVARCHAR(MAX) = NULL,
	@ModifiedBy NVARCHAR(100) = NULL,
	@DateModified DATETIME = NULL,
	@DateCreated DATETIME = NULL
AS
BEGIN
	INSERT INTO
		{databaseOwner}{objectQualifier}RZC_OrderNotes
		([OrderID]
		,[Notes]
		,[ModifiedBy]
		,[DateModified]
		,[DateCreated])
	VALUES
		(@OrderID
		,@Notes
		,@ModifiedBy
		,@DateModified
		,@DateCreated)
	SELECT SCOPE_IDENTITY()
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_CreatePayment
	@CustomerID INT = NULL,
	@PayType VARCHAR(50) = NULL,
	@PayDate DATETIME = NULL,
	@Amount MONEY = NULL,
	@Quantity INT = NULL,
	@AcctNo VARCHAR(64) = NULL,
	@ExpRoute VARCHAR(50) = NULL,
	@TransID VARCHAR(50) = NULL,
	@BillingAddress VARCHAR(50) = NULL,
	@BillingCity VARCHAR(50) = NULL,
	@BillingState VARCHAR(50) = NULL,
	@BillingZip VARCHAR(50) = NULL,
	@BillingCountry VARCHAR(50) = NULL,
	@Coupon VARCHAR(50) = NULL,
	@Notes VARCHAR(50) = NULL,
	@Status VARCHAR(50) = NULL,
	@AuthCode VARCHAR(50) = NULL,
	@BillingName VARCHAR(50) = NULL,
	@PortalID INT = NULL,
	@InvoiceNo VARCHAR(50) = NULL,
	@PONumber VARCHAR(50) = NULL,
	@Success BIT = NULL,
	@GiftCardID INT = NULL,
	@OrderID INT = NULL,
	@IPAddress VARCHAR(50) = NULL,
	@ModifiedBy NVARCHAR(100) = NULL,
	@DateModified DATETIME = NULL,
	@MaskAcctNo VARCHAR(50) = NULL,
	@TransType VARCHAR(50) = NULL,
	@ClearDate DATETIME = NULL,
	@AdminNotes NVARCHAR(MAX) = NULL,
	@OffsetID INT = NULL,
	@SubscriptionID INT = NULL,
	@PayMethodID INT = NULL,
	@StoreID INT = NULL
AS
BEGIN
	INSERT INTO {databaseOwner}{objectQualifier}RZC_PayHist
		([CustomerID]
		,[PayType]
		,[PayDate]
		,[Amount]
		,[Quantity]
		,[AcctNo]
		,[ExpRoute]
		,[TransID]
		,[BillingAddress]
		,[BillingCity]
		,[BillingState]
		,[BillingZip]
		,[BillingCountry]
		,[Coupon]
		,[Notes]
		,[Status]
		,[AuthCode]
		,[BillingName]
		,[PortalID]
		,[InvoiceNo]
		,[PONumber]
		,[Success]
		,[GiftCardID]
		,[OrderID]
		,[IPAddress]
		,[ModifiedBy]
		,[DateModified]
		,[MaskAcctNo]
		,[TransType]
		,[ClearDate]
		,[AdminNotes]
		,[OffsetID]
		,[SubscriptionID]
		,[PayMethodID]
		,[StoreID])
	VALUES
		(@CustomerID
		,@PayType
		,@PayDate
		,@Amount
		,@Quantity
		,@AcctNo
		,@ExpRoute
		,@TransID
		,@BillingAddress
		,@BillingCity
		,@BillingState
		,@BillingZip
		,@BillingCountry
		,@Coupon
		,@Notes
		,@Status
		,@AuthCode
		,@BillingName
		,@PortalID
		,@InvoiceNo
		,@PONumber
		,@Success
		,@GiftCardID
		,@OrderID
		,@IPAddress
		,@ModifiedBy
		,@DateModified
		,@MaskAcctNo
		,@TransType
		,@ClearDate
		,@AdminNotes
		,@OffsetID
		,@SubscriptionID
		,@PayMethodID
		,@StoreID)
	SELECT SCOPE_IDENTITY()
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_CreatePaymentImage
	@PayHistID INT = NULL,
	@SignatureData NVARCHAR(MAX) = NULL,
	@CreatedDate DATETIME = NULL,
	@CreatedByUser NVARCHAR(100) = NULL,
	@ModifiedDate DATETIME = NULL,
	@ModifiedByUser NVARCHAR(100) = NULL,
	@PortalID INT = NULL
AS
BEGIN
	DELETE FROM
		{databaseOwner}{objectQualifier}RZC_PayHistImages
	WHERE
		[PayHistID] = @PayHistID
	INSERT INTO
		{databaseOwner}{objectQualifier}RZC_PayHistImages
		([PayHistID]
		,[SignatureData]
		,[CreatedDate]
		,[CreatedByUser]
		,[ModifiedDate]
		,[ModifiedByUser]
		,[PortalID])
	VALUES
		(@PayHistID
		,@SignatureData
		,@CreatedDate
		,@CreatedByUser
		,@ModifiedDate
		,@ModifiedByUser
		,@PortalID)
	SELECT SCOPE_IDENTITY()
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_CreatePaymentMethod
	@PayZoneID INT = NULL,
	@Name NVARCHAR(100) = NULL,
	@Roles VARCHAR(150) = NULL,
	@SurchargeAmount DECIMAL(18,2) = NULL,
	@SurchargePercentage DECIMAL(18,2) = NULL,
	@Step2Label1 NVARCHAR(200) = NULL,
	@Step2Label2 NVARCHAR(200) = NULL,
	@EmailMessage NVARCHAR(500) = NULL,
	@PortalID INT = NULL,
	@Type VARCHAR(150) = NULL,
	@SortOrder INT = NULL,
	@PriceFrom DECIMAL(18,2) = NULL,
	@PriceTo DECIMAL(18,2) = NULL,
	@MonthlyLimit DECIMAL(18,2) = NULL,
	@Active BIT = NULL,
	@DepositRequired BIT = NULL,
	@DepositPercent DECIMAL(18,2) = NULL,
	@Share BIT = NULL,
	@StoreID INT = NULL,
	@GatewayCode NVARCHAR(64) = NULL,
	@GatewayProvider NVARCHAR(64) = NULL,
	@GatewayUserID NVARCHAR(128) = NULL,
	@GatewayPassword NVARCHAR(128) = NULL,
	@GatewayKey NVARCHAR(512) = NULL
AS
BEGIN
	INSERT INTO
		{databaseOwner}{objectQualifier}RZC_PaymentMethods
		([PayZoneID]
		,[Name]
		,[Roles]
		,[SurchargeAmount]
		,[SurchargePercentage]
		,[Step2Label1]
		,[Step2Label2]
		,[EmailMessage]
		,[PortalID]
		,[Type]
		,[SortOrder]
		,[PriceFrom]
		,[PriceTo]
		,[MonthlyLimit]
		,[Active]
		,[DepositRequired]
		,[DepositPercent]
		,[Share]
		,[StoreID]
		,[GatewayCode]
		,[GatewayProvider]
		,[GatewayUserID]
		,[GatewayPassword]
		,[GatewayKey])
	VALUES
		(@PayZoneID
		,@Name
		,@Roles
		,@SurchargeAmount
		,@SurchargePercentage
		,@Step2Label1
		,@Step2Label2
		,@EmailMessage
		,@PortalID
		,@Type
		,@SortOrder
		,@PriceFrom
		,@PriceTo
		,@MonthlyLimit
		,@Active
		,@DepositRequired
		,@DepositPercent
		,@Share
		,@StoreID
		,@GatewayCode
		,@GatewayProvider
		,@GatewayUserID
		,@GatewayPassword
		,@GatewayKey)
	SELECT SCOPE_IDENTITY()
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_CreatePriceClass
	@PriceClass VARCHAR(20) = NULL,
	@QtyFrom INT = NULL,
	@QtyTo INT = NULL,
	@Price MONEY = NULL,
	@PortalID INT = NULL,
	@DiscountPercent DECIMAL(10,2) = NULL,
	@AdjustType VARCHAR(50) = NULL,
	@Description VARCHAR(200) = NULL,
	@StoreID INT = NULL
AS
BEGIN
	INSERT INTO
		{databaseOwner}{objectQualifier}RZC_PriceClass
		([PriceClass]
		,[QtyFrom]
		,[QtyTo]
		,[Price]
		,[PortalID]
		,[DiscountPercent]
		,[AdjustType]
		,[Description]
		,[StoreID])
	VALUES
		(@PriceClass
		,@QtyFrom
		,@QtyTo
		,@Price
		,@PortalID
		,@DiscountPercent
		,@AdjustType
		,@Description
		,@StoreID)
	SELECT SCOPE_IDENTITY()
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateProduct
	@Manufacturer NVARCHAR(50) = NULL,
	@ModelNumber NVARCHAR(50) = NULL,
	@ModelName NVARCHAR(200) = NULL,
	@UnitCost MONEY = NULL,
	@QuantityOnHand INT = NULL,
	@Summary NVARCHAR(1000) = NULL,
	@Description NTEXT = NULL,
	@DownloadUrl NVARCHAR(1000) = NULL,
	@Featured BIT = NULL,
	@Archived BIT = NULL,
	@Weight DECIMAL(12,2) = NULL,
	@SortOrder INT = NULL,
	@ExcludeCoupon BIT = NULL,
	@Items INT = NULL,
	@Share BIT = NULL,
	@CreatedByUser NVARCHAR(100) = NULL,
	@CreatedDate DATETIME = NULL,
	@LogicallyDeleted BIT = NULL,
	@Recurring BIT = NULL,
	@SubscriptionInterval VARCHAR(50) = NULL,
	@RecurringOccurances INT = NULL,
	@UrlGUID VARCHAR(1000) = NULL,
	@EncryptUrl BIT = NULL,
	@AddDNNRole VARCHAR(50) = NULL,
	@RequireLogin BIT = NULL,
	@MasterBundleID INT = NULL,
	@BundleID INT = NULL,
	@RoleExpireDays NVARCHAR(500) = NULL,
	@MemberPrice MONEY = NULL,
	@TaxExempt BIT = NULL,
	@PortalID INT = NULL,
	@ShipCodes VARCHAR(100) = NULL,
	@ShipText NVARCHAR(500) = NULL,
	@AffiliateURL NVARCHAR(1000) = NULL,
	@TitleTag VARCHAR(85) = NULL,
	@DescriptionTag NVARCHAR(200) = NULL,
	@KeywordTag NVARCHAR(300) = NULL,
	@ShipCost MONEY = NULL,
	@RequireCoupon BIT = NULL,
	@Description2 NTEXT = NULL,
	@Description3 NTEXT = NULL,
	@Description4 NTEXT = NULL,
	@Description5 NTEXT = NULL,
	@TabName1 VARCHAR(50) = NULL,
	@TabName2 VARCHAR(50) = NULL,
	@TabName3 VARCHAR(50) = NULL,
	@TabName4 VARCHAR(50) = NULL,
	@TabName5 VARCHAR(50) = NULL,
	@AutoGUID BIT = NULL,
	@SEOURL VARCHAR(80) = NULL,
	@HideThumbnail BIT = NULL,
	@HidePrice BIT = NULL,
	@PriceClass VARCHAR(20) = NULL,
	@MinOrderQty INT = NULL,
	@ChargeHandling BIT = NULL,
	@LeadTime VARCHAR(50) = NULL,
	@HideQuantity BIT = NULL,
	@PriceUnits NVARCHAR(50) = NULL,
	@MaxOrderQty INT = NULL,
	@Width INT = NULL,
	@Height INT = NULL,
	@Length INT = NULL,
	@RecurringStartDate VARCHAR(15) = NULL,
	@ExcludeVariantRecur BIT = NULL,
	@WholesalePrice MONEY = NULL,
	@SalePrice MONEY = NULL,
	@HideProduct BIT = NULL,
	@RemoveDNNRole VARCHAR(70) = NULL,
	@ShowProductRole BIT = NULL,
	@TaxRate FLOAT = NULL,
	@Upsell BIT = NULL,
	@EnableTrial BIT = NULL,
	@TrialInterval VARCHAR(50) = NULL,
	@TrialOccurences VARCHAR(50) = NULL,
	@TrialAmount MONEY = NULL,
	@UseCompanyLogo BIT = NULL,
	@UserEnteredAmount BIT = NULL,
	@Booking BIT = NULL,
	@BookingUnits NVARCHAR(100) = NULL,
	@RecurStartDateSetup VARCHAR(50) = NULL,
	@UpdatedDate DATETIME = NULL,
	@ProductDetailUrl NVARCHAR(1000) = NULL,
	@GiftCard BIT = NULL,
	@TaxableAmount MONEY = NULL,
	@SaleStartDate DATETIME = NULL,
	@SaleEndDate DATETIME = NULL,
	@CompareGroup NVARCHAR(150) = NULL,
	@ProductTypeID INT = NULL,
	@MaxDownloadAttempts INT = NULL,
	@MaxDownloadDays INT = NULL,
	@ActiveFrom DATETIME = NULL,
	@ActiveTo DATETIME = NULL,
	@StoreID INT = NULL
AS
BEGIN
	INSERT INTO
		{databaseOwner}{objectQualifier}RZC_Products
		([Manufacturer]
		,[ModelNumber]
		,[ModelName]
		,[UnitCost]
		,[QuantityOnHand]
		,[Summary]
		,[Description]
		,[DownloadUrl]
		,[Featured]
		,[Archived]
		,[Weight]
		,[SortOrder]
		,[ExcludeCoupon]
		,[Items]
		,[Share]
		,[CreatedByUser]
		,[CreatedDate]
		,[LogicallyDeleted]
		,[Recurring]
		,[SubscriptionInterval]
		,[RecurringOccurances]
		,[UrlGUID]
		,[EncryptUrl]
		,[AddDNNRole]
		,[RequireLogin]
		,[MasterBundleID]
		,[BundleID]
		,[RoleExpireDays]
		,[MemberPrice]
		,[TaxExempt]
		,[PortalID]
		,[ShipCodes]
		,[ShipText]
		,[AffiliateURL]
		,[TitleTag]
		,[DescriptionTag]
		,[KeywordTag]
		,[ShipCost]
		,[RequireCoupon]
		,[Description2]
		,[Description3]
		,[Description4]
		,[Description5]
		,[TabName1]
		,[TabName2]
		,[TabName3]
		,[TabName4]
		,[TabName5]
		,[AutoGUID]
		,[SEOURL]
		,[HideThumbnail]
		,[HidePrice]
		,[PriceClass]
		,[MinOrderQty]
		,[ChargeHandling]
		,[LeadTime]
		,[HideQuantity]
		,[PriceUnits]
		,[MaxOrderQty]
		,[Width]
		,[Height]
		,[Length]
		,[RecurringStartDate]
		,[ExcludeVariantRecur]
		,[WholesalePrice]
		,[SalePrice]
		,[HideProduct]
		,[RemoveDNNRole]
		,[ShowProductRole]
		,[TaxRate]
		,[Upsell]
		,[EnableTrial]
		,[TrialInterval]
		,[TrialOccurences]
		,[TrialAmount]
		,[UseCompanyLogo]
		,[UserEnteredAmount]
		,[Booking]
		,[BookingUnits]
		,[RecurStartDateSetup]
		,[UpdatedDate]
		,[ProductDetailUrl]
		,[GiftCard]
		,[TaxableAmount]
		,[SaleStartDate]
		,[SaleEndDate]
		,[CompareGroup]
		,[ProductTypeID]
		,[MaxDownloadAttempts]
		,[MaxDownloadDays]
		,[ActiveFrom]
		,[ActiveTo]
		,[StoreID])
	VALUES
		(@Manufacturer
		,@ModelNumber
		,@ModelName
		,@UnitCost
		,@QuantityOnHand
		,@Summary
		,@Description
		,@DownloadUrl
		,@Featured
		,@Archived
		,@Weight
		,@SortOrder
		,@ExcludeCoupon
		,@Items
		,@Share
		,@CreatedByUser
		,@CreatedDate
		,@LogicallyDeleted
		,@Recurring
		,@SubscriptionInterval
		,@RecurringOccurances
		,@UrlGUID
		,@EncryptUrl
		,@AddDNNRole
		,@RequireLogin
		,@MasterBundleID
		,@BundleID
		,@RoleExpireDays
		,@MemberPrice
		,@TaxExempt
		,@PortalID
		,@ShipCodes
		,@ShipText
		,@AffiliateURL
		,@TitleTag
		,@DescriptionTag
		,@KeywordTag
		,@ShipCost
		,@RequireCoupon
		,@Description2
		,@Description3
		,@Description4
		,@Description5
		,@TabName1
		,@TabName2
		,@TabName3
		,@TabName4
		,@TabName5
		,@AutoGUID
		,@SEOURL
		,@HideThumbnail
		,@HidePrice
		,@PriceClass
		,@MinOrderQty
		,@ChargeHandling
		,@LeadTime
		,@HideQuantity
		,@PriceUnits
		,@MaxOrderQty
		,@Width
		,@Height
		,@Length
		,@RecurringStartDate
		,@ExcludeVariantRecur
		,@WholesalePrice
		,@SalePrice
		,@HideProduct
		,@RemoveDNNRole
		,@ShowProductRole
		,@TaxRate
		,@Upsell
		,@EnableTrial
		,@TrialInterval
		,@TrialOccurences
		,@TrialAmount
		,@UseCompanyLogo
		,@UserEnteredAmount
		,@Booking
		,@BookingUnits
		,@RecurStartDateSetup
		,@UpdatedDate
		,@ProductDetailUrl
		,@GiftCard
		,@TaxableAmount
		,@SaleStartDate
		,@SaleEndDate
		,@CompareGroup
		,@ProductTypeID
		,@MaxDownloadAttempts
		,@MaxDownloadDays
		,@ActiveFrom
		,@ActiveTo
		,@StoreID)
	SELECT SCOPE_IDENTITY()
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateProductCategory
	@CategoryID INT = NULL,
	@ProductID INT = NULL
AS
BEGIN
	INSERT INTO
		{databaseOwner}{objectQualifier}RZC_CategoryProduct
		([CategoryID]
		,[ProductID])
	VALUES
		(@CategoryID
		,@ProductID)
	SELECT SCOPE_IDENTITY()
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateProductCustomField
	@ProductID INT = NULL,
	@Label NVARCHAR(150) = NULL,
	@Type VARCHAR(50) = NULL,
	@Value NVARCHAR(500) = NULL,
	@CustomFieldValue NVARCHAR(1024) = NULL,
	@TabName VARCHAR(50) = NULL,
	@SortOrder INT = NULL,
	@Share BIT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	INSERT INTO
		{databaseOwner}{objectQualifier}RZC_ProductCustomFields
		([ProductID]
		,[Label]
		,[Type]
		,[Value]
		,[CustomFieldValue]
		,[TabName]
		,[SortOrder]
		,[Share]
		,[PortalID])
	VALUES
		(@ProductID
		,@Label
		,@Type
		,@Value
		,@CustomFieldValue
		,@TabName
		,@SortOrder
		,@Share
		,@PortalID)
	SELECT SCOPE_IDENTITY()
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateProductDownloadHistory
	@ProductID INT = NULL,
	@OrderDetailGUID UNIQUEIDENTIFIER = NULL,
	@DownloadUrl NVARCHAR(2048) = NULL,
	@DownloadDate DATETIME = NULL,
	@IPAddress VARCHAR(45) = NULL,
	@UserAgent NVARCHAR(512) = NULL,
	@PortalID INT = NULL
AS
BEGIN
	INSERT INTO {databaseOwner}{objectQualifier}RZC_ProductDownloadHistory
		([ProductID]
		,[OrderDetailGUID]
		,[DownloadUrl]
		,[DownloadDate]
		,[IPAddress]
		,[UserAgent]
		,[PortalID])
	VALUES
		(@ProductID
		,@OrderDetailGUID
		,@DownloadUrl
		,@DownloadDate
		,@IPAddress
		,@UserAgent
		,@PortalID)
	SELECT SCOPE_IDENTITY()
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateProductII
	@ProductID INT = NULL,
	@ShowOrderAsIs BIT = NULL,
	@Ecard BIT = NULL,
	@BinLocation NVARCHAR(150) = NULL,
	@NumberOfBoxes NVARCHAR(50) = NULL,
	@DateAddedToInventory DATETIME = NULL,
	@Client NVARCHAR(200) = NULL,
	@Owner NVARCHAR(200) = NULL,
	@ShowDatePicker BIT = NULL,
	@ShowTimePicker BIT = NULL,
	@ProductFlags BIGINT = NULL,
	@SafetyStockQty INT = NULL,
	@MinPartialAmount DECIMAL(18,2) = NULL,
	@BookingFields VARCHAR(16) = NULL,
	@BookingDuration VARCHAR(32) = NULL,
	@FirstBookingDate INT = NULL,
	@MinBookingDuration INT = NULL,
	@MaxBookingDuration INT = NULL,
	@MinBookingTimeDuration INT = NULL,
	@MaxBookingTimeDuration INT = NULL,
	@CustomModalTabID INT = NULL,
	@AddRolesEffectiveInCart BIT = NULL,
	@RemoveRolesEffectiveInCart BIT = NULL
AS
BEGIN
	INSERT INTO
		{databaseOwner}{objectQualifier}RZC_Products2
		([ProductID]
		,[ShowOrderAsIs]
		,[Ecard]
		,[BinLocation]
		,[NumberOfBoxes]
		,[DateAddedToInventory]
		,[Client]
		,[Owner]
		,[ShowDatePicker]
		,[ShowTimePicker]
		,[ProductFlags]
		,[SafetyStockQty]
		,[MinPartialAmount]
		,[BookingFields]
		,[BookingDuration]
		,[FirstBookingDate]
		,[MinBookingDuration]
		,[MaxBookingDuration]
		,[MinBookingTimeDuration]
		,[MaxBookingTimeDuration]
		,[CustomModalTabID]
		,[AddRolesEffectiveInCart]
		,[RemoveRolesEffectiveInCart])
	VALUES
		(@ProductID
		,@ShowOrderAsIs
		,@Ecard
		,@BinLocation
		,@NumberOfBoxes
		,@DateAddedToInventory
		,@Client
		,@Owner
		,@ShowDatePicker
		,@ShowTimePicker
		,@ProductFlags
		,@SafetyStockQty
		,@MinPartialAmount
		,@BookingFields
		,@BookingDuration
		,@FirstBookingDate
		,@MinBookingDuration
		,@MaxBookingDuration
		,@MinBookingTimeDuration
		,@MaxBookingTimeDuration
		,@CustomModalTabID
		,@AddRolesEffectiveInCart
		,@RemoveRolesEffectiveInCart)
	SELECT @ProductID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateProductImage
	@ProductID INT = NULL,
	@SortOrder INT = NULL,
	@ThumbImage NVARCHAR(500) = NULL,
	@LargeImage NVARCHAR(500) = NULL,
	@ZoomImage NVARCHAR(500) = NULL,
	@Title NVARCHAR(100) = NULL,
	@AltTag NVARCHAR(200) = NULL,
	@Status SMALLINT = NULL,
	@CreatedByUser NVARCHAR(100) = NULL,
	@PortalID INT = NULL
AS
BEGIN
	INSERT INTO
		{databaseOwner}{objectQualifier}RZC_ProductImages
		([ProductID]
		,[SortOrder]
		,[ThumbImage]
		,[LargeImage]
		,[ZoomImage]
		,[Title]
		,[AltTag]
		,[Status]
		,[CreatedDate]
		,[CreatedByUser]
		,[PortalID])
	VALUES
		(@ProductID
		,@SortOrder
		,@ThumbImage
		,@LargeImage
		,@ZoomImage
		,@Title
		,@AltTag
		,@Status
		,GETDATE()
		,@CreatedByUser
		,@PortalID)
	SELECT SCOPE_IDENTITY()
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateProductInventory
	@ProductID INT = NULL,
	@VariantName VARCHAR(500) = NULL,
	@Sku VARCHAR(50) = NULL,
	@QtyOnHand INT = NULL
AS
BEGIN
	INSERT INTO
		{databaseOwner}{objectQualifier}RZC_ProductVariantInventory
		([ProductID]
		,[VariantName]
		,[Sku]
		,[QtyOnHand])
	VALUES
		(@ProductID
		,@VariantName
		,@Sku
		,@QtyOnHand)
	SELECT SCOPE_IDENTITY()
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateProductInventoryVariant
	@ProductID INT = NULL,
	@VariantInventoryID INT = NULL,
	@VariantID INT = NULL
AS
BEGIN
	INSERT INTO
		{databaseOwner}{objectQualifier}RZC_ProductVariantInvLinker
		([ProductID]
		,[VariantInventoryID]
		,[VariantID])
	VALUES
		(@ProductID
		,@VariantInventoryID
		,@VariantID)
	SELECT SCOPE_IDENTITY()
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateProductQuantityDiscount
	@ProductID INT = NULL,
	@QtyFrom INT = NULL,
	@QtyTo INT = NULL,
	@Price MONEY = NULL,
	@AdjustType VARCHAR(50) = NULL,
	@RoleID INT = NULL,
	@PaymentMethod VARCHAR(100) = NULL,
	@DisplayLabel NVARCHAR(50) = NULL,
	@DiscountLevel VARCHAR(512) = NULL,
	@PortalID INT = NULL
AS
BEGIN
	INSERT INTO
		{databaseOwner}{objectQualifier}RZC_ProductQtyDiscounts
		([ProductID]
		,[QtyFrom]
		,[QtyTo]
		,[Price]
		,[AdjustType]
		,[RoleID]
		,[PaymentMethod]
		,[DisplayLabel]
		,[DiscountLevel]
		,[PortalID])
	VALUES
		(@ProductID
		,@QtyFrom
		,@QtyTo
		,@Price
		,@AdjustType
		,@RoleID
		,@PaymentMethod
		,@DisplayLabel
		,@DiscountLevel
		,@PortalID)
	SELECT SCOPE_IDENTITY()
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateProductReview
	@ProductID INT = NULL,
	@DNNUserName VARCHAR(50) = NULL,
	@Rate DECIMAL(4,2) = NULL,
	@Comments VARCHAR(2000) = NULL,
	@NickName VARCHAR(50) = NULL
AS
BEGIN
	DECLARE @ReviewID [INT]
	SELECT
		@ReviewID = PR.[ReviewID]
	FROM
		{databaseOwner}{objectQualifier}RZC_ProductReviews PR
	WHERE
		PR.[ProductID] = @ProductID
		AND (
			PR.[DNNUserName] = @DNNUserName
			OR (
				PR.[NickName] = @NickName AND (PR.[DNNUserName] IS NULL OR PR.[DNNUserName] = '')
			)
		)
	IF @ReviewID IS NOT NULL
		BEGIN
			UPDATE
				{databaseOwner}{objectQualifier}RZC_ProductReviews
			SET
				[Rate] = @Rate,
				[Comments] = @Comments,
				[NickName] = @NickName,
				[ReviewDate] = GETDATE(),
				[Approved] = 0,
				[DateApproved] = NULL
			WHERE
				[ReviewID] = @ReviewID
			SELECT @ReviewID
		END
	ELSE
		BEGIN
			INSERT INTO {databaseOwner}{objectQualifier}RZC_ProductReviews
				([ProductID]
				,[DNNUserName]
				,[Rate]
				,[Comments]
				,[NickName]
				,[ReviewDate]
				,[Approved]
				,[DateApproved])
			 VALUES
				(@ProductID
				,@DNNUserName
				,@Rate
				,@Comments
				,@NickName
				,GETDATE()
				,0
				,NULL)
			SELECT SCOPE_IDENTITY()
		END
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateProductRoleDiscount
	@ProductID INT = NULL,
	@RoleID INT = NULL,
	@DiscountPercent DECIMAL(6,2) = NULL,
	@DiscountAmount MONEY = NULL,
	@DiscountLevel VARCHAR(512) = NULL,
	@UserName NVARCHAR(100) = NULL,
	@StartDate DATETIME = NULL,
	@EndDate DATETIME = NULL,
	@InvertRole BIT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	INSERT INTO
		{databaseOwner}{objectQualifier}RZC_ProductDiscountsByRole
		([ProductID]
		,[RoleID]
		,[DiscountPercent]
		,[DiscountAmount]
		,[DiscountLevel]
		,[UserName]
		,[StartDate]
		,[EndDate]
		,[InvertRole]
		,[PortalID])
	VALUES
		(@ProductID
		,@RoleID
		,@DiscountPercent
		,@DiscountAmount
		,@DiscountLevel
		,@UserName
		,@StartDate
		,@EndDate
		,@InvertRole
		,@PortalID)
	SELECT SCOPE_IDENTITY()
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateProductSearchKey
	@ProductID INT = NULL,
	@SearchTerm NVARCHAR(250) = NULL,
	@SearchModuleDD1 NVARCHAR(500) = NULL,
	@SearchModuleDD2 NVARCHAR(500) = NULL
AS
BEGIN
	INSERT INTO {databaseOwner}{objectQualifier}RZC_SearchKeys
		([ProductID]
		,[SearchTerm]
		,[SearchModuleDD1]
		,[SearchModuleDD2])
		VALUES
		(@ProductID
		,@SearchTerm
		,@SearchModuleDD1
		,@SearchModuleDD2)
	SELECT SCOPE_IDENTITY()
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateProductTemplateField
	@Label NVARCHAR(256) = NULL,
	@Type VARCHAR(50) = NULL,
	@Value NVARCHAR(2048) = NULL,
	@SortOrder INT = NULL,
	@Share BIT = NULL,
	@PortalID INT = NULL,
	@CategoryID INT = NULL,
	@StoreID INT = NULL
AS
BEGIN
	INSERT INTO
		{databaseOwner}{objectQualifier}RZC_ProductTemplate
		([Label]
		,[Type]
		,[Value]
		,[SortOrder]
		,[Share]
		,[PortalID]
		,[CategoryID]
		,[StoreID])
	VALUES
		(@Label
		,@Type
		,@Value
		,@SortOrder
		,@Share
		,@PortalID
		,@CategoryID
		,@StoreID)
	SELECT SCOPE_IDENTITY()
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateProductVariant
	@ProductID INT = NULL,
	@VariantGroup VARCHAR(50) = NULL,
	@VariantName VARCHAR(50) = NULL,
	@VariantImage NVARCHAR(500) = NULL,
	@PriceAdjustment MONEY = NULL,
	@WeightAdjustment FLOAT = NULL,
	@SortOrder INT = NULL,
	@PortalID INT = NULL,
	@VariantRequired BIT = NULL,
	@VariantDisplayType VARCHAR(50) = NULL,
	@VariantGroupID INT = NULL,
	@Sku VARCHAR(50) = NULL,
	@QtyOnHand INT = NULL,
	@ConditionalGroupID INT = NULL,
	@VariantZoomImage NVARCHAR(200) = NULL,
	@VariantIconImage NVARCHAR(200) = NULL,
	@DropDownImageOption VARCHAR(50) = NULL,
	@IconImageOption VARCHAR(50) = NULL,
	@RenderTextInImage BIT = NULL,
	@LifecycleStatus VARCHAR(50) = NULL,
	@EnablePriceAdjustment BIT = NULL,
	@SalePrice MONEY = NULL,
	@Notes NVARCHAR(500) = NULL,
	@FeaturedVariant BIT = NULL,
	@TaxableAmount MONEY = NULL,
	@PriceType VARCHAR(50) = NULL,
	@VariantDesc VARCHAR(2048) = NULL
AS
BEGIN
	INSERT INTO
		{databaseOwner}{objectQualifier}RZC_ProductVariant
		([ProductID]
		,[VariantGroup]
		,[VariantName]
		,[VariantImage]
		,[PriceAdjustment]
		,[WeightAdjustment]
		,[SortOrder]
		,[PortalID]
		,[VariantRequired]
		,[VariantDisplayType]
		,[VariantGroupID]
		,[Sku]
		,[QtyOnHand]
		,[ConditionalGroupID]
		,[VariantZoomImage]
		,[VariantIconImage]
		,[DropDownImageOption]
		,[IconImageOption]
		,[RenderTextInImage]
		,[LifecycleStatus]
		,[EnablePriceAdjustment]
		,[SalePrice]
		,[Notes]
		,[FeaturedVariant]
		,[TaxableAmount]
		,[PriceType]
		,[VariantDesc])
	VALUES
		(@ProductID
		,@VariantGroup
		,@VariantName
		,@VariantImage
		,@PriceAdjustment
		,@WeightAdjustment
		,@SortOrder
		,@PortalID
		,@VariantRequired
		,@VariantDisplayType
		,@VariantGroupID
		,@Sku
		,@QtyOnHand
		,@ConditionalGroupID
		,@VariantZoomImage
		,@VariantIconImage
		,@DropDownImageOption
		,@IconImageOption
		,@RenderTextInImage
		,@LifecycleStatus
		,@EnablePriceAdjustment
		,@SalePrice
		,@Notes
		,@FeaturedVariant
		,@TaxableAmount
		,@PriceType
		,@VariantDesc)
	SELECT SCOPE_IDENTITY()
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateProductVariantGroup
	@ProductID INT = NULL,
	@VariantGroup VARCHAR(50) = NULL,
	@VariantHelpURL VARCHAR(150) = NULL,
	@PortalID INT = NULL,
	@Hide BIT = NULL,
	@GroupDescription NVARCHAR(2048) = NULL,
	@SortOrder INT = NULL
AS
BEGIN
	INSERT INTO
		{databaseOwner}{objectQualifier}RZC_ProductVariantGroup
		([ProductID]
		,[VariantGroup]
		,[VariantHelpURL]
		,[PortalID]
		,[Hide]
		,[GroupDescription]
		,[SortOrder])
	VALUES
		(@ProductID
		,@VariantGroup
		,@VariantHelpURL
		,@PortalID
		,@Hide
		,@GroupDescription
		,@SortOrder)
	SELECT SCOPE_IDENTITY()
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateProductVariantRole
	@ManageRoleID INT = NULL,
	@VariantID INT = NULL
AS
BEGIN
	INSERT INTO
		{databaseOwner}{objectQualifier}RZC_ProductVariantRole
		([ManageRoleID]
		,[VariantID])
	VALUES
		(@ManageRoleID
		,@VariantID)
	SELECT SCOPE_IDENTITY()
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateProductVisibilityRole
	@ProductID INT = NULL,
	@RoleID INT = NULL,
	@Action VARCHAR(16) = NULL,
	@Message NVARCHAR(512) = NULL
AS
BEGIN
	INSERT INTO
		{databaseOwner}{objectQualifier}RZC_ProductVisibilityRole
		([ProductID]
		,[RoleID]
		,[Action]
		,[Message])
	VALUES
		(@ProductID
		,@RoleID
		,@Action
		,@Message)
	SELECT SCOPE_IDENTITY()
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateRegionalTax
	@StateText VARCHAR(200) = NULL,
	@State VARCHAR(50) = NULL,
	@CountryCode VARCHAR(50) = NULL,
	@PortalID INT = NULL,
	@ZipCode VARCHAR(50) = NULL,
	@TaxExemptAmount DECIMAL(18,2) = NULL,
	@StoreID INT = NULL
AS
BEGIN
	INSERT INTO
		{databaseOwner}{objectQualifier}RZC_TaxStates
		([StateText]
		,[State]
		,[CountryCode]
		,[PortalID]
		,[ZipCode]
		,[TaxExemptAmount]
		,[StoreID])
	VALUES
		(@StateText
		,@State
		,@CountryCode
		,@PortalID
		,@ZipCode
		,@TaxExemptAmount
		,@StoreID)
	SELECT SCOPE_IDENTITY()
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateRelatedProduct
	@ProductID INT = NULL,
	@RelatedProductID INT = NULL
AS
BEGIN
	INSERT INTO
		{databaseOwner}{objectQualifier}RZC_RelatedProducts
		([ProductID]
		,[RelatedProductID])
	VALUES
		(@ProductID
		,@RelatedProductID)
	SELECT SCOPE_IDENTITY()
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateSavedSearch
	@UserID INT = NULL,
	@Type NVARCHAR(200) = NULL,
	@Name NVARCHAR(200) = NULL,
	@Value NVARCHAR(MAX) = NULL,
	@IsJson BIT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	DECLARE @SavedSearchID [INT]
	SELECT TOP 1
		@SavedSearchID = SS.[SavedSearchID]
	FROM
		{databaseOwner}{objectQualifier}RZC_SavedSearches SS
	WHERE
		SS.[UserID] = @UserID
		AND SS.[Name] = @Name
		AND SS.[PortalID] = @PortalID
	IF @SavedSearchID IS NOT NULL
		BEGIN
			UPDATE
				{databaseOwner}{objectQualifier}RZC_SavedSearches
			SET
				[Type] = @Type,
				[Value] = @Value,
				[IsJson] = @IsJson,
				[DateModified] = GETDATE()
			WHERE
				[SavedSearchID] = @SavedSearchID
			SELECT @SavedSearchID
		END
	ELSE
		BEGIN
			INSERT INTO {databaseOwner}{objectQualifier}RZC_SavedSearches
				([UserID]
				,[Type]
				,[Name]
				,[Value]
				,[IsJson]
				,[DateCreated]
				,[PortalID])
			 VALUES
				(@UserID
				,@Type
				,@Name
				,@Value
				,@IsJson
				,GETDATE()
				,@PortalID)
			SELECT SCOPE_IDENTITY()
		END
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateSessionState
	@ClientGUID [UNIQUEIDENTIFIER] = NULL,
	@UserID INT = NULL,
	@SessionTitle NVARCHAR(150) = NULL,
	@SessionData VARCHAR(MAX) = NULL,
	@PortalID INT = NULL,
	@StoreID INT = NULL
AS
BEGIN
	DECLARE @SessionID [INT]
	SELECT
		@SessionID = SS.[ID]
	FROM
		{databaseOwner}{objectQualifier}RZC_SessionState SS
	WHERE
		SS.[ClientGUID] = @ClientGUID
		AND SS.[UserID] = @UserID
		AND SS.[SessionTitle] = @SessionTitle
		AND SS.[PortalID] = @PortalID
		AND SS.[StoreID] = @StoreID
	IF @SessionID IS NULL
		BEGIN
			INSERT INTO {databaseOwner}{objectQualifier}RZC_SessionState
				([ClientGUID]
				,[UserID]
				,[SessionTitle]
				,[SessionData]
				,[CreatedDate]
				,[ModifiedDate]
				,[PortalID]
				,[StoreID])
			 VALUES
				(@ClientGUID
				,@UserID
				,@SessionTitle
				,@SessionData
				,GETDATE()
				,GETDATE()
				,@PortalID
				,@StoreID)
			SELECT SCOPE_IDENTITY()
		END
	ELSE
		BEGIN
			UPDATE
				{databaseOwner}{objectQualifier}RZC_SessionState
			SET
				[SessionData] = @SessionData,
				[ModifiedDate] = GETDATE()
			WHERE
				[ID] = @SessionID
			SELECT @SessionID
		END
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateShippingAmountCost
	@AmountFrom DECIMAL(18,2) = NULL,
	@AmountTo DECIMAL(18,2) = NULL,
	@Price MONEY = NULL,
	@PortalID INT = NULL,
	@ShipMethodID INT = NULL,
	@CategoryID INT = NULL,
	@IsIntl BIT = NULL,
	@StoreID INT = NULL
AS
BEGIN
	INSERT INTO
		{databaseOwner}{objectQualifier}RZC_ShippingByAmount
		([AmountFrom]
		,[AmountTo]
		,[Price]
		,[PortalID]
		,[ShipMethodID]
		,[CategoryID]
		,[IsIntl]
		,[StoreID])
	VALUES
		(@AmountFrom
		,@AmountTo
		,@Price
		,@PortalID
		,@ShipMethodID
		,@CategoryID
		,@IsIntl
		,@StoreID)
	SELECT SCOPE_IDENTITY()
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateShippingCategory
	@CategoryID INT = NULL,
	@PortalID INT = NULL,
	@StoreID INT = NULL
AS
BEGIN
	INSERT INTO
		{databaseOwner}{objectQualifier}RZC_ShipCategories
		([CategoryID]
		,[PortalID]
		,[StoreID])
	VALUES
		(@CategoryID
		,@PortalID
		,@StoreID)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateShippingPostalCost
	@ZipCode VARCHAR(50) = NULL,
	@Price MONEY = NULL,
	@PortalID INT = NULL,
	@ShipMethodID INT = NULL,
	@CategoryID INT = NULL,
	@Country VARCHAR(50) = NULL,
	@StoreID INT = NULL
AS
BEGIN
	INSERT INTO
		{databaseOwner}{objectQualifier}RZC_ShippingByZipCode
		([ZipCode]
		,[Price]
		,[PortalID]
		,[ShipMethodID]
		,[CategoryID]
		,[Country]
		,[StoreID])
	VALUES
		(@ZipCode
		,@Price
		,@PortalID
		,@ShipMethodID
		,@CategoryID
		,@Country
		,@StoreID)
	SELECT SCOPE_IDENTITY()
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateShippingQuantityCost
	@QuantityFrom INT = NULL,
	@QuantityTo INT = NULL,
	@Price MONEY = NULL,
	@PortalID INT = NULL,
	@ShipMethodID INT = NULL,
	@CategoryID INT = NULL,
	@ZoneID INT = NULL,
	@ZoneName VARCHAR(200) = NULL,
	@StoreID INT = NULL
AS
BEGIN
	INSERT INTO
		{databaseOwner}{objectQualifier}RZC_ShippingByQuantity
		([QuantityFrom]
		,[QuantityTo]
		,[Price]
		,[PortalID]
		,[ShipMethodID]
		,[CategoryID]
		,[ZoneID]
		,[ZoneName]
		,[StoreID])
	VALUES
		(@QuantityFrom
		,@QuantityTo
		,@Price
		,@PortalID
		,@ShipMethodID
		,@CategoryID
		,@ZoneID
		,@ZoneName
		,@StoreID)
	SELECT SCOPE_IDENTITY()
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateShippingWeightCost
	@WeightFrom DECIMAL(18,2) = NULL,
	@WeightTo DECIMAL(18,2) = NULL,
	@Price MONEY = NULL,
	@PortalID INT = NULL,
	@ShipMethodID INT = NULL,
	@CategoryID INT = NULL,
	@ZoneID INT = NULL,
	@ZoneName VARCHAR(200) = NULL,
	@StoreID INT = NULL
AS
BEGIN
	INSERT INTO
		{databaseOwner}{objectQualifier}RZC_ShippingByWeight
		([WeightFrom]
		,[WeightTo]
		,[Price]
		,[PortalID]
		,[ShipMethodID]
		,[CategoryID]
		,[ZoneID]
		,[ZoneName]
		,[StoreID])
	VALUES
		(@WeightFrom
		,@WeightTo
		,@Price
		,@PortalID
		,@ShipMethodID
		,@CategoryID
		,@ZoneID
		,@ZoneName
		,@StoreID)
	SELECT SCOPE_IDENTITY()
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateShippingZone
	@ZoneName NVARCHAR(512) = NULL,
	@Country VARCHAR(1024) = NULL,
	@State VARCHAR(MAX) = NULL,
	@Codes NVARCHAR(MAX) = NULL,
	@Price DECIMAL(18,2) = NULL,
	@PortalID INT = NULL,
	@FreeShipOverAmount DECIMAL(18,2) = NULL,
	@StoreID INT = NULL
AS
BEGIN
	INSERT INTO
		{databaseOwner}{objectQualifier}RZC_ShipZone
		([ZoneName]
		,[Country]
		,[State]
		,[Codes]
		,[Price]
		,[PortalID]
		,[FreeShipOverAmount]
		,[StoreID])
	VALUES
		(@ZoneName
		,@Country
		,@State
		,@Codes
		,@Price
		,@PortalID
		,@FreeShipOverAmount
		,@StoreID)
	SELECT SCOPE_IDENTITY()
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateShoppingCartItem
	@Persistent VARCHAR(16) = NULL,
	@ProductID INT = NULL,
	@ProductName NVARCHAR(255) = NULL,
	@ProductSku VARCHAR(50) = NULL,
	@Quantity DECIMAL(10, 2) = NULL,
	@UnitCost MONEY = NULL,
	@CartCookie VARCHAR(100) = NULL,
	@IsRequired BIT = NULL,
	@PriceClass VARCHAR(20) = NULL,
	@VariantCost DECIMAL(10, 2) = NULL,
	@ImageName VARCHAR(200) = NULL,
	@BundleID INT = NULL,
	@DNNLogin NVARCHAR(100) = NULL,
	@Email NVARCHAR(256) = NULL,
	@Weight DECIMAL(12,2) = NULL,
	@CreateDate DATETIME = NULL,
	@OtherCartFields NVARCHAR(MAX) = NULL,
	@IsBooking BIT = NULL,
	@PortalID INT = NULL,
	@StoreID INT = NULL
AS
BEGIN
	DECLARE @CartID [INT],
			@CartVariantID [INT]
	SELECT
		@CartID = SC.[CartID]
	FROM
		{databaseOwner}{objectQualifier}RZC_ShoppingCart SC
	WHERE
		SC.[ProductID] = @ProductID
		AND SC.[ProductName] = @ProductName
		AND SC.[ProductSku] = @ProductSku
		AND (SC.[CartCookie] = @CartCookie OR (@Persistent <> 'Machine' AND @DNNLogin <> ''))
		AND (SC.[DNNLogin] = @DNNLogin OR @Persistent <> 'User')
		AND SC.[StoreID] = @StoreID
		AND SC.[PortalID] = @PortalID
	SELECT
		@CartVariantID = SCV.[CartVariantID]
	FROM
		{databaseOwner}{objectQualifier}RZC_ShoppingCartVariant SCV
	WHERE
		SCV.[CartID] = @CartID
	IF (@CartID IS NOT NULL) AND (@CartVariantID IS NULL AND @IsBooking <> 1)
		BEGIN
			UPDATE
				{databaseOwner}{objectQualifier}RZC_ShoppingCart
			SET
				[Quantity] += @Quantity,
				[UnitCost] = @UnitCost
			WHERE
				[CartID] = @CartID
			SELECT @CartID
		END
	ELSE
		BEGIN
			INSERT INTO {databaseOwner}{objectQualifier}RZC_ShoppingCart
				([ProductID]
				,[ProductName]
				,[ProductSku]
				,[Quantity]
				,[UnitCost]
				,[CartCookie]
				,[IsRequired]
				,[PriceClass]
				,[VariantCost]
				,[ImageName]
				,[BundleID]
				,[DNNLogin]
				,[Email]
				,[Weight]
				,[CreateDate]
				,[OtherCartFields]
				,[PortalID]
				,[StoreID])
			 VALUES
				(@ProductID
				,@ProductName
				,@ProductSku
				,@Quantity
				,@UnitCost
				,@CartCookie
				,@IsRequired
				,@PriceClass
				,@VariantCost
				,@ImageName
				,@BundleID
				,@DNNLogin
				,@Email
				,@Weight
				,@CreateDate
				,@OtherCartFields
				,@PortalID
				,@StoreID)
			SELECT SCOPE_IDENTITY()
		END
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateShoppingCartVariant
	@CartID INT = NULL,
	@VariantGroupID INT = NULL,
	@VariantGroup VARCHAR(50) = NULL,
	@VariantID INT = NULL,
	@VariantName VARCHAR(50) = NULL,
	@VariantHasText BIT = NULL,
	@VariantText VARCHAR(200) = NULL,
	@PriceCalculated MONEY = NULL
AS
BEGIN
	INSERT INTO {databaseOwner}{objectQualifier}RZC_ShoppingCartVariant
		([CartID]
		,[VariantGroupID]
		,[VariantGroup]
		,[VariantID]
		,[VariantName]
		,[VariantHasText]
		,[VariantText]
		,[PriceCalculated])
	VALUES
		(@CartID
		,@VariantGroupID
		,@VariantGroup
		,@VariantID
		,@VariantName
		,@VariantHasText
		,@VariantText
		,@PriceCalculated)
	SELECT SCOPE_IDENTITY()
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateStore
	@StoreName NVARCHAR(150) = NULL,
	@CreatedBy NVARCHAR(150) = NULL,
	@PortalID INT = NULL
AS
BEGIN
	INSERT INTO
		{databaseOwner}{objectQualifier}RZC_Stores
		([StoreName]
		,[CreatedDate]
		,[CreatedBy]
		,[PortalID])
	VALUES
		(@StoreName
		,GETDATE()
		,@CreatedBy
		,@PortalID)
	SELECT SCOPE_IDENTITY()
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateStorePermission
	@RoleID INT = NULL,
	@Access NVARCHAR(64) = NULL,
	@Section NVARCHAR(64) = NULL,
	@CreatedBy INT = NULL,
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	INSERT INTO {databaseOwner}{objectQualifier}RZC_StorePermissions
		([RoleID]
		,[Access]
		,[Section]
		,[CreatedBy]
		,[DateCreated]
		,[StoreID]
		,[PortalID])
	VALUES
		(@RoleID
		,@Access
		,@Section
		,@CreatedBy
		,GETDATE()
		,@StoreID
		,@PortalID)
	SELECT SCOPE_IDENTITY()
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateSubscription
	@CustomerID INT = NULL,
	@ProductID INT = NULL,
	@CreateDate DATETIME = NULL,
	@CancelDate DATETIME = NULL,
	@SubStartDate DATETIME = NULL,
	@SubEndDate DATETIME = NULL,
	@TransID VARCHAR(50) = NULL,
	@PortalID INT = NULL,
	@IPAddress VARCHAR(50) = NULL,
	@CreatedBy NVARCHAR(100) = NULL,
	@ModifiedBy NVARCHAR(100) = NULL,
	@DateModified DATETIME = NULL,
	@OrderID INT = NULL,
	@OrderDetailID INT = NULL,
	@Amount MONEY = NULL,
	@Interval NVARCHAR(50) = NULL,
	@Occurrences INT = NULL,
	@BillingName NVARCHAR(50) = NULL,
	@BillingAddress NVARCHAR(50) = NULL,
	@BillingCity NVARCHAR(50) = NULL,
	@BillingState NVARCHAR(50) = NULL,
	@BillingCountry NVARCHAR(50) = NULL,
	@BillingZip NVARCHAR(50) = NULL,
	@AcctNo VARCHAR(64) = NULL,
	@MaskAcctNo VARCHAR(50) = NULL,
	@ExpRoute VARCHAR(50) = NULL,
	@Status NVARCHAR(50) = NULL,
	@Suspend SMALLINT = NULL,
	@NextPaymentDate DATE = NULL,
	@PayMethodID INT = NULL,
	@PayType VARCHAR(50) = NULL,
	@StoreID INT = NULL
AS
BEGIN
	INSERT INTO {databaseOwner}{objectQualifier}RZC_SubscriptionSC
		([CustomerID]
		,[ProductID]
		,[CreateDate]
		,[CancelDate]
		,[SubStartDate]
		,[SubEndDate]
		,[TransID]
		,[PortalID]
		,[IPAddress]
		,[CreatedBy]
		,[ModifiedBy]
		,[DateModified]
		,[OrderID]
		,[OrderDetailID]
		,[Amount]
		,[Interval]
		,[Occurrences]
		,[BillingName]
		,[BillingAddress]
		,[BillingCity]
		,[BillingState]
		,[BillingCountry]
		,[BillingZip]
		,[AcctNo]
		,[MaskAcctNo]
		,[ExpRoute]
		,[Status]
		,[Suspend]
		,[NextPaymentDate]
		,[PayMethodID]
		,[PayType]
		,[StoreID])
	VALUES
		(@CustomerID
		,@ProductID
		,@CreateDate
		,@CancelDate
		,@SubStartDate
		,@SubEndDate
		,@TransID
		,@PortalID
		,@IPAddress
		,@CreatedBy
		,@ModifiedBy
		,@DateModified
		,@OrderID
		,@OrderDetailID
		,@Amount
		,@Interval
		,@Occurrences
		,@BillingName
		,@BillingAddress
		,@BillingCity
		,@BillingState
		,@BillingCountry
		,@BillingZip
		,@AcctNo
		,@MaskAcctNo
		,@ExpRoute
		,@Status
		,@Suspend
		,@NextPaymentDate
		,@PayMethodID
		,@PayType
		,@StoreID)
	SELECT SCOPE_IDENTITY()
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateTaxTableEntry
	@State VARCHAR(50) = NULL,
	@County VARCHAR(50) = NULL,
	@City VARCHAR(255) = NULL,
	@TaxRate FLOAT = NULL,
	@PostalCode VARCHAR(50) = NULL,
	@PortalID INT = NULL,
	@StoreID INT = NULL
AS
BEGIN
	INSERT INTO
		{databaseOwner}{objectQualifier}RZC_Tax
		([State]
		,[County]
		,[City]
		,[TaxRate]
		,[PostalCode]
		,[PortalID]
		,[StoreID])
	VALUES
		(@State
		,@County
		,@City
		,@TaxRate
		,@PostalCode
		,@PortalID
		,@StoreID)
	SELECT SCOPE_IDENTITY()
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_CreateVariantConditionalGroup
	@VariantID INT = NULL,
	@VariantGroupID INT = NULL
AS
BEGIN
	INSERT INTO
		{databaseOwner}{objectQualifier}RZC_VariantConditionalGroup
		([VariantID]
		,[VariantGroupID])
	VALUES
		(@VariantID
		,@VariantGroupID)
	SELECT SCOPE_IDENTITY()
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteBookableProductDisabledDate
	@ID INT = NULL
AS
BEGIN
	DELETE FROM
		{databaseOwner}{objectQualifier}RZC_BookingDisabledDates
	WHERE
		[ID] = @ID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteBookableProductDisabledTime
	@ID INT = NULL
AS
BEGIN
	DELETE FROM
		{databaseOwner}{objectQualifier}RZC_BookingDisabledTimes
	WHERE
		[ID] = @ID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteCategory
	@CategoryID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	DELETE FROM
		{databaseOwner}{objectQualifier}RZC_Category
	WHERE
		[CategoryID] = @CategoryID
		AND [PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteCategoryQuantityDiscount
	@QtyDiscountID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	DELETE CQD FROM
		{databaseOwner}{objectQualifier}RZC_CategoryQtyDiscounts CQD
	INNER JOIN
		{databaseOwner}{objectQualifier}RZC_Category C
	ON
		C.[CategoryID] = CQD.[CategoryID]
	WHERE
		CQD.[QtyDiscountID] = @QtyDiscountID
		AND C.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteClientCredential
	@ID BIGINT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	DELETE FROM
		{databaseOwner}{objectQualifier}RZC_ClientCredentials
	WHERE
		[ID] = @ID
		AND [PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteCoupon
	@CouponID INT = NULL
AS
BEGIN
	DELETE FROM
		{databaseOwner}{objectQualifier}RZC_Coupons
	WHERE
		[CouponID] = @CouponID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteCouponProductVariant
	@ID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	DELETE CV FROM
		{databaseOwner}{objectQualifier}RZC_CouponVariant CV
	INNER JOIN
		{databaseOwner}{objectQualifier}RZC_Coupons C
	ON
		C.[CouponID] = CV.[CouponID]
	WHERE
		CV.[ID] = @ID
		AND C.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteCustomer
	@CustomerID INT = NULL
AS
BEGIN
	DELETE FROM
		{databaseOwner}{objectQualifier}RZC_Customer
	WHERE
		[CustomerID] = @CustomerID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteCustomerWalletItem
	@ID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	DELETE FROM
		{databaseOwner}{objectQualifier}RZC_CustomerWallet
	WHERE
		[ID] = @ID
		AND [PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteCustomShipMethod
	@ShipMethodID INT = NULL
AS
BEGIN
	DELETE FROM
		{databaseOwner}{objectQualifier}RZC_ShipMethods
	WHERE
		[ShipMethodID] = @ShipMethodID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteEmailCampaign
	@EmailCampaignID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	DELETE FROM
		{databaseOwner}{objectQualifier}RZC_EmailCampaign
	WHERE
		[EmailCampaignID] = @EmailCampaignID
		AND [PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteEmailTemplate
	@TemplateID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	DELETE FROM
		{databaseOwner}{objectQualifier}RZC_EmailTemplateSC
	WHERE
		[TemplateID] = @TemplateID
		AND [PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteFreeShipping
	@ID INT = NULL
AS
BEGIN
	DELETE FROM
		{databaseOwner}{objectQualifier}RZC_ShipFree
	WHERE
		[ID] = @ID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteFulfillmentDetail
	@ID INT = NULL,
	@FulfillmentID INT = NULL
AS
BEGIN
	DELETE FD FROM
		{databaseOwner}{objectQualifier}RZC_OrderFulfillmentDetails FD
	INNER JOIN
		{databaseOwner}{objectQualifier}RZC_OrderFulfillments F
	ON
		F.[FulfillmentID] = FD.[FulfillmentID]
	WHERE
		FD.[ID] = @ID
		AND F.[FulfillmentID] = @FulfillmentID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteInvoiceTemplate
	@TemplateID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	DELETE FROM
		{databaseOwner}{objectQualifier}RZC_InvoiceTemplate
	WHERE
		[TemplateID] = @TemplateID
		AND [PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteLicenseKey
	@LicenseKeyID INT = NULL
AS
BEGIN
	DELETE FROM
		{databaseOwner}{objectQualifier}RZC_LicenseKey
	WHERE
		[LicenseKeyID] = @LicenseKeyID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteManufacturer
	@ManufacturerID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	DELETE FROM
		{databaseOwner}{objectQualifier}RZC_Manufacturer
	WHERE
		[ManufacturerID] = @ManufacturerID
		AND [PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteOrder
	@OrderID INT = NULL
AS
BEGIN
	DELETE FROM
		{databaseOwner}{objectQualifier}RZC_StoreOrders
	WHERE
		[OrderID] = @OrderID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteOrderDetail
	@OrderDetailID INT = NULL,
	@OrderID INT = NULL
AS
BEGIN
	DELETE FROM
		{databaseOwner}{objectQualifier}RZC_StoreOrderDetails
	WHERE
		[OrderDetailID] = @OrderDetailID
		AND [OrderID] = @OrderID

	DELETE FROM
		{databaseOwner}{objectQualifier}RZC_StoreOrderDetailVariant
	WHERE
		[OrderDetailID] = @OrderDetailID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteOrderDiscount
	@OrderDiscountID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	DELETE FROM
		{databaseOwner}{objectQualifier}RZC_OrderDiscounts
	WHERE
		[OrderDiscountID] = @OrderDiscountID
		AND [PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteOrderFulfillment
	@FulfillmentID INT = NULL,
	@OrderID INT = NULL
AS
BEGIN
	DELETE F FROM
		{databaseOwner}{objectQualifier}RZC_OrderFulfillments F
	INNER JOIN
		{databaseOwner}{objectQualifier}RZC_StoreOrders O
	ON
		O.[OrderID] = F.[OrderID]
	WHERE
		F.[FulfillmentID] = @FulfillmentID
		AND O.[OrderID] = @OrderID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteOrderNote
	@ID INT = NULL,
	@OrderID INT = NULL
AS
BEGIN
	DELETE FROM
		{databaseOwner}{objectQualifier}RZC_OrderNotes
	WHERE
		[ID] = @ID
		AND [OrderID] = @OrderID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_DeletePayment
	@PayHistID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	DELETE FROM
		{databaseOwner}{objectQualifier}RZC_PayHist
	WHERE
		[PayHistID] = @PayHistID
		AND [PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_DeletePaymentMethod
	@PayMethodID INT = NULL
AS
BEGIN
	DELETE FROM
		{databaseOwner}{objectQualifier}RZC_PaymentMethods
	WHERE
		[PayMethodID] = @PayMethodID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_DeletePriceClass
	@PriceClassID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	DELETE FROM
		{databaseOwner}{objectQualifier}RZC_PriceClass
	WHERE
		[PriceClassID] = @PriceClassID
		AND [PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteProduct
	@ProductID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	DELETE FROM
		{databaseOwner}{objectQualifier}RZC_Products
	WHERE
		[ProductID] = @ProductID
		AND [PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteProductCategory
	@ID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	DELETE CP FROM
		{databaseOwner}{objectQualifier}RZC_CategoryProduct CP
	INNER JOIN
		{databaseOwner}{objectQualifier}RZC_Category C
	ON
		C.[CategoryID] = CP.[CategoryID]
	WHERE
		CP.[ID] = @ID
		AND C.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteProductCustomField
	@PCID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	DELETE FROM
		{databaseOwner}{objectQualifier}RZC_ProductCustomFields
	WHERE
		[PCID] = @PCID
		AND [PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteProductII
	@ProductID INT = NULL
AS
BEGIN
	DELETE FROM
		{databaseOwner}{objectQualifier}RZC_Products2
	WHERE
		[ProductID] = @ProductID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteProductImage
	@ID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	DELETE FROM
		{databaseOwner}{objectQualifier}RZC_ProductImages
	WHERE
		[ID] = @ID
		AND [PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteProductInventory
	@VariantInventoryID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	DELETE PVI FROM
		{databaseOwner}{objectQualifier}RZC_ProductVariantInventory PVI
	INNER JOIN
		{databaseOwner}{objectQualifier}RZC_Products P
	ON
		P.[ProductID] = PVI.[ProductID]
	WHERE
		PVI.[VariantInventoryID] = @VariantInventoryID
		AND P.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteProductManageRole
	@ProductID INT = NULL,
	@RoleID INT = NULL
AS
BEGIN
	DELETE PVR FROM
		{databaseOwner}{objectQualifier}RZC_ProductVariantRole PVR
	INNER JOIN
		{databaseOwner}{objectQualifier}RZC_ProductManageRole PMR
	ON
		PMR.[ID] = PVR.[ManageRoleID]
	WHERE
		PMR.[ProductID] = @ProductID
		AND PMR.[RoleID] = @RoleID

	DELETE PMR FROM
		{databaseOwner}{objectQualifier}RZC_ProductManageRole PMR
	WHERE
		PMR.[ProductID] = @ProductID
		AND PMR.[RoleID] = @RoleID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteProductQuantityDiscount
	@QtyDiscountID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	DELETE FROM
		{databaseOwner}{objectQualifier}RZC_ProductQtyDiscounts
	WHERE
		[QtyDiscountID] = @QtyDiscountID
		AND [PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteProductReview
	@ReviewID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	DELETE PR FROM
		{databaseOwner}{objectQualifier}RZC_ProductReviews PR
	INNER JOIN
		{databaseOwner}{objectQualifier}RZC_Products P
	ON
		P.[ProductID] = PR.[ProductID]
	WHERE
		PR.[ReviewID] = @ReviewID
		AND P.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteProductRoleDiscount
	@DiscountID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	DELETE FROM
		{databaseOwner}{objectQualifier}RZC_ProductDiscountsByRole
	WHERE
		[DiscountID] = @DiscountID
		AND ([PortalID] = @PortalID OR [PortalID] IS NULL)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteProductSearchKey
	@iIndex INT = NULL,
	@ProductID INT = NULL
AS
BEGIN
	DELETE FROM
		{databaseOwner}{objectQualifier}RZC_SearchKeys
	WHERE
		[iIndex] = @iIndex
		AND [ProductID] = @ProductID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteProductTemplateField
	@PTID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	DELETE FROM
		{databaseOwner}{objectQualifier}RZC_ProductTemplate
	WHERE
		[PTID] = @PTID
		AND [PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteProductVariant
	@VariantID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	DELETE FROM
		{databaseOwner}{objectQualifier}RZC_ProductVariant
	WHERE
		[VariantID] = @VariantID
		AND [PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteProductVariantGroup
	@VariantGroupID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	DELETE FROM
		{databaseOwner}{objectQualifier}RZC_ProductVariantGroup
	WHERE
		[VariantGroupID] = @VariantGroupID
		AND [PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteRegionalTax
	@TaxStateId INT = NULL
AS
BEGIN
	DELETE FROM
		{databaseOwner}{objectQualifier}RZC_TaxStates
	WHERE
		[TaxStateId] = @TaxStateId
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteSavedShoppingCart
	@CartID INT = NULL,
	@DNNLogin VARCHAR(50) = NULL
AS
BEGIN
	DELETE FROM
		{databaseOwner}{objectQualifier}RZC_SavedCartDetailVariant
	WHERE
		[CartDetailID] IN (
			SELECT
				SCD.[CartDetailID]
			FROM
				{databaseOwner}{objectQualifier}RZC_SavedCartDetail SCD
			WHERE
				SCD.[CartID] IN (
					SELECT
						SC.[CartID]
					FROM
						{databaseOwner}{objectQualifier}RZC_SavedCart SC
					WHERE
						SC.[CartID] = @CartID
						AND SC.[DNNLogin] = @DNNLogin
				)
		)
	DELETE FROM
		{databaseOwner}{objectQualifier}RZC_SavedCartDetail
	WHERE
		[CartID] IN (
			SELECT
				SC.[CartID]
			FROM
				{databaseOwner}{objectQualifier}RZC_SavedCart SC
			WHERE
				SC.[CartID] = @CartID
				AND SC.[DNNLogin] = @DNNLogin
		)

	DELETE FROM
		{databaseOwner}{objectQualifier}RZC_SavedCart
	WHERE
		[CartID] = @CartID
		AND [DNNLogin] = @DNNLogin
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteShippingAmountCost
	@ShipCostID INT = NULL
AS
BEGIN
	DELETE FROM
		{databaseOwner}{objectQualifier}RZC_ShippingByAmount
	WHERE
		[ShipCostID] = @ShipCostID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteShippingCategory
	@CategoryID INT = NULL,
	@StoreID INT = NULL
AS
BEGIN
	DELETE FROM
		{databaseOwner}{objectQualifier}RZC_ShipCategories
	WHERE
		[CategoryID] = @CategoryID
		AND [StoreID] = @StoreID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteShippingPostalCost
	@ShipCostID INT = NULL
AS
BEGIN
	DELETE FROM
		{databaseOwner}{objectQualifier}RZC_ShippingByZipCode
	WHERE
		[ShipCostID] = @ShipCostID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteShippingQuantityCost
	@ShipCostID INT = NULL
AS
BEGIN
	DELETE FROM
		{databaseOwner}{objectQualifier}RZC_ShippingByQuantity
	WHERE
		[ShipCostID] = @ShipCostID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteShippingWeightCost
	@ShipCostID INT = NULL
AS
BEGIN
	DELETE FROM
		{databaseOwner}{objectQualifier}RZC_ShippingByWeight
	WHERE
		[ShipCostID] = @ShipCostID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteShippingZone
	@ZoneID INT = NULL
AS
BEGIN
	DELETE FROM
		{databaseOwner}{objectQualifier}RZC_ShipZone
	WHERE
		[ZoneID] = @ZoneID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteShoppingCartItem
	@Persistent VARCHAR(16) = NULL,
	@CartCookie VARCHAR(100) = NULL,
	@DNNLogin NVARCHAR(100) = NULL,
	@CartID INT = NULL,
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	DELETE FROM
		{databaseOwner}{objectQualifier}RZC_ShoppingCartVariant
	WHERE
		[CartID] IN (
			SELECT
				SC.[CartID]
			FROM
				{databaseOwner}{objectQualifier}RZC_ShoppingCart SC
			WHERE
				(SC.[CartCookie] = @CartCookie OR (@Persistent <> 'Machine' AND @DNNLogin <> ''))
				AND (SC.[DNNLogin] = @DNNLogin OR @Persistent <> 'User')
				AND SC.[CartID] = @CartID
				AND SC.[StoreID] = @StoreID
				AND SC.[PortalID] = @PortalID
		)
	DELETE FROM
		{databaseOwner}{objectQualifier}RZC_ShoppingCart
	WHERE
		([CartCookie] = @CartCookie OR (@Persistent <> 'Machine' AND @DNNLogin <> ''))
		AND ([DNNLogin] = @DNNLogin OR @Persistent <> 'User')
		AND [CartID] = @CartID
		AND [StoreID] = @StoreID
		AND [PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteStore
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	DELETE FROM
		{databaseOwner}{objectQualifier}RZC_Stores
	WHERE
		[StoreID] = @StoreID
		AND [PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteStorePermission
	@ID INT = NULL,
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	DELETE FROM
		{databaseOwner}{objectQualifier}RZC_StorePermissions
	WHERE
		[ID] = @ID
		AND [StoreID] = @StoreID
		AND [PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteSubscription
	@SubscriptionID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	DELETE FROM
		{databaseOwner}{objectQualifier}RZC_SubscriptionSC
	WHERE
		[SubscriptionID] = @SubscriptionID
		AND [PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_DeleteUserSavedSearch
	@SavedSearchID INT = NULL,
	@UserID INT = NULL
AS
BEGIN
	DELETE FROM
		{databaseOwner}{objectQualifier}RZC_SavedSearches
	WHERE
		[SavedSearchID] = @SavedSearchID
		AND [UserID] = @UserID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_DestroySessionState
	@Minutes INT = NULL,
	@PortalID INT = NULL,
	@StoreID INT = NULL
AS
BEGIN
	DELETE FROM
		{databaseOwner}{objectQualifier}RZC_SessionState
	WHERE
		[ModifiedDate] <= DATEADD(MINUTE, - @Minutes, GETDATE())
		AND [PortalID] = @PortalID
		AND [StoreID] = @StoreID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetAbandonedCartRevenueStatistics
	@Frame VARCHAR(16) = NULL,
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	;WITH [Summary] ([YearVal], [QuarterVal], [MonthVal], [WeekVal], [DayVal], [TotalVal])
	AS
	(
		SELECT
			(CASE WHEN @Frame IN ('Yearly', 'Quarterly','Monthly', 'Weekly', 'Daily') THEN YEAR(SC.[CreateDate]) ELSE 0 END),
			(CASE WHEN @Frame IN ('Quarterly') THEN DATEPART(QUARTER, SC.[CreateDate]) ELSE 0 END),
			(CASE WHEN @Frame IN ('Monthly', 'Daily') THEN MONTH(SC.[CreateDate]) ELSE 0 END),
			(CASE WHEN @Frame IN ('Weekly') THEN DATEPART(WEEK, SC.[CreateDate]) ELSE 0 END),
			(CASE WHEN @Frame IN ('Daily') THEN DAY(SC.[CreateDate]) ELSE 0 END),
			(SC.[UnitCost] * SC.[Quantity])
		FROM
			{databaseOwner}{objectQualifier}RZC_ShoppingCart SC
		WHERE
			SC.[CreateDate] IS NOT NULL
			AND (SC.[StoreID] = @StoreID OR @StoreID = -1)
			AND SC.[PortalID] = @PortalID
	)
	SELECT
		[YearVal] AS [Year], [QuarterVal] AS [Quarter], [MonthVal] AS [Month], [WeekVal] AS [Week], [DayVal] AS [Day],
		COUNT(*) AS [Total], CAST(SUM([TotalVal]) AS MONEY) AS [Revenue]
	FROM
		[Summary]
	GROUP BY
		[YearVal], [QuarterVal], [MonthVal], [WeekVal], [DayVal]
	ORDER BY
		[YearVal] DESC, [QuarterVal] DESC, [MonthVal] DESC, [WeekVal] DESC, [DayVal] DESC
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetAbandonedCartSummary
	@Frame VARCHAR(16) = NULL,
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	DECLARE @StartDate DATETIME
	SET @StartDate = CASE @Frame
		WHEN 'Yearly' THEN DATEADD(YEAR, DATEDIFF(YEAR, 0, GETDATE()), 0)
		WHEN 'Quarterly' THEN DATEADD(QUARTER, DATEDIFF(QUARTER, 0, GETDATE()), 0)
		WHEN 'Monthly' THEN DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE()), 0)
		WHEN 'Weekly' THEN DATEADD(WEEK, DATEDIFF(WEEK, 0, GETDATE()), - 1)
		WHEN 'Daily' THEN DATEADD(DAY, DATEDIFF(DAY, 0, GETDATE()), 0)
		ELSE GETDATE() END
	;WITH [Summary] ([CartCount], [CartRevenue], [OrderCount] ,[OrderRevenue], [CartRecovered])
	AS
	(
		SELECT
			C.*, O.*, A.*
		FROM
		(
			SELECT
				COUNT(SC.[CartID]) [CartCount], CAST(ISNULL(SUM((SC.[UnitCost] * SC.[Quantity])), 0) AS MONEY) [CartRevenue]
			FROM
				{databaseOwner}{objectQualifier}RZC_ShoppingCart SC
			WHERE
				SC.[CreateDate] >= @StartDate
				AND (SC.[StoreID] = @StoreID OR @StoreID = -1)
				AND SC.[PortalID] = @PortalID
		) C,
		(
			SELECT
				COUNT(SO.[OrderID]) [OrderCount], CAST(ISNULL(SUM(SO.[GrandTotal]), 0) AS MONEY) [OrderRevenue]
			FROM
				{databaseOwner}{objectQualifier}RZC_StoreOrders SO
			WHERE
				SO.[OrderDate] >= @StartDate
				AND (SO.[StoreID] = @StoreID OR @StoreID = -1)
				AND SO.[PortalID] = @PortalID
		) O,
		(
			SELECT
				COUNT(SOD.[OrderDetailID]) [CartRecovered]
			FROM
				{databaseOwner}{objectQualifier}RZC_StoreOrders SO
			JOIN
				{databaseOwner}{objectQualifier}RZC_StoreOrderDetails SOD
			ON
				SOD.[OrderID] = SO.[OrderID]
			WHERE
				SO.[OrderDate] >= @StartDate
				AND DATEDIFF(HOUR, SO.[OrderDate], SOD.[CartAddDate]) > 24
				AND (SO.[StoreID] = @StoreID OR @StoreID = -1)
				AND SO.[PortalID] = @PortalID
		) A
	)
	SELECT
		S.*,
		CAST(CONVERT(DECIMAL, S.[CartCount]) / ISNULL(NULLIF(S.[OrderCount], 0), 1) AS MONEY) [Rate]
	FROM
		[Summary] S
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetBookingHistoryByDetailID
	@OrderDetailID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT TOP 1
		VB.*
	FROM
		{databaseOwner}{objectQualifier}RZC_VendorBooking VB
	WHERE
		VB.[OrderDetailID] = @OrderDetailID
		AND VB.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetBookingHistoryByID
	@ID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		VB.*
	FROM
		{databaseOwner}{objectQualifier}RZC_VendorBooking VB
	WHERE
		VB.[ID] = @ID
		AND VB.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetCategoryByID
	@CategoryID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		C.*
	FROM
		{databaseOwner}{objectQualifier}RZC_Category C
	WHERE
		C.[CategoryID] = @CategoryID
		AND C.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetCategoryByName
	@CategoryName VARCHAR(50) = NULL,
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT TOP 1
		C.*
	FROM
		{databaseOwner}{objectQualifier}RZC_Category C
	WHERE
		C.[CategoryName] = @CategoryName
		AND C.[PortalID] = @PortalID
		AND (C.[StoreID] = @StoreID OR C.[Share] = 1 OR @StoreID = -1)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetCategoryBySEO
	@CatSEOURL VARCHAR(50) = NULL,
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT TOP 1
		C.*
	FROM
		{databaseOwner}{objectQualifier}RZC_Category C
	WHERE
		C.[CatSEOURL] = @CatSEOURL
		AND C.[PortalID] = @PortalID
		AND (C.[StoreID] = @StoreID OR C.[Share] = 1 OR @StoreID = -1)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetCategoryQuantityDiscountByID
	@QtyDiscountID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		CQD.*
	FROM
		{databaseOwner}{objectQualifier}RZC_CategoryQtyDiscounts CQD
	INNER JOIN
		{databaseOwner}{objectQualifier}RZC_Category C
	ON
		C.[CategoryID] = CQD.[CategoryID]
	WHERE
		CQD.[QtyDiscountID] = @QtyDiscountID
		AND C.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetCatIDsBySEOUrlList
	@CatSEOUrlList NVARCHAR(4000) = '',
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT {databaseOwner}{objectQualifier}RZC_FxGetCatIDsBySEOUrlList(@CatSEOUrlList, @StoreID, @PortalID)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetClientCredentialByID
	@ID BIGINT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		CC.*
	FROM
		{databaseOwner}{objectQualifier}RZC_ClientCredentials CC
	WHERE
		CC.[ID] = @ID
		AND CC.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetClientCredentialByKey
	@ClientID NVARCHAR(64) = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		CC.*
	FROM
		{databaseOwner}{objectQualifier}RZC_ClientCredentials CC
	WHERE
		CC.[ClientID] = @ClientID
		AND CC.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetCouponByCode
	@CouponCode VARCHAR(50) = NULL,
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		C.*, P.[HasProducts], V.[HasVariants]
	FROM
		{databaseOwner}{objectQualifier}RZC_Coupons C
	CROSS APPLY
	(
		SELECT CASE WHEN EXISTS
		(
			SELECT CP.[ID]
			FROM {databaseOwner}{objectQualifier}RZC_CouponProduct CP
			WHERE CP.[CouponID] = C.[CouponID]
		)
		THEN CAST(1 AS BIT)
		ELSE CAST(0 AS BIT)
		END AS [HasProducts]
	) P
	CROSS APPLY
	(
		SELECT CASE WHEN EXISTS
		(
			SELECT CV.[ID]
			FROM {databaseOwner}{objectQualifier}RZC_CouponVariant CV
			WHERE CV.[CouponID] = C.[CouponID]
		)
		THEN CAST(1 AS BIT)
		ELSE CAST(0 AS BIT)
		END AS [HasVariants]
	) V
	WHERE
		(C.[StoreID] = @StoreID OR C.[StoreID] = -1)
		AND C.[PortalID] = @PortalID
		AND C.[CouponCode] = @CouponCode
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetCouponByID
	@CouponID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		C.*, P.[HasProducts], V.[HasVariants]
	FROM
		{databaseOwner}{objectQualifier}RZC_Coupons C
	CROSS APPLY
	(
		SELECT CASE WHEN EXISTS
		(
			SELECT CP.[ID]
			FROM {databaseOwner}{objectQualifier}RZC_CouponProduct CP
			WHERE CP.[CouponID] = C.[CouponID]
		)
		THEN CAST(1 AS BIT)
		ELSE CAST(0 AS BIT)
		END AS [HasProducts]
	) P
	CROSS APPLY
	(
		SELECT CASE WHEN EXISTS
		(
			SELECT CV.[ID]
			FROM {databaseOwner}{objectQualifier}RZC_CouponVariant CV
			WHERE CV.[CouponID] = C.[CouponID]
		)
		THEN CAST(1 AS BIT)
		ELSE CAST(0 AS BIT)
		END AS [HasVariants]
	) V
	WHERE
		C.[CouponID] = @CouponID
		AND C.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetCustomerByID
	@CustomerID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		C.*
	FROM
		{databaseOwner}{objectQualifier}RZC_Customer C
	WHERE
		C.[CustomerID] = @CustomerID
		AND C.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetCustomerByOrderID
	@OrderID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		C.*
	FROM
		{databaseOwner}{objectQualifier}RZC_Customer C
		INNER JOIN {databaseOwner}{objectQualifier}RZC_StoreOrders O
		ON
			C.[CustomerID] = O.[CustomerID]
	WHERE
		O.[OrderID] = @OrderID
		AND O.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetCustomerByUser
	@DNNLogin VARCHAR(50) = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		C.*
	FROM
		{databaseOwner}{objectQualifier}RZC_Customer C
	WHERE
		C.[DNNLogin] = @DNNLogin
		AND C.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetCustomerWalletItemByID
	@ID INT = NULL,
	@CustomerID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		CW.*
	FROM
		{databaseOwner}{objectQualifier}RZC_CustomerWallet CW
	WHERE
		CW.[ID] = @ID
		AND CW.[CustomerID] = @CustomerID
		AND CW.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetCustomShipMethodByID
	@ShipMethodID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		SM.*
	FROM
		{databaseOwner}{objectQualifier}RZC_ShipMethods SM
	WHERE
		SM.[ShipMethodID] = @ShipMethodID
		AND SM.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetEmailCampaignByID
	@EmailCampaignID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		EC.*
	FROM
		{databaseOwner}{objectQualifier}RZC_EmailCampaign EC
	WHERE
		EC.[EmailCampaignID] = @EmailCampaignID
		AND EC.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetEmailTemplateByID
	@TemplateID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		ET.*
	FROM
		{databaseOwner}{objectQualifier}RZC_EmailTemplateSC ET
	WHERE
		ET.[TemplateID] = @TemplateID
		AND ET.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetEmailTemplateByName
	@Name NVARCHAR(50) = NULL,
	@Type NVARCHAR(150) = NULL,
	@LanguageLocale NVARCHAR(20) = NULL,
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT TOP 1
		ET.*
	FROM
		{databaseOwner}{objectQualifier}RZC_EmailTemplateSC ET
	WHERE
		ET.[Name] = @Name
		AND ET.[Type] = @Type
		AND (ET.[LanguageLocale] = @LanguageLocale OR NULLIF(@LanguageLocale, '') IS NULL)
		AND (ET.[StoreID] = @StoreID OR @StoreID = -1)
		AND ET.[PortalID] = @PortalID
	ORDER BY
		ET.[TemplateID] DESC
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetFreeShippingByID
	@ID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		SF.*,
		ISNULL(SM.[ShipMethodName], 'No Ship Method') AS [ShipMethodName],
		ISNULL(C.[CategoryName], 'All Categories') AS [CategoryName]
	FROM
		{databaseOwner}{objectQualifier}RZC_ShipFree SF
	LEFT OUTER JOIN
		{databaseOwner}{objectQualifier}RZC_ShipMethods SM
	ON
		SF.[ShipMethodID] = SM.[ShipMethodID]
	LEFT OUTER JOIN
		{databaseOwner}{objectQualifier}RZC_ShipCategories SC
	ON
		SF.[CategoryID] = SC.[CategoryID]
	LEFT OUTER JOIN
		{databaseOwner}{objectQualifier}RZC_Category C
	ON
		SC.[CategoryID] = C.[CategoryID]
	WHERE
		SF.[ID] = @ID
		AND SF.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetInvoiceTemplateByID
	@TemplateID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		IT.*
	FROM
		{databaseOwner}{objectQualifier}RZC_InvoiceTemplate IT
	WHERE
		IT.[TemplateID] = @TemplateID
		AND IT.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetInvoiceTemplateByName
	@Name NVARCHAR(100) = NULL,
	@LanguageLocale NVARCHAR(20) = NULL,
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT TOP 1
		IT.*
	FROM
		{databaseOwner}{objectQualifier}RZC_InvoiceTemplate IT
	WHERE
		IT.[Name] = @Name
		AND IT.[LanguageLocale] = @LanguageLocale
		AND IT.[StoreID] = @StoreID
		AND IT.[PortalID] = @PortalID
	ORDER BY
		IT.[TemplateID] DESC
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetManufacturerByID
	@ManufacturerID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		M.*
	FROM
		{databaseOwner}{objectQualifier}RZC_Manufacturer M
	WHERE
		M.[ManufacturerID] = @ManufacturerID
		AND M.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetOrderByID
	@OrderID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		O.*, C.[DNNLogin], PM.[PayMethod], PT.[PayTotal]
	FROM
		{databaseOwner}{objectQualifier}RZC_StoreOrders O
	LEFT JOIN
		{databaseOwner}{objectQualifier}RZC_Customer C
	ON
		C.[CustomerID] = O.[CustomerID]
	OUTER APPLY
		(
			SELECT
				STUFF((
					SELECT
						', ' + PH.[PayType]
					FROM
						(
							SELECT
								PH.[PayType], MIN(PH.[PayHistID]) AS 'PayHistID'
							FROM
								{databaseOwner}{objectQualifier}RZC_PayHist PH
							WHERE
								PH.[OrderID] = O.[OrderID]
							GROUP BY
								PH.[PayType]
						) PH
					ORDER BY
						PH.[PayHistID]
					FOR XML PATH('')), 1, 2, ''
				) AS 'PayMethod'
		) PM
		OUTER APPLY
		(
			SELECT
				ISNULL(SUM(PH.[Amount]), 0) AS 'PayTotal'
			FROM
				{databaseOwner}{objectQualifier}RZC_PayHist PH
			WHERE
				PH.[OrderID] = O.[OrderID]
				AND PH.[Success] = 1
		) PT
	WHERE
		O.[OrderID] = @OrderID
		AND O.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetOrderDetailByGuid
	@OrderDetailGUID UNIQUEIDENTIFIER = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		OD.*
	FROM
		{databaseOwner}{objectQualifier}RZC_StoreOrderDetails OD
	WHERE
		OD.[OrderDetailGUID] = @OrderDetailGUID
		AND OD.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetOrderDetailByID
	@OrderDetailID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		OD.*
	FROM
		{databaseOwner}{objectQualifier}RZC_StoreOrderDetails OD
	WHERE
		OD.[OrderDetailID] = @OrderDetailID
		AND OD.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetOrderDiscountByID
	@OrderDiscountID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		OD.*
	FROM
		{databaseOwner}{objectQualifier}RZC_OrderDiscounts OD
	WHERE
		OD.[OrderDiscountID] = @OrderDiscountID
		AND OD.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetOrderFulfillmentByID
	@FulfillmentID INT = NULL,
	@OrderID INT = NULL
AS
BEGIN
	SELECT
		F.*
	FROM
		{databaseOwner}{objectQualifier}RZC_OrderFulfillments F
	INNER JOIN
		{databaseOwner}{objectQualifier}RZC_StoreOrders O
	ON
		O.[OrderID] = F.[OrderID]
	WHERE
		F.[FulfillmentID] = @FulfillmentID
		AND O.[OrderID] = @OrderID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetOrderNoteByID
	@ID INT = NULL,
	@OrderID INT = NULL
AS
BEGIN
	SELECT
		N.*
	FROM
		{databaseOwner}{objectQualifier}RZC_OrderNotes N
	WHERE
		N.[ID] = @ID
		AND N.[OrderID] = @OrderID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetOrdersRevenueStatistics
	@Frame VARCHAR(16) = NULL,
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	;WITH [Summary] ([YearVal], [QuarterVal], [MonthVal], [WeekVal], [DayVal], [TotalVal])
	AS
	(
		SELECT
			(CASE WHEN @Frame IN ('Yearly', 'Quarterly','Monthly', 'Weekly', 'Daily') THEN YEAR(O.[OrderDate]) ELSE 0 END),
			(CASE WHEN @Frame IN ('Quarterly') THEN DATEPART(QUARTER, O.[OrderDate]) ELSE 0 END),
			(CASE WHEN @Frame IN ('Monthly', 'Daily') THEN MONTH(O.[OrderDate]) ELSE 0 END),
			(CASE WHEN @Frame IN ('Weekly') THEN DATEPART(WEEK, O.[OrderDate]) ELSE 0 END),
			(CASE WHEN @Frame IN ('Daily') THEN DAY(O.[OrderDate]) ELSE 0 END),
			O.[GrandTotal]
		FROM
			{databaseOwner}{objectQualifier}RZC_StoreOrders O
		INNER JOIN
			{databaseOwner}{objectQualifier}RZC_PayHist P
		ON
			P.[OrderID] = O.[OrderID]
		WHERE
			O.[DeletedFlag] <> 1
			AND O.[Status] NOT IN ('BillMeLater', 'Cancelled', 'Incomplete', 'Returned')
			AND P.[Success] = 1
			AND P.[TransType] = 'Sale'
			AND (O.[StoreID] = @StoreID OR @StoreID = -1)
			AND O.[PortalID] = @PortalID
	)
	SELECT
		[YearVal] AS [Year], [QuarterVal] AS [Quarter], [MonthVal] AS [Month], [WeekVal] AS [Week], [DayVal] AS [Day],
		COUNT(*) AS [Total], SUM(CONVERT(DECIMAL(18,2), [TotalVal])) AS [Revenue]
	FROM
		[Summary]
	GROUP BY
		[YearVal], [QuarterVal], [MonthVal], [WeekVal], [DayVal]
	ORDER BY
		[YearVal] DESC, [QuarterVal] DESC, [MonthVal] DESC, [WeekVal] DESC, [DayVal] DESC
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetOrdersRevenueSummary
	@From DATETIME = NULL,
	@To DATETIME = NULL,
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		COUNT(O.[OrderID]) AS [CountTotal],
		SUM(O.[SubTotal]) AS [SubTotal], SUM(O.[ShippingTotal]) AS [ShippingTotal],
		SUM(O.[Discount]) AS [Discount], SUM(O.[MemberDiscount]) AS [MemberDiscount],
		SUM(O.[TaxTotal]) AS [TaxTotal], SUM(O.[GrandTotal]) AS [GrandTotal]
	FROM
		{databaseOwner}{objectQualifier}RZC_StoreOrders O
	INNER JOIN
		{databaseOwner}{objectQualifier}RZC_PayHist P
	ON
		P.[OrderID] = O.[OrderID]
	WHERE
		O.[DeletedFlag] <> 1
		AND O.[Status] NOT IN ('BillMeLater', 'Cancelled', 'Incomplete', 'Returned')
		AND (
			CONVERT(DATE, O.[OrderDate]) BETWEEN ISNULL(@From, CAST(-53690 AS DATETIME)) AND ISNULL(@To, GETDATE())
		)
		AND P.[Success] = 1
		AND P.[TransType] = 'Sale'
		AND (O.[StoreID] = @StoreID OR @StoreID = -1)
		AND O.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetOrdersStateSummary
	@Frame VARCHAR(16) = NULL,
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	;WITH [Summary] ([OrderID], [YearVal], [QuarterVal], [MonthVal], [WeekVal], [DayVal], [StateVal], [TotalVal], [PayVal])
	AS
	(
		SELECT
			O.[OrderID],
			(CASE WHEN @Frame IN ('Yearly', 'Quarterly','Monthly', 'Weekly', 'Daily') THEN YEAR(O.[OrderDate]) ELSE 0 END),
			(CASE WHEN @Frame IN ('Quarterly') THEN DATEPART(QUARTER, O.[OrderDate]) ELSE 0 END),
			(CASE WHEN @Frame IN ('Monthly', 'Daily') THEN MONTH(O.[OrderDate]) ELSE 0 END),
			(CASE WHEN @Frame IN ('Weekly') THEN DATEPART(WEEK, O.[OrderDate]) ELSE 0 END),
			(CASE WHEN @Frame IN ('Daily') THEN DAY(O.[OrderDate]) ELSE 0 END),
			O.[Status], O.[GrandTotal], P.[PaidTotal]
		FROM
			{databaseOwner}{objectQualifier}RZC_StoreOrders O
		OUTER APPLY
		(
			SELECT
				ISNULL(SUM(PH.[Amount]), 0) AS 'PaidTotal'
			FROM
				{databaseOwner}{objectQualifier}RZC_PayHist PH
			WHERE
				PH.[OrderID] = O.[OrderID]
				AND PH.[Success] = 1
		) P
		WHERE
			O.[OrderDate] >= (
				CASE @Frame
				WHEN 'Yearly' THEN DATEADD(YEAR, DATEDIFF(YEAR, 0, GETDATE()), 0)
				WHEN 'Quarterly' THEN DATEADD(QUARTER, DATEDIFF(QUARTER, 0, GETDATE()), 0)
				WHEN 'Monthly' THEN DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE()), 0)
				WHEN 'Weekly' THEN DATEADD(WEEK, DATEDIFF(WEEK, 0, GETDATE()), - 1)
				WHEN 'Daily' THEN DATEADD(DAY, DATEDIFF(DAY, 0, GETDATE()), 0)
				ELSE GETDATE() END
			)
			AND O.[DeletedFlag] <> 1
			AND (O.[StoreID] = @StoreID OR @StoreID = -1)
			AND O.[PortalID] = @PortalID
	)
	SELECT
		[StateVal] AS [Status], COUNT([StateVal]) AS [Orders],
		SUM([TotalVal]) AS [Revenue], SUM([PayVal]) AS [Collected]
	FROM
		[Summary]
	GROUP BY
		[StateVal]
	UNION ALL
	SELECT
		CASE WHEN SUM([TotalVal]) > SUM([PayVal]) THEN 'Unpaid' ELSE 'Paid' END,
		COUNT(*), COALESCE(SUM([TotalVal]), 0), COALESCE(SUM([PayVal]), 0)
	FROM
		[Summary]
	GROUP BY
		CASE WHEN [TotalVal] > [PayVal] THEN 0 ELSE 1 END
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetPaymentByID
	@PayHistID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT TOP 1
		P.*
	FROM
		{databaseOwner}{objectQualifier}RZC_PayHist P
	WHERE
		P.[PayHistID] = @PayHistID
		AND P.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetPaymentByOrderID
	@OrderID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT TOP 1
		P.*
	FROM
		{databaseOwner}{objectQualifier}RZC_PayHist P
	WHERE
		P.[OrderID] = @OrderID
		AND P.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetPaymentImageByID
	@PayHistID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT TOP 1
		PI.*
	FROM
		{databaseOwner}{objectQualifier}RZC_PayHistImages PI
	WHERE
		PI.[PayHistID] = @PayHistID
		AND PI.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetPaymentMethodByID
	@PayMethodID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		PM.*
	FROM
		{databaseOwner}{objectQualifier}RZC_PaymentMethods PM
	WHERE
		PM.[PayMethodID] = @PayMethodID
		AND PM.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetPaymentMethodByType
	@Type VARCHAR(100) = NULL,
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		PM.*
	FROM
		{databaseOwner}{objectQualifier}RZC_PaymentMethods PM
	WHERE
		PM.[Type] = @Type
		AND (PM.[StoreID] = @StoreID OR PM.[Share] = 1)
		AND PM.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetPriceClassByID
	@PriceClassID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		PC.*
	FROM
		{databaseOwner}{objectQualifier}RZC_PriceClass PC
	WHERE
		PC.[PriceClassID] = @PriceClassID
		AND PC.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetProdCountByPriceRange
	@MinPrice MONEY,
	@MaxPrice MONEY,
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		COUNT(ProductID)
	FROM
		{databaseOwner}{objectQualifier}RZC_Products P
	WHERE
		(P.[LogicallyDeleted] <> 1 AND P.[Archived] <> 1 AND P.[HideProduct] <> 1)
		AND (P.[UnitCost] >= @MinPrice OR @MinPrice = -1)
		AND (P.[UnitCost] <= @MaxPrice OR @MaxPrice = -1)
		AND (P.[StoreID] = @StoreID OR P.[Share] = 1)
		AND P.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetProductByID
	@ProductID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		P.*, I.[ThumbImage], I.[LargeImage], I.[ZoomImage], I.[Title] AS [ImageTitle], I.[AltTag] AS [ImageAlt], V.[HasVariants]
	FROM
		{databaseOwner}{objectQualifier}RZC_Products P
	OUTER APPLY
	(
		SELECT TOP 1
			IMG.*
		FROM
			{databaseOwner}{objectQualifier}RZC_ProductImages IMG
		WHERE
			IMG.[ProductID] = P.[ProductID]
		ORDER BY
			IMG.[SortOrder] ASC
	) I
	CROSS APPLY
	(
		SELECT CASE WHEN EXISTS
		(
			SELECT PV.[VariantID]
			FROM {databaseOwner}{objectQualifier}RZC_ProductVariant PV
			WHERE PV.[ProductID] = P.[ProductID]
		)
		THEN CAST(1 AS BIT)
		ELSE CAST(0 AS BIT)
		END AS [HasVariants]
	) V
	WHERE
		P.[ProductID] = @ProductID
		AND P.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetProductBySEO
	@ProductSEO VARCHAR(80) = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT TOP 1
		P.*, I.[ThumbImage], I.[LargeImage], I.[ZoomImage], I.[Title] AS [ImageTitle], I.[AltTag] AS [ImageAlt], V.[HasVariants]
	FROM
		{databaseOwner}{objectQualifier}RZC_Products P
	OUTER APPLY
	(
		SELECT TOP 1
			IMG.*
		FROM
			{databaseOwner}{objectQualifier}RZC_ProductImages IMG
		WHERE
			IMG.[ProductID] = P.[ProductID]
		ORDER BY
			IMG.[SortOrder] ASC
	) I
	CROSS APPLY
	(
		SELECT CASE WHEN EXISTS
		(
			SELECT PV.[VariantID]
			FROM {databaseOwner}{objectQualifier}RZC_ProductVariant PV
			WHERE PV.[ProductID] = P.[ProductID]
		)
		THEN CAST(1 AS BIT)
		ELSE CAST(0 AS BIT)
		END AS [HasVariants]
	) V
	WHERE
		P.[SEOURL] = @ProductSEO
		AND P.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetProductBySKU
	@ProductSKU VARCHAR(50) = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT TOP 1
		P.*, I.[ThumbImage], I.[LargeImage], I.[ZoomImage], I.[Title] AS [ImageTitle], I.[AltTag] AS [ImageAlt], V.[HasVariants]
	FROM
		{databaseOwner}{objectQualifier}RZC_Products P
	OUTER APPLY
	(
		SELECT TOP 1
			IMG.*
		FROM
			{databaseOwner}{objectQualifier}RZC_ProductImages IMG
		WHERE
			IMG.[ProductID] = P.[ProductID]
		ORDER BY
			IMG.[SortOrder] ASC
	) I
	CROSS APPLY
	(
		SELECT CASE WHEN EXISTS
		(
			SELECT PV.[VariantID]
			FROM {databaseOwner}{objectQualifier}RZC_ProductVariant PV
			WHERE PV.[ProductID] = P.[ProductID]
		)
		THEN CAST(1 AS BIT)
		ELSE CAST(0 AS BIT)
		END AS [HasVariants]
	) V
	WHERE
		P.[ModelNumber] = @ProductSKU
		AND P.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetProductCustomFieldByID
	@PCID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		PCF.*
	FROM
		{databaseOwner}{objectQualifier}RZC_ProductCustomFields PCF
	WHERE
		PCF.[PCID] = @PCID
		AND PCF.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetProductCustomFieldByLabel
	@Label NVARCHAR(150) = NULL,
	@ProductID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT TOP 1
		PCF.*
	FROM
		{databaseOwner}{objectQualifier}RZC_ProductCustomFields PCF
	WHERE
		PCF.[Label] = @Label
		AND PCF.[ProductID] = @ProductID
		AND PCF.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetProductII
	@ProductID INT = NULL
AS
BEGIN
	SELECT
		P2.*
	FROM
		{databaseOwner}{objectQualifier}RZC_Products2 P2
	WHERE
		P2.[ProductID] = @ProductID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetProductInventoryByID
	@VariantInventoryID INT = NULL,
	@ProductID INT = NULL
AS
BEGIN
	SELECT
		PVI.*
	FROM
		{databaseOwner}{objectQualifier}RZC_ProductVariantInventory PVI
	WHERE
		PVI.[VariantInventoryID] = @VariantInventoryID
		AND PVI.[ProductID] = @ProductID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetProductLocalization
	@ProductID INT = NULL,
	@LanguageLocale NVARCHAR(20) = NULL
AS
BEGIN
	SELECT TOP 1
		PL.*
	FROM
		{databaseOwner}{objectQualifier}RZC_ProductLocalization PL
	WHERE
		PL.[ProductID] = @ProductID
		AND PL.[LanguageLocale] = @LanguageLocale
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetProductQuantityDiscountByID
	@QtyDiscountID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		PQD.*
	FROM
		{databaseOwner}{objectQualifier}RZC_ProductQtyDiscounts PQD
	WHERE
		PQD.[QtyDiscountID] = @QtyDiscountID
		AND PQD.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetProductReviewByID
	@ReviewID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		PR.*, P.[ModelNumber], P.[ModelName]
	FROM
		{databaseOwner}{objectQualifier}RZC_ProductReviews PR
	INNER JOIN
		{databaseOwner}{objectQualifier}RZC_Products P
	ON
		P.[ProductID] = PR.[ProductID]
	WHERE
		PR.[ReviewID] = @ReviewID
		AND P.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetProductRoleDiscountByID
	@DiscountID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		PRD.*
	FROM
		{databaseOwner}{objectQualifier}RZC_ProductDiscountsByRole PRD
	WHERE
		PRD.[DiscountID] = @DiscountID
		AND (PRD.[PortalID] = @PortalID OR PRD.[PortalID] IS NULL)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetProductSearchKeyByID
	@iIndex INT = NULL,
	@ProductID INT = NULL
AS
BEGIN
	SELECT
		SK.*
	FROM
		{databaseOwner}{objectQualifier}RZC_SearchKeys SK
	WHERE
		SK.[iIndex] = @iIndex
		AND SK.[ProductID] = @ProductID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetProductTemplateFieldByID
	@PTID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		PT.*
	FROM
		{databaseOwner}{objectQualifier}RZC_ProductTemplate PT
	WHERE
		PT.[PTID] = @PTID
		AND PT.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetProductVariantByID
	@VariantID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		PV.*
	FROM
		{databaseOwner}{objectQualifier}RZC_ProductVariant PV
	WHERE
		PV.[VariantID] = @VariantID
		AND PV.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetProductVariantGroupByID
	@VariantGroupID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		PVG.*
	FROM
		{databaseOwner}{objectQualifier}RZC_ProductVariantGroup PVG
	WHERE
		PVG.[VariantGroupID] = @VariantGroupID
		AND PVG.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetRegionalTaxByID
	@TaxStateId INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		TS.*
	FROM
		{databaseOwner}{objectQualifier}RZC_TaxStates TS
	WHERE
		TS.[TaxStateId] = @TaxStateId
		AND TS.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetSavedSearchByID
	@SavedSearchID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		SS.*
	FROM
		{databaseOwner}{objectQualifier}RZC_SavedSearches SS
	WHERE
		SS.[SavedSearchID] = @SavedSearchID
		AND SS.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetSessionState
	@ClientGUID [UNIQUEIDENTIFIER] = NULL,
	@UserID INT = NULL,
	@SessionTitle NVARCHAR(150) = NULL,
	@PortalID INT = NULL,
	@StoreID INT = NULL
AS
BEGIN
	SELECT TOP 1
		SS.[ID], SS.[SessionData], SS.[CreatedDate]
	FROM
		{databaseOwner}{objectQualifier}RZC_SessionState SS
	WHERE
		SS.[ClientGUID] = @ClientGUID
		AND SS.[UserID] = @UserID
		AND SS.[SessionTitle] = @SessionTitle
		AND SS.[PortalID] = @PortalID
		AND SS.[StoreID] = @StoreID
	ORDER BY
		SS.[CreatedDate] DESC
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetShippingAmountCostByID
	@ShipCostID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		SA.*,
		ISNULL(SM.[ShipMethodName], 'No Ship Method') AS [ShipMethodName],
		ISNULL(C.[CategoryName], 'All Categories') AS [CategoryName]
	FROM
		{databaseOwner}{objectQualifier}RZC_ShippingByAmount SA
	LEFT OUTER JOIN
		{databaseOwner}{objectQualifier}RZC_ShipMethods SM
	ON
		SA.[ShipMethodID] = SM.[ShipMethodID]
	LEFT OUTER JOIN
		{databaseOwner}{objectQualifier}RZC_ShipCategories SC
	ON
		SA.[CategoryID] = SC.[CategoryID]
	LEFT OUTER JOIN
		{databaseOwner}{objectQualifier}RZC_Category C
	ON
		SC.[CategoryID] = C.[CategoryID]
	WHERE
		SA.[ShipCostID] = @ShipCostID
		AND SA.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetShippingByOrderAmount
	@AmountTotal DECIMAL,
	@IsIntl BIT,
	@PortalID INT = NULL,
	@StoreID INT = NULL
AS
BEGIN
	DECLARE @ShippingTotal MONEY
	SET @ShippingTotal = (
		SELECT TOP 1
			SBA.[Price]
		FROM
			{databaseOwner}{objectQualifier}RZC_ShippingByAmount SBA
		WHERE
			(@AmountTotal BETWEEN SBA.[AmountFrom] AND SBA.[AmountTo])
			AND SBA.[IsIntl] = @IsIntl
			AND (SBA.[StoreID] = @StoreID OR @StoreID = -1)
			AND SBA.[PortalID] = @PortalID
	)
	SELECT ISNULL(@ShippingTotal, 0) AS ShippingTotal
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetShippingByWeight
	@WeightTotal DECIMAL(18,2) = NULL,
	@PortalID INT = NULL,
	@StoreID INT = NULL
AS
BEGIN
	DECLARE @ShippingTotal MONEY
	SET @ShippingTotal = (
		SELECT TOP 1
			SBW.[Price]
		FROM
			{databaseOwner}{objectQualifier}RZC_ShippingByWeight SBW
		WHERE
			(@WeightTotal BETWEEN SBW.[WeightFrom] AND SBW.[WeightTo])
			AND (SBW.[StoreID] = @StoreID OR @StoreID = -1)
			AND SBW.[PortalID] = @PortalID
	)
	SELECT ISNULL(@ShippingTotal, 0) AS ShippingTotal
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetShippingPostalCostByID
	@ShipCostID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		SZ.*,
		ISNULL(SM.[ShipMethodName], 'No Ship Method') AS [ShipMethodName],
		ISNULL(C.[CategoryName], 'All Categories') AS [CategoryName]
	FROM
		{databaseOwner}{objectQualifier}RZC_ShippingByZipCode SZ
	LEFT OUTER JOIN
		{databaseOwner}{objectQualifier}RZC_ShipMethods SM
	ON
		SZ.[ShipMethodID] = SM.[ShipMethodID]
	LEFT OUTER JOIN
		{databaseOwner}{objectQualifier}RZC_ShipCategories SC
	ON
		SZ.[CategoryID] = SC.[CategoryID]
	LEFT OUTER JOIN
		{databaseOwner}{objectQualifier}RZC_Category C
	ON
		SC.[CategoryID] = C.[CategoryID]
	WHERE
		SZ.[ShipCostID] = @ShipCostID
		AND SZ.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetShippingQuantityCostByID
	@ShipCostID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		SQ.*,
		ISNULL(SM.[ShipMethodName], 'No Ship Method') AS [ShipMethodName],
		ISNULL(SN.[ZoneName], 'No Zone') AS [ZoneName],
		ISNULL(C.[CategoryName], 'All Categories') AS [CategoryName]
	FROM
		{databaseOwner}{objectQualifier}RZC_ShippingByQuantity SQ
	LEFT OUTER JOIN
		{databaseOwner}{objectQualifier}RZC_ShipMethods SM
	ON
		SQ.[ShipMethodID] = SM.[ShipMethodID]
	LEFT OUTER JOIN
		{databaseOwner}{objectQualifier}RZC_ShipZone SN
	ON
		SQ.[ZoneID] = SN.[ZoneID]
	LEFT OUTER JOIN
		{databaseOwner}{objectQualifier}RZC_ShipCategories SC
	ON
		SQ.[CategoryID] = SC.[CategoryID]
	LEFT OUTER JOIN
		{databaseOwner}{objectQualifier}RZC_Category C
	ON
		SC.[CategoryID] = C.[CategoryID]
	WHERE
		SQ.[ShipCostID] = @ShipCostID
		AND SQ.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetShippingWeightCostByID
	@ShipCostID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		SW.*,
		ISNULL(SM.[ShipMethodName], 'No Ship Method') AS [ShipMethodName],
		ISNULL(SN.[ZoneName], 'No Zone') AS [ZoneName],
		ISNULL(C.[CategoryName], 'All Categories') AS [CategoryName]
	FROM
		{databaseOwner}{objectQualifier}RZC_ShippingByWeight SW
	LEFT OUTER JOIN
		{databaseOwner}{objectQualifier}RZC_ShipMethods SM
	ON
		SW.[ShipMethodID] = SM.[ShipMethodID]
	LEFT OUTER JOIN
		{databaseOwner}{objectQualifier}RZC_ShipZone SN
	ON
		SW.[ZoneID] = SN.[ZoneID]
	LEFT OUTER JOIN
		{databaseOwner}{objectQualifier}RZC_ShipCategories SC
	ON
		SW.[CategoryID] = SC.[CategoryID]
	LEFT OUTER JOIN
		{databaseOwner}{objectQualifier}RZC_Category C
	ON
		SC.[CategoryID] = C.[CategoryID]
	WHERE
		SW.[ShipCostID] = @ShipCostID
		AND SW.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetShippingZoneByID
	@ZoneID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		SZ.*
	FROM
		{databaseOwner}{objectQualifier}RZC_ShipZone SZ
	WHERE
		SZ.[ZoneID] = @ZoneID
		AND SZ.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetStoreByID
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		S.*
	FROM
		{databaseOwner}{objectQualifier}RZC_Stores S
	WHERE
		S.[StoreID] = @StoreID
		AND S.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetStorePermissionByID
	@ID INT = NULL,
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		P.*, R.RoleName
	FROM
		{databaseOwner}{objectQualifier}RZC_StorePermissions P
	LEFT JOIN
		{databaseOwner}{objectQualifier}Roles R
	ON
		R.[RoleID] = P.[RoleID]
	WHERE
		P.[ID] = @ID
		AND P.[StoreID] = @StoreID
		AND P.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetSubscriptionByID
	@SubscriptionID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		S.*
	FROM
		{databaseOwner}{objectQualifier}RZC_SubscriptionSC S
	WHERE
		S.[SubscriptionID] = @SubscriptionID
		AND S.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetSubscriptionByOrderID
	@OrderID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT TOP 1
		S.*
	FROM
		{databaseOwner}{objectQualifier}RZC_SubscriptionSC S
	WHERE
		S.[OrderID] = @OrderID
		AND S.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetTopProductsRevenue
	@Top INT = NULL,
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT TOP (@Top)
		P.[ProductID], MAX(P.[ModelNumber]) AS [ModelNumber], MAX(P.[ModelName]) AS [ModelName],
		MIN(OD.[UnitCost]) AS [MinPrice], MAX(OD.[UnitCost]) AS [MaxPrice], AVG(OD.[UnitCost]) AS [AvgPrice],
		SUM(OD.[Quantity]) AS [Quantity], SUM(OD.[UnitCost] * OD.[Quantity]) AS [Revenue]
	FROM
		{databaseOwner}{objectQualifier}RZC_StoreOrders O
	INNER JOIN
		{databaseOwner}{objectQualifier}RZC_PayHist PH
	ON
		PH.[OrderID] = O.[OrderID]
	INNER JOIN
		{databaseOwner}{objectQualifier}RZC_StoreOrderDetails OD
	ON
		OD.[OrderID] = O.[OrderID]
	INNER JOIN
		{databaseOwner}{objectQualifier}RZC_Products P
	ON
		P.[ProductID] = OD.[ProductID]
	WHERE
		O.[DeletedFlag] <> 1
		AND O.[Status] NOT IN ('BillMeLater', 'Cancelled', 'Incomplete', 'Returned')
		AND PH.[Success] = 1
		AND PH.[TransType] = 'Sale'
		AND (O.[StoreID] = @StoreID OR @StoreID = -1)
		AND O.[PortalID] = @PortalID
	GROUP BY
		P.[ProductID]
	ORDER BY
		[Revenue] DESC
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_GetTopStoreNotifications
	@Top INT = NULL,
	@ShowAlerts BIT = NULL,
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	;WITH [Notifications] ([ID], [Date], [Description], [Type])
	AS
	(
		SELECT *
		FROM
			(
				SELECT TOP 10
					O.[OrderID] AS [ID], O.[OrderDate] AS [Date], CONCAT('Store Order #', O.[OrderID]) AS [Description], 'Order' AS [Type]
				FROM
					{databaseOwner}{objectQualifier}RZC_StoreOrders O
				WHERE
					(O.[StoreID] = @StoreID OR @StoreID = -1)
					AND O.[PortalID] = @PortalID
				ORDER BY
					O.[OrderDate] DESC
			) Orders
		UNION ALL SELECT *
		FROM
			(
				SELECT  TOP 10
					C.[CustomerID] AS [ID], C.[DateCreated] AS [Date], CONCAT('New Customer #', C.[CustomerID], ' has been created') AS [Description], 'Customer' AS [Type]
				FROM
					{databaseOwner}{objectQualifier}RZC_Customer C
				WHERE
					(C.[StoreID] = @StoreID OR @StoreID = -1)
					AND C.[PortalID] = @PortalID
				ORDER BY
					C.[DateCreated] DESC
			) Customers
		UNION ALL SELECT *
		FROM
			(
				SELECT TOP 10
					R.[ReviewID] AS [ID], R.[ReviewDate] AS [Date], CONCAT('Product Review #', R.[ReviewID], ' (Rate: ', R.[Rate], ')') AS [Description], 'Review' AS [Type]
				FROM
					{databaseOwner}{objectQualifier}RZC_ProductReviews R
				INNER JOIN
					{databaseOwner}{objectQualifier}RZC_Products P
				ON
					P.[ProductID] = R.[ProductID]
				WHERE
					(P.[StoreID] = @StoreID OR @StoreID = -1)
					AND P.[PortalID] = @PortalID
				ORDER BY
					R.[ReviewDate] DESC
			) Reviews
		UNION ALL SELECT *
		FROM
			(
				SELECT  TOP 10
					EL.[LogEventID] AS [ID], EL.[LogCreateDate] AS [Date], SUBSTRING([LogProperties].value('(/LogProperties/LogProperty/PropertyName)[1]', 'VARCHAR(MAX)'), 48, 100) AS [Description], 'Alert' AS [Type]
				FROM
					{databaseOwner}{objectQualifier}EventLog EL
				WHERE
					EL.[LogProperties].value('(/LogProperties/LogProperty/PropertyName)[1]', 'VARCHAR(MAX)') LIKE 'RazorCart Pipeline Action Failure%'
					AND EL.[LogPortalID] = @PortalID
				ORDER BY
					EL.[LogCreateDate] DESC
			) Alerts
	)
	SELECT TOP (@Top)
		[ID], [Date], [Description], [Type]
	FROM
		[Notifications]
	WHERE
		[Type] <> 'Alert' OR @ShowAlerts = 1
	ORDER BY
		[Date] DESC
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListAbandonedCartByFilter
	@Frame VARCHAR(16) = NULL,
	@PageNumber INT = NULL,
	@PageSize INT = NULL,
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SET NOCOUNT ON;
	DECLARE @PageRecordStart INT
	DECLARE @PageRecordEnd INT
	DECLARE @StartDate DATETIME

	SET @PageRecordStart = ((@PageNumber - 1) * @PageSize) + 1
	SET @PageRecordEnd = @PageNumber * @PageSize
	SET @StartDate = CASE @Frame
		WHEN 'Yearly' THEN DATEADD(YEAR, DATEDIFF(YEAR, 0, GETDATE()), 0)
		WHEN 'Quarterly' THEN DATEADD(QUARTER, DATEDIFF(QUARTER, 0, GETDATE()), 0)
		WHEN 'Monthly' THEN DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE()), 0)
		WHEN 'Weekly' THEN DATEADD(WEEK, DATEDIFF(WEEK, 0, GETDATE()), - 1)
		WHEN 'Daily' THEN DATEADD(DAY, DATEDIFF(DAY, 0, GETDATE()), 0)
		ELSE GETDATE() END
	;WITH [CartPage] AS
	(
		SELECT
			ROW_NUMBER() OVER (ORDER BY SC.[CartID] ASC) AS [RowNo], SC.*
		FROM
			{databaseOwner}{objectQualifier}RZC_ShoppingCart SC
		INNER JOIN
			{databaseOwner}{objectQualifier}RZC_Products P
		ON 
			SC.[ProductID] = P.[ProductID]
		WHERE
			SC.[CreateDate] >= @StartDate
			AND (SC.[StoreID] = @StoreID OR @StoreID = -1)
			AND SC.[PortalID] = @PortalID
	)
	SELECT
		*,
		TotalRecords = (
			SELECT COUNT(*) FROM [CartPage]
		),
		MoreRecords = (
			SELECT COUNT(*) FROM [CartPage]
			WHERE [RowNo] > @PageRecordEnd
		)
	FROM
		[CartPage]
	WHERE
		[RowNo] BETWEEN @PageRecordStart AND @PageRecordEnd
	ORDER BY
		[RowNo];
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListAdvancedSearchProducts
	@MinPrice DECIMAL = NULL,
	@MaxPrice DECIMAL = NULL,
	@Keywords NVARCHAR(MAX) = '',
	@CatList NVARCHAR(MAX) = '',
	@UserID INT = NULL,
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	DECLARE @Now DATETIME = GETDATE()
	DECLARE @KeywordsTable TABLE
	(
		[Keyword] NVARCHAR(250)
	)
	INSERT INTO
		@KeywordsTable ([Keyword])
	SELECT
		LTRIM(RTRIM([Value]))
	FROM
		{databaseOwner}{objectQualifier}RZC_FxSplit(@Keywords, ',')
	DELETE FROM
		@KeywordsTable
	WHERE
		NULLIF([Keyword], '') IS NULL
	DECLARE @KeyCount INT = (SELECT COUNT(DISTINCT Keyword) FROM @KeywordsTable)

	DECLARE @CatListTable TABLE
	(
		[CategoryID] INT
	)
	INSERT INTO
		@CatListTable ([CategoryID])
	SELECT
		CONVERT(INT, LTRIM(RTRIM([Value])))
	FROM
		{databaseOwner}{objectQualifier}RZC_FxSplit(@CatList, ',')
	DELETE FROM
		@CatListTable
	WHERE
		[CategoryID] IS NULL
		OR [CategoryID] < 1
	DECLARE @CatCount INT = (SELECT COUNT(DISTINCT CategoryID) FROM @CatListTable)
	SELECT
		P.[ProductID]
	FROM
		{databaseOwner}{objectQualifier}RZC_Products P
	LEFT JOIN
	(
		SELECT S1.[ProductID]
		FROM @KeywordsTable T1
		LEFT JOIN {databaseOwner}{objectQualifier}RZC_SearchKeys S1
		ON S1.[SearchTerm] LIKE '%' + T1.[Keyword] + '%'
		UNION
		SELECT P1.[ProductID]
		FROM @KeywordsTable T1
		LEFT JOIN {databaseOwner}{objectQualifier}RZC_Products P1
		ON	P1.[ModelName] LIKE '%' + T1.[Keyword] + '%'
			OR P1.[ModelNumber] LIKE '%' + T1.[Keyword] + '%'
			OR P1.[Description] Like '%' + T1.[Keyword] + '%'
			OR P1.[Summary] Like '%' + T1.[Keyword] + '%'
	) S2
	ON S2.[ProductID] = P.[ProductID]
	LEFT JOIN
	(
		SELECT CP1.[ProductID]
		FROM @CatListTable CT
		INNER JOIN {databaseOwner}{objectQualifier}RZC_CategoryProduct CP1
		ON CP1.[CategoryID] = CT.[CategoryID]
		GROUP BY CP1.[ProductID]
		HAVING COUNT(DISTINCT CT.[CategoryID]) = @CatCount
	) CP2
	ON CP2.[ProductID] = P.[ProductID]
	WHERE
		(P.[UnitCost] >= @MinPrice OR @MinPrice = -1)
		AND (P.[UnitCost] <= @MaxPrice OR @MaxPrice = -1)
		AND (S2.[ProductID] IS NOT NULL OR @KeyCount < 1)
		AND (CP2.[ProductID] IS NOT NULL OR @CatCount < 1)
		AND (
			@UserID = 0
			OR (
				P.[ProductID] NOT IN (
					SELECT
						VR.[ProductID]
					FROM
						{databaseOwner}{objectQualifier}RZC_ProductVisibilityRole VR
						JOIN {databaseOwner}{objectQualifier}UserRoles UR ON UR.[RoleID] = VR.[RoleID]
						JOIN {databaseOwner}{objectQualifier}Roles R ON R.[RoleID] = UR.[RoleID]
					WHERE
						R.[Status] = 1
						AND VR.[Action] = 'Hide'
						AND UR.[UserID] = @UserID
						AND @Now BETWEEN ISNULL(UR.[EffectiveDate], @Now) AND ISNULL(UR.[ExpiryDate], @Now)
				)
				AND (
					P.[ShowProductRole] = 0 OR P.[ProductID] IN (
						SELECT
							VR.[ProductID]
						FROM
							{databaseOwner}{objectQualifier}RZC_ProductVisibilityRole VR
							JOIN {databaseOwner}{objectQualifier}UserRoles UR ON UR.[RoleID] = VR.[RoleID]
							JOIN {databaseOwner}{objectQualifier}Roles R ON R.[RoleID] = UR.[RoleID]
						WHERE
							R.[Status] = 1
							AND VR.[Action] = 'Show'
							AND UR.[UserID] = @UserID
							AND @Now BETWEEN ISNULL(UR.[EffectiveDate], @Now) AND ISNULL(UR.[ExpiryDate], @Now)
					)
				)
			)
		)
		AND (P.[LogicallyDeleted] <> 1 AND P.[Archived] <> 1 AND P.[HideProduct] <> 1)
		AND (P.[StoreID] = @StoreID OR P.[Share] = 1 OR @StoreID = -1)
		AND P.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListAutoCompleteProducts
	@SearchText NVARCHAR(MAX) = NULL,
	@UserID INT = NULL,
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	DECLARE @Now DATETIME = GETDATE()
	DECLARE @SearchTable TABLE
	(
		[Value] NVARCHAR(250)
	)
	INSERT INTO
		@SearchTable ([Value])
	SELECT
		LTRIM(RTRIM([Value]))
	FROM
		{databaseOwner}{objectQualifier}RZC_FxSplit(@SearchText, ',')
	DELETE FROM
		@SearchTable
	WHERE
		NULLIF([Value], '') IS NULL
	SELECT
		P.[ProductID]
	FROM
		@SearchTable T
	CROSS APPLY
		{databaseOwner}{objectQualifier}RZC_SearchKeys S
	INNER JOIN
		{databaseOwner}{objectQualifier}RZC_Products P
	ON
		P.[ProductID] = S.[ProductID]
	CROSS APPLY (
		SELECT
			LTRIM(RTRIM([Value])) [Value]
		FROM
			{databaseOwner}{objectQualifier}RZC_FxSplit(S.[SearchTerm], ',')
	) S2
	WHERE
		S2.[Value] LIKE '%' + T.[Value] + '%'
		AND (P.[LogicallyDeleted] <> 1 AND P.[Archived] <> 1 AND P.[HideProduct] <> 1)
		AND (P.[StoreID] = @StoreID OR P.[Share] = 1 OR @StoreID = -1)
		AND P.[PortalID] = @PortalID
	UNION
	SELECT
		P.[ProductID]
	FROM
		@SearchTable T
	INNER JOIN
		{databaseOwner}{objectQualifier}RZC_Products P
	ON
		P.[ModelName] LIKE '%' + T.[Value] + '%'
	WHERE
		(
			@UserID = 0
			OR (
				P.[ProductID] NOT IN (
					SELECT
						VR.[ProductID]
					FROM
						{databaseOwner}{objectQualifier}RZC_ProductVisibilityRole VR
						JOIN {databaseOwner}{objectQualifier}UserRoles UR ON UR.[RoleID] = VR.[RoleID]
						JOIN {databaseOwner}{objectQualifier}Roles R ON R.[RoleID] = UR.[RoleID]
					WHERE
						R.[Status] = 1
						AND VR.[Action] = 'Hide'
						AND UR.[UserID] = @UserID
						AND @Now BETWEEN ISNULL(UR.[EffectiveDate], @Now) AND ISNULL(UR.[ExpiryDate], @Now)
				)
				AND (
					P.[ShowProductRole] = 0 OR P.[ProductID] IN (
						SELECT
							VR.[ProductID]
						FROM
							{databaseOwner}{objectQualifier}RZC_ProductVisibilityRole VR
							JOIN {databaseOwner}{objectQualifier}UserRoles UR ON UR.[RoleID] = VR.[RoleID]
							JOIN {databaseOwner}{objectQualifier}Roles R ON R.[RoleID] = UR.[RoleID]
						WHERE
							R.[Status] = 1
							AND VR.[Action] = 'Show'
							AND UR.[UserID] = @UserID
							AND @Now BETWEEN ISNULL(UR.[EffectiveDate], @Now) AND ISNULL(UR.[ExpiryDate], @Now)
					)
				)
			)
		)
		AND (P.[LogicallyDeleted] <> 1 AND P.[Archived] <> 1 AND P.[HideProduct] <> 1)
		AND (P.[StoreID] = @StoreID OR P.[Share] = 1 OR @StoreID = -1)
		AND P.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListBookableProductDisabledDates
	@ProductID INT = NULL
AS
BEGIN
	SELECT
		BDD.*
	FROM
		{databaseOwner}{objectQualifier}RZC_BookingDisabledDates BDD
	WHERE
		BDD.[ProductID] = @ProductID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListBookableProductDisabledTimes
	@ProductID INT = NULL
AS
BEGIN
	SELECT
		BDT.*
	FROM
		{databaseOwner}{objectQualifier}RZC_BookingDisabledTimes BDT
	WHERE
		BDT.[ProductID] = @ProductID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListBundleProducts
	@ProductID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		P.*, I.[ThumbImage], I.[LargeImage], I.[ZoomImage], V.[HasVariants]
	FROM
		{databaseOwner}{objectQualifier}RZC_Products P
	INNER JOIN
		{databaseOwner}{objectQualifier}RZC_BundleProducts BP
	ON
		P.[ProductID] = BP.[BundleProductID]
	OUTER APPLY
	(
		SELECT TOP 1
			PI.*
		FROM
			{databaseOwner}{objectQualifier}RZC_ProductImages PI
		WHERE
			PI.[ProductID] = P.[ProductID]
		ORDER BY
			PI.[SortOrder]
	) I
	CROSS APPLY
	(
		SELECT CASE WHEN EXISTS
		(
			SELECT
				PV.[VariantID]
			FROM
				{databaseOwner}{objectQualifier}RZC_ProductVariant PV
			WHERE
				PV.[ProductID] = P.[ProductID]
		)
		THEN
			CAST(1 AS BIT)
		ELSE
			CAST(0 AS BIT)
		END
		AS [HasVariants]
	) V
	WHERE
		BP.[ProductID] = @ProductID
		AND P.[PortalID] = @PortalID
		AND (
			P.[LogicallyDeleted] <> 1
			AND P.[Archived] <> 1
			AND P.[HideProduct] <> 1
		)
	ORDER BY
		P.[SortOrder] ASC
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListCategories
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		C.*
	FROM
		{databaseOwner}{objectQualifier}RZC_Category C
	WHERE
		(C.[StoreID] = @StoreID OR C.[Share] = 1)
		AND C.[PortalID] = @PortalID
	ORDER BY
		C.[SortOrder] ASC, C.[ParentID] ASC
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListCategoriesByFilter
	@PageNumber INT = NULL,
	@PageSize INT = NULL,
	@OrderColumn VARCHAR(128) = NULL,
	@OrderDirection VARCHAR(4) = NULL,
	@SearchValue NVARCHAR(256) = NULL,
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SET NOCOUNT ON;
	DECLARE @PageRecordStart INT
	DECLARE @PageRecordEnd INT
	SET @PageRecordStart = ((@PageNumber - 1) * @PageSize) + 1
	SET @PageRecordEnd = @PageNumber * @PageSize
	;WITH [CategoriesPage] AS
	(
		SELECT
			(
				CASE
					WHEN @OrderColumn = 'CategoryName' AND @OrderDirection = 'ASC' THEN ROW_NUMBER() OVER (ORDER BY C.[CategoryName] ASC)
					WHEN @OrderColumn = 'CategoryName' AND @OrderDirection = 'DESC' THEN ROW_NUMBER() OVER (ORDER BY C.[CategoryName] DESC)
					WHEN @OrderColumn = 'SortOrder' AND @OrderDirection = 'ASC' THEN ROW_NUMBER() OVER (ORDER BY C.[SortOrder] ASC)
					WHEN @OrderColumn = 'SortOrder' AND @OrderDirection = 'DESC' THEN ROW_NUMBER() OVER (ORDER BY C.[SortOrder] DESC)
					WHEN @OrderColumn = 'ParentID' AND @OrderDirection = 'ASC' THEN ROW_NUMBER() OVER (ORDER BY C.[ParentID] ASC)
					WHEN @OrderColumn = 'ParentID' AND @OrderDirection = 'DESC' THEN ROW_NUMBER() OVER (ORDER BY C.[ParentID] DESC)
					WHEN @OrderColumn = 'CatSEOURL' AND @OrderDirection = 'ASC' THEN ROW_NUMBER() OVER (ORDER BY C.[CatSEOURL] ASC)
					WHEN @OrderColumn = 'CatSEOURL' AND @OrderDirection = 'DESC' THEN ROW_NUMBER() OVER (ORDER BY C.[CatSEOURL] DESC)
					WHEN @OrderColumn = 'Featured' AND @OrderDirection = 'ASC' THEN ROW_NUMBER() OVER (ORDER BY C.[Featured] ASC)
					WHEN @OrderColumn = 'Featured' AND @OrderDirection = 'DESC' THEN ROW_NUMBER() OVER (ORDER BY C.[Featured] DESC)
				ELSE ROW_NUMBER() OVER (ORDER BY C.[CategoryID] ASC)
				END
			) AS [RowNo], C.*
		FROM
			{databaseOwner}{objectQualifier}RZC_Category C
		WHERE
			(C.[StoreID] = @StoreID)
			AND C.[PortalID] = @PortalID
			AND (
				C.[CategoryName] LIKE '%' + @SearchValue + '%'
				OR C.[CatDescription] LIKE '%' + @SearchValue + '%'
				OR C.[CatSEOURL] LIKE '%' + @SearchValue + '%'
			)
	)
	SELECT
		*,
		TotalRecords = (
			SELECT COUNT(*) FROM [CategoriesPage]
		),
		MoreRecords = (
			SELECT COUNT(*) FROM [CategoriesPage]
			WHERE [RowNo] > @PageRecordEnd
		)
	FROM
		[CategoriesPage]
	WHERE
		[RowNo] BETWEEN @PageRecordStart AND @PageRecordEnd
	ORDER BY
		[RowNo];
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListCategoriesByPathOrder
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	;WITH [CategoryPage] AS
	(
		SELECT
			C.*,
			CAST(ROW_NUMBER() OVER(PARTITION BY C.[ParentID] ORDER BY C.[SortOrder]) AS VARCHAR(MAX)) AS [Path]
		FROM
			{databaseOwner}{objectQualifier}RZC_Category C
		WHERE
			NULLIF(C.[ParentID], 0) IS NULL
			AND (C.[StoreID] = @StoreID OR C.[Share] = 1)
			AND C.[PortalID] = @PortalID
		UNION ALL
		SELECT
			P.*,
			[Path] + CAST(ROW_NUMBER() OVER(PARTITION BY P.[ParentID] ORDER BY P.[SortOrder]) AS VARCHAR(MAX))
		FROM
			[CategoryPage] CP
		JOIN
			{databaseOwner}{objectQualifier}RZC_Category P
		ON
			P.[ParentID] = CP.[CategoryID]
	)
	SELECT
		CP.*
	FROM
		[CategoryPage] CP
	ORDER BY
		CP.[Path] ASC
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListCategoriesRevenueByFilter
	@PageNumber INT = NULL,
	@PageSize INT = NULL,
	@From DATETIME = NULL,
	@To DATETIME = NULL,
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SET NOCOUNT ON;
	DECLARE @PageRecordStart INT
	DECLARE @PageRecordEnd INT
	SET @PageRecordStart = ((@PageNumber - 1) * @PageSize) + 1
	SET @PageRecordEnd = @PageNumber * @PageSize
	;WITH [SalePage] AS
	(
		SELECT
			ROW_NUMBER() OVER (ORDER BY MAX(C.[CategoryName]) ASC, OD.[ProductID] ASC) AS [RowNo],
			OD.[ProductID], MAX(OD.[ProductSKU]) AS [ProductSKU], MAX(OD.[ProductName]) AS [ProductName], MAX(C.[CategoryName]) AS [CategoryName],
			COUNT(O.[OrderID]) AS [TotalOrders], SUM(OD.[Quantity] * OD.[UnitCost]) AS [Revenue]
		FROM
			{databaseOwner}{objectQualifier}RZC_StoreOrderDetails OD
		INNER JOIN
			{databaseOwner}{objectQualifier}RZC_StoreOrders O
		ON
			O.[OrderID] = OD.[OrderID]
		INNER JOIN
			{databaseOwner}{objectQualifier}RZC_PayHist P
		ON
			P.[OrderID] = O.[OrderID]
		OUTER APPLY (
			SELECT
				[CategoryName]
			FROM
				{databaseOwner}{objectQualifier}RZC_FxGetProductTopLevelCategory(OD.[ProductID])
		) C
		WHERE
			O.[DeletedFlag] <> 1
			AND O.[Status] NOT IN ('BillMeLater', 'Cancelled', 'Incomplete', 'Returned')
			AND (
				CONVERT(DATE, O.[OrderDate]) BETWEEN ISNULL(@From, CAST(-53690 AS DATETIME)) AND ISNULL(@To, GETDATE())
			)
			AND P.[Success] = 1
			AND P.[TransType] = 'Sale'
			AND (O.[StoreID] = @StoreID OR @StoreID = -1)
			AND O.[PortalID] = @PortalID
		GROUP BY
			OD.[ProductID], OD.[ProductSKU]
	)
	SELECT
		*,
		TotalRecords = (
			SELECT COUNT(*) FROM [SalePage]
		),
		MoreRecords = (
			SELECT COUNT(*) FROM [SalePage]
			WHERE [RowNo] > @PageRecordEnd
		)
	FROM
		[SalePage]
	WHERE
		[RowNo] BETWEEN @PageRecordStart AND @PageRecordEnd
	ORDER BY
		[RowNo];
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListCategoryDirectChilds
	@CategoryID INT = NULL,
	@ShowProdCount BIT = 0
AS
BEGIN
	SELECT
		C.[CategoryID],
		CASE WHEN @ShowProdCount = 0 THEN C.[CategoryName]
		ELSE 
			C.[CategoryName] + ' (' + CAST((
				SELECT
					COUNT(CP.[ProductID])
				FROM
					{databaseOwner}{objectQualifier}RZC_CategoryProduct CP
				INNER JOIN
					{databaseOwner}{objectQualifier}RZC_Products P
				ON
					CP.[ProductID] = P.[ProductID]
				WHERE
					CP.[CategoryID] = C.[CategoryID]
					AND (P.[LogicallyDeleted] <> 1 AND P.[Archived] <> 1 AND P.[HideProduct] <> 1)
			) AS VARCHAR) + ')'
		END AS [CategoryName],
		(
			SELECT
				COUNT(C2.[CategoryID])
			FROM
				{databaseOwner}{objectQualifier}RZC_Category C2
			WHERE
				C2.[ParentID] = C.[CategoryID]
		) AS [DirectChildsCount],
		C.[ParentID], C.[CatSEOURL], C.[SortOrder]
	FROM
		{databaseOwner}{objectQualifier}RZC_Category C
	WHERE
		C.[ParentID] = @CategoryID
	ORDER BY
		[SortOrder] ASC
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListCategoryMenu
	@CatSEOUrlList NVARCHAR(4000) = '',
	@DefaultDeptIdList NVARCHAR(4000) = '',
	@DefaultCatIdList NVARCHAR(4000) = '',
	@ShowProdCount BIT = 0,
	@CollapseBehavior INT = 0, -- { [1: 'Expand First'], [2: 'Expand All'] }
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
	DECLARE @CatSEOUrlTable TABLE ([Value] INT)
	DECLARE @DeptIdsTable TABLE ([Value] INT)
	DECLARE @CatIdsTable TABLE ([Value] INT)
	IF @CatSEOUrlList <> ''
		BEGIN
			SET @CatSEOUrlList = (SELECT {databaseOwner}{objectQualifier}RZC_FxGetCatIDsBySEOUrlList(@CatSEOUrlList, @StoreID, @PortalID))
			INSERT INTO @CatSEOUrlTable SELECT Value FROM {databaseOwner}{objectQualifier}RZC_FxSplit(@CatSEOUrlList, ',')
		END
	IF @DefaultDeptIdList <> ''
		INSERT INTO @DeptIdsTable SELECT Value FROM {databaseOwner}{objectQualifier}RZC_FxSplit(@DefaultDeptIdList, ',')
	IF @DefaultCatIdList <> ''
		INSERT INTO @CatIdsTable SELECT Value FROM {databaseOwner}{objectQualifier}RZC_FxSplit(@DefaultCatIdList, ',')
BEGIN /* Region - Handle Collapse Behavior  */
	-- @CollapseBehavior = 0, do nothing
	IF @CollapseBehavior = 1 -- Add first level children of first root category to the SeoUrl Filtering List
		BEGIN
			INSERT INTO @CatSEOUrlTable
			SELECT	CategoryID
			FROM	{databaseOwner}{objectQualifier}RZC_Category
			WHERE	ParentID = (SELECT TOP 1 [CategoryID] FROM {databaseOwner}{objectQualifier}RZC_Category
								WHERE ([StoreID] = @StoreID OR [Share] = 1) AND [ParentID] = 0
								ORDER BY [SortOrder], [CategoryName], [CategoryID])
		END
	ELSE IF @CollapseBehavior = 2 -- Add first level children of root categories to the SeoUrl Filtering List
		BEGIN
			INSERT INTO @CatSEOUrlTable
			SELECT	[CategoryID]
			FROM	{databaseOwner}{objectQualifier}RZC_Category
			WHERE	ParentID IN (SELECT [CategoryID] FROM {databaseOwner}{objectQualifier}RZC_Category
								WHERE ([StoreID] = @StoreID OR [Share] = 1) AND [ParentID] = 0)
		END
END
BEGIN
	WITH CategoryList1 AS
	(
		SELECT *
		FROM {databaseOwner}{objectQualifier}RZC_Category
		WHERE
			([StoreID] = @StoreID OR [Share] = 1)
			AND (
				[ParentID] = 0
				OR @DefaultDeptIdList <> ''
				OR @DefaultCatIdList <> ''
				OR [CategoryID] IN (
					SELECT [CategoryID] FROM {databaseOwner}{objectQualifier}RZC_Category
					WHERE [CategoryID] IN (SELECT Value FROM @CatSEOUrlTable)
				)
			)
			AND (@DefaultDeptIdList = '' OR [CategoryID] IN (
				SELECT [CategoryID] FROM {databaseOwner}{objectQualifier}RZC_Category
				WHERE [DepartmentID] IN (SELECT Value FROM @DeptIdsTable)
			))
			AND (@DefaultCatIdList = '' OR [CategoryID] IN (
				SELECT [CategoryID] FROM {databaseOwner}{objectQualifier}RZC_Category
				WHERE [CategoryID] IN (SELECT Value FROM @CatIdsTable)
			))
		UNION ALL
		SELECT C.*
		FROM {databaseOwner}{objectQualifier}RZC_Category C, CategoryList1 M
		WHERE C.[CategoryID] = M.[ParentID] AND M.[ParentID] <> 0
	)
	-- DISTINCT, since Collapse Behavior might cause duplicates if @CatSEOUrlList has items
	SELECT DISTINCT
			C.[CategoryID],
			CASE WHEN @ShowProdCount = 0 THEN C.[CategoryName]
			ELSE
				C.[CategoryName] + ' (' + CAST((
					SELECT COUNT(CP.[ProductID])
					FROM {databaseOwner}{objectQualifier}RZC_CategoryProduct CP
					INNER JOIN {databaseOwner}{objectQualifier}RZC_Products P
					ON CP.[ProductID] = P.[ProductID]
					WHERE
					CP.[CategoryID] = C.[CategoryID]
					AND (P.[LogicallyDeleted] <> 1 AND P.[Archived] <> 1 AND P.[HideProduct] <> 1)
				) AS VARCHAR) + ')'
			END AS [CategoryName],
			(SELECT COUNT(C2.[CategoryID]) FROM {databaseOwner}{objectQualifier}RZC_Category C2
			WHERE C2.[ParentID] = C.[CategoryID]) AS [DirectChildsCount],
			C.[ParentID], C.[CatSEOURL], C.[SortOrder]
	FROM
		CategoryList1 C
	ORDER BY [ParentID], [SortOrder], [CategoryName], [CategoryID]
	OPTION (MaxRecursion 0)-- default Max = 100, Set to 0 for Infinite CTE Recursion
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListCategoryQuantityDiscounts
	@CategoryID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		CQD.*
	FROM
		{databaseOwner}{objectQualifier}RZC_CategoryQtyDiscounts CQD
	INNER JOIN
		{databaseOwner}{objectQualifier}RZC_Category C
	ON
		C.[CategoryID] = CQD.[CategoryID]
	WHERE
		C.[CategoryID] = @CategoryID
		AND C.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListClassDiscountsByName
	@PriceClass VARCHAR(20) = NULL,
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		PC.*
	FROM
		{databaseOwner}{objectQualifier}RZC_PriceClass PC
	WHERE
		PC.[PriceClass] = @PriceClass
		AND (PC.[StoreID] = @StoreID OR @StoreID = -1)
		AND PC.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListClientCredentials
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		CC.*
	FROM
		{databaseOwner}{objectQualifier}RZC_ClientCredentials CC
	WHERE
		(CC.[StoreID] = @StoreID OR @StoreID = -1)
		AND CC.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListCouponOrders
	@CouponID INT = NULL,
	@CouponCode VARCHAR(50) = NULL,
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		O.*
	FROM
		{databaseOwner}{objectQualifier}RZC_StoreOrders O
	INNER JOIN
		{databaseOwner}{objectQualifier}RZC_Coupons C
	ON
		C.[CouponID] = O.[CouponID]
	WHERE
		(C.[CouponID] = @CouponID OR NULLIF(@CouponID, -1) IS NULL)
		AND (C.[CouponCode] = @CouponCode OR NULLIF(@CouponCode, '') IS NULL)
		AND (O.[StoreID] = @StoreID OR @StoreID = -1)
		AND O.[PortalID] = @PortalID
	ORDER BY
		O.[OrderDate] DESC
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListCouponProducts
	@CouponID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		CP.*
	FROM
		{databaseOwner}{objectQualifier}RZC_CouponProduct CP
	INNER JOIN
		{databaseOwner}{objectQualifier}RZC_Coupons C
	ON
		C.[CouponID] = CP.[CouponID]
	WHERE
		CP.[CouponID] = @CouponID
		AND C.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListCouponProductVariants
	@CouponID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		CV.*
	FROM
		{databaseOwner}{objectQualifier}RZC_CouponVariant CV
	INNER JOIN
		{databaseOwner}{objectQualifier}RZC_Coupons C
	ON
		C.[CouponID] = CV.[CouponID]
	WHERE
		CV.[CouponID] = @CouponID
		AND C.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListCouponsByFilter
	@PageNumber INT = NULL,
	@PageSize INT = NULL,
	@SearchValue NVARCHAR(256) = NULL,
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SET NOCOUNT ON;
	DECLARE @PageRecordStart INT
	DECLARE @PageRecordEnd INT
	SET @PageRecordStart = ((@PageNumber - 1) * @PageSize) + 1
	SET @PageRecordEnd = @PageNumber * @PageSize
	;WITH [CouponsPage] AS
	(
		SELECT
			ROW_NUMBER() OVER (ORDER BY C.[CouponID] ASC) AS [RowNo], C.*
		FROM
			{databaseOwner}{objectQualifier}RZC_Coupons C
		WHERE
			(C.[StoreID] = @StoreID)
			AND C.[PortalID] = @PortalID
			AND (NULLIF(@SearchValue, '') IS NULL OR (
					C.[CouponCode] LIKE '%' + @SearchValue + '%'
					OR C.[CouponName] LIKE '%' + @SearchValue + '%'
				)
			)
	)
	SELECT
		C.*, P.[HasProducts], V.[HasVariants],
		TotalRecords = (
			SELECT COUNT(*) FROM [CouponsPage]
		),
		MoreRecords = (
			SELECT COUNT(*) FROM [CouponsPage]
			WHERE [RowNo] > @PageRecordEnd
		)
	FROM
		[CouponsPage] C
	CROSS APPLY
	(
		SELECT CASE WHEN EXISTS
		(
			SELECT CP.[ID]
			FROM {databaseOwner}{objectQualifier}RZC_CouponProduct CP
			WHERE CP.[CouponID] = C.[CouponID]
		)
		THEN CAST(1 AS BIT)
		ELSE CAST(0 AS BIT)
		END AS [HasProducts]
	) P
	CROSS APPLY
	(
		SELECT CASE WHEN EXISTS
		(
			SELECT CV.[ID]
			FROM {databaseOwner}{objectQualifier}RZC_CouponVariant CV
			WHERE CV.[CouponID] = C.[CouponID]
		)
		THEN CAST(1 AS BIT)
		ELSE CAST(0 AS BIT)
		END AS [HasVariants]
	) V
	WHERE
		C.[RowNo] BETWEEN @PageRecordStart AND @PageRecordEnd
	ORDER BY
		C.[RowNo]
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListCustomersByFilter
	@PageNumber INT = NULL,
	@PageSize INT = NULL,
	@OrderColumn VARCHAR(128) = NULL,
	@OrderDirection VARCHAR(4) = NULL,
	@SearchValue NVARCHAR(256) = NULL,
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SET NOCOUNT ON;
	DECLARE @PageRecordStart INT
	DECLARE @PageRecordEnd INT
	SET @PageRecordStart = ((@PageNumber - 1) * @PageSize) + 1
	SET @PageRecordEnd = @PageNumber * @PageSize
	;WITH [CustomersPage] AS
	(
		SELECT
			(
				CASE
					WHEN @OrderColumn = 'CustomerID' AND @OrderDirection = 'ASC' THEN ROW_NUMBER() OVER (ORDER BY C.[CustomerID] ASC)
					WHEN @OrderColumn = 'CustomerID' AND @OrderDirection = 'DESC' THEN ROW_NUMBER() OVER (ORDER BY C.[CustomerID] DESC)
					WHEN @OrderColumn = 'FirstName' AND @OrderDirection = 'ASC' THEN ROW_NUMBER() OVER (ORDER BY C.[FirstName] ASC)
					WHEN @OrderColumn = 'FirstName' AND @OrderDirection = 'DESC' THEN ROW_NUMBER() OVER (ORDER BY C.[FirstName] DESC)
					WHEN @OrderColumn = 'LastName' AND @OrderDirection = 'ASC' THEN ROW_NUMBER() OVER (ORDER BY C.[LastName] ASC)
					WHEN @OrderColumn = 'LastName' AND @OrderDirection = 'DESC' THEN ROW_NUMBER() OVER (ORDER BY C.[LastName] DESC)
					WHEN @OrderColumn = 'Address1' AND @OrderDirection = 'ASC' THEN ROW_NUMBER() OVER (ORDER BY C.[Address1] ASC)
					WHEN @OrderColumn = 'Address1' AND @OrderDirection = 'DESC' THEN ROW_NUMBER() OVER (ORDER BY C.[Address1] DESC)
					WHEN @OrderColumn = 'City' AND @OrderDirection = 'ASC' THEN ROW_NUMBER() OVER (ORDER BY C.[City] ASC)
					WHEN @OrderColumn = 'City' AND @OrderDirection = 'DESC' THEN ROW_NUMBER() OVER (ORDER BY C.[City] DESC)
					WHEN @OrderColumn = 'Country' AND @OrderDirection = 'ASC' THEN ROW_NUMBER() OVER (ORDER BY C.[Country] ASC)
					WHEN @OrderColumn = 'Country' AND @OrderDirection = 'DESC' THEN ROW_NUMBER() OVER (ORDER BY C.[Country] DESC)
					WHEN @OrderColumn = 'State' AND @OrderDirection = 'ASC' THEN ROW_NUMBER() OVER (ORDER BY C.[State] ASC)
					WHEN @OrderColumn = 'State' AND @OrderDirection = 'DESC' THEN ROW_NUMBER() OVER (ORDER BY C.[State] DESC)
					WHEN @OrderColumn = 'Zip' AND @OrderDirection = 'ASC' THEN ROW_NUMBER() OVER (ORDER BY C.[Zip] ASC)
					WHEN @OrderColumn = 'Zip' AND @OrderDirection = 'DESC' THEN ROW_NUMBER() OVER (ORDER BY C.[Zip] DESC)
					WHEN @OrderColumn = 'DNNLogin' AND @OrderDirection = 'ASC' THEN ROW_NUMBER() OVER (ORDER BY C.[DNNLogin] ASC)
					WHEN @OrderColumn = 'DNNLogin' AND @OrderDirection = 'DESC' THEN ROW_NUMBER() OVER (ORDER BY C.[DNNLogin] DESC)
					WHEN @OrderColumn = 'DateCreated' AND @OrderDirection = 'ASC' THEN ROW_NUMBER() OVER (ORDER BY C.[DateCreated] ASC)
					WHEN @OrderColumn = 'DateCreated' AND @OrderDirection = 'DESC' THEN ROW_NUMBER() OVER (ORDER BY C.[DateCreated] DESC)
					WHEN @OrderColumn = 'AnniversaryDate' AND @OrderDirection = 'ASC' THEN ROW_NUMBER() OVER (ORDER BY C.[AnniversaryDate] ASC)
					WHEN @OrderColumn = 'AnniversaryDate' AND @OrderDirection = 'DESC' THEN ROW_NUMBER() OVER (ORDER BY C.[AnniversaryDate] DESC)
				ELSE ROW_NUMBER() OVER (ORDER BY C.[CustomerID] ASC)
				END
			) AS [RowNo], C.*
		FROM
			{databaseOwner}{objectQualifier}RZC_Customer C
		WHERE
			(C.[StoreID] = @StoreID OR @StoreID = -1)
			AND C.[PortalID] = @PortalID
			AND (
				C.[FirstName] LIKE '%' + @SearchValue + '%'
				OR C.[LastName] LIKE '%' + @SearchValue + '%'
				OR C.[Address1] LIKE '%' + @SearchValue + '%'
				OR C.[City] LIKE '%' + @SearchValue + '%'
				OR C.[Country] LIKE '%' + @SearchValue + '%'
				OR C.[State] LIKE '%' + @SearchValue + '%'
				OR C.[Zip] LIKE '%' + @SearchValue + '%'
				OR C.[HomePhone] LIKE '%' + @SearchValue + '%'
				OR C.[CellPhone] LIKE '%' + @SearchValue + '%'
				OR C.[WorkPhone] LIKE '%' + @SearchValue + '%'
				OR C.[Email] LIKE '%' + @SearchValue + '%'
				OR C.[DNNLogin] LIKE '%' + @SearchValue + '%'
				OR C.[CompanyName] LIKE '%' + @SearchValue + '%'
			)
	)
	SELECT
		*,
		TotalRecords = (
			SELECT COUNT(*) FROM [CustomersPage]
		),
		MoreRecords = (
			SELECT COUNT(*) FROM [CustomersPage]
			WHERE [RowNo] > @PageRecordEnd
		)
	FROM
		[CustomersPage]
	WHERE
		[RowNo] BETWEEN @PageRecordStart AND @PageRecordEnd
	ORDER BY
		[RowNo];
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListCustomerWalletItems
	@CustomerID INT = NULL,
	@DNNLogin VARCHAR(50) = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		CW.*
	FROM
		{databaseOwner}{objectQualifier}RZC_CustomerWallet CW
	WHERE
		CW.[CustomerID] = @CustomerID
		AND CW.[DNNLogin] = @DNNLogin
		AND CW.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListCustomShipMethods
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		SM.*
	FROM
		{databaseOwner}{objectQualifier}RZC_ShipMethods SM
	WHERE
		(SM.[StoreID] = @StoreID OR SM.[Share] = 1)
		AND SM.[PortalID] = @PortalID
	ORDER BY
		SM.[SortOrder] ASC
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListCustomShippingByFixedAmount
	@PortalID INT = NULL,
	@StoreID INT = NULL
AS
BEGIN
	SELECT
		SM.[ShipMethodID], SM.[ShipMethodName], SM.[ShipMethodAmount], SM.[SurchargeAmount], SM.[SurchargePercentage], SM.[RoleID]
	FROM
		{databaseOwner}{objectQualifier}RZC_ShipMethods SM
	WHERE
		(SM.[StoreID] = @StoreID OR @StoreID = -1)
		AND SM.[PortalID] = @PortalID
	ORDER BY
		SM.[SortOrder]
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListCustomShippingByOrderAmount
	@TotalOrder DECIMAL(18,2) = NULL,
	@CategoryID INT = NULL,
	@CatList VARCHAR(1024) = NULL,
	@PortalID INT = NULL,
	@StoreID INT = NULL
AS
BEGIN
	SET @CatList = NULLIF(LTRIM(RTRIM(@CatList)), '')
	SELECT
		SM.*
	FROM
		(
			SELECT
				SBA.[ShipCostID], SBA.[Price],
				SM.[ShipMethodID], SM.[ShipMethodName], SM.[ShipMethodAmount], SM.[SurchargeAmount], SM.[SurchargePercentage], SM.[RoleID], SM.[SortOrder],
				C.[CategoryID], C.[CategoryName],
				ROW_NUMBER() OVER (PARTITION BY SM.[ShipMethodID] ORDER BY SBA.[Price] ASC) [RowNo]
			FROM
				{databaseOwner}{objectQualifier}RZC_ShippingByAmount SBA
				INNER JOIN
					{databaseOwner}{objectQualifier}RZC_ShipMethods SM
					ON
						SBA.[ShipMethodID] = SM.[ShipMethodID]
				LEFT OUTER JOIN
					{databaseOwner}{objectQualifier}RZC_Category C
					ON
						SBA.[CategoryID] = C.[CategoryID]
			WHERE
				(@TotalOrder BETWEEN SBA.[AmountFrom] AND SBA.[AmountTo])
				AND (SBA.[CategoryID] = @CategoryID OR @CategoryID = -1)
				AND (NULLIF(@CatList, '') IS NULL OR (
					SBA.[CategoryID] IN (SELECT LTRIM(RTRIM([Value])) FROM {databaseOwner}{objectQualifier}RZC_FxSplit(@CatList, ','))
					OR SBA.[CategoryID] = 0
				))
				AND (SBA.[StoreID] = @StoreID OR @StoreID = -1)
				AND SBA.[PortalID] = @PortalID
		) SM
	WHERE
		SM.[RowNo] = 1
	ORDER BY
		SM.[SortOrder]
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListCustomShippingByPostalCode
	@CountryCode VARCHAR(2) = NULL,
	@PostalCode VARCHAR(16) = NULL,
	@CategoryID INT = NULL,
	@CatList VARCHAR(1024) = NULL,
	@PortalID INT = NULL,
	@StoreID INT = NULL
AS
BEGIN
	SET @CatList = NULLIF(LTRIM(RTRIM(@CatList)), '')
	SELECT
		SM.*
	FROM
		(
			SELECT
				SBZ.[ShipCostID], SBZ.[Price],
				SM.[ShipMethodID], SM.[ShipMethodName], SM.[ShipMethodAmount], SM.[SurchargeAmount], SM.[SurchargePercentage], SM.[RoleID], SM.[SortOrder],
				C.[CategoryID], C.[CategoryName],
				ROW_NUMBER() OVER (PARTITION BY SM.[ShipMethodID] ORDER BY SBZ.[Price] ASC) [RowNo]
			FROM
				{databaseOwner}{objectQualifier}RZC_ShippingByZipCode SBZ
				INNER JOIN
					{databaseOwner}{objectQualifier}RZC_ShipMethods SM
					ON
						SBZ.[ShipMethodID] = SM.[ShipMethodID]
				LEFT OUTER JOIN
					{databaseOwner}{objectQualifier}RZC_Category C
					ON
						SBZ.[CategoryID] = C.[CategoryID]
			WHERE
				(SBZ.[Country] = @CountryCode AND SBZ.[ZipCode] = @PostalCode)
				AND (SBZ.[CategoryID] = @CategoryID OR @CategoryID = -1)
				AND (NULLIF(@CatList, '') IS NULL OR (
					SBZ.[CategoryID] IN (SELECT LTRIM(RTRIM([Value])) FROM {databaseOwner}{objectQualifier}RZC_FxSplit(@CatList, ','))
					OR SBZ.[CategoryID] = 0
				))
				AND (SBZ.[StoreID] = @StoreID OR @StoreID = -1)
				AND SBZ.[PortalID] = @PortalID
		) SM
	WHERE
		SM.[RowNo] = 1
	ORDER BY
		SM.[SortOrder]
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListCustomShippingByQuantity
	@Quantity INT = NULL,
	@CategoryID INT = NULL,
	@CatList VARCHAR(1024) = NULL,
	@PortalID INT = NULL,
	@StoreID INT = NULL
AS
BEGIN
	SET @CatList = NULLIF(LTRIM(RTRIM(@CatList)), '')
	SELECT
		SM.*
	FROM
		(
			SELECT
				SBQ.[ShipCostID], SBQ.[Price],
				SM.[ShipMethodID], SM.[ShipMethodName], SM.[ShipMethodAmount], SM.[SurchargeAmount], SM.[SurchargePercentage], SM.[RoleID], SM.[SortOrder],
				C.[CategoryID], C.[CategoryName],
				ROW_NUMBER() OVER (PARTITION BY SM.[ShipMethodID] ORDER BY SBQ.[Price] ASC) [RowNo]
			FROM
				{databaseOwner}{objectQualifier}RZC_ShippingByQuantity SBQ
				INNER JOIN
					{databaseOwner}{objectQualifier}RZC_ShipMethods SM
					ON
						SBQ.[ShipMethodID] = SM.[ShipMethodID]
				LEFT OUTER JOIN
					{databaseOwner}{objectQualifier}RZC_Category C
					ON
						SBQ.[CategoryID] = C.[CategoryID]
			WHERE
				(@Quantity BETWEEN SBQ.[QuantityFrom] AND SBQ.[QuantityTo])
				AND (SBQ.[CategoryID] = @CategoryID OR @CategoryID = -1)
				AND (NULLIF(@CatList, '') IS NULL OR (
					SBQ.[CategoryID] IN (SELECT LTRIM(RTRIM([Value])) FROM {databaseOwner}{objectQualifier}RZC_FxSplit(@CatList, ','))
					OR SBQ.[CategoryID] = 0
				))
				AND (SBQ.[StoreID] = @StoreID OR @StoreID = -1)
				AND SBQ.[PortalID] = @PortalID
		) SM
	WHERE
		SM.[RowNo] = 1
	ORDER BY
		SM.[SortOrder]
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListCustomShippingByWeight
	@Weight DECIMAL(18,2) = NULL,
	@CategoryID INT = NULL,
	@CatList VARCHAR(1024) = NULL,
	@PortalID INT = NULL,
	@StoreID INT = NULL
AS
BEGIN
	SET @CatList = NULLIF(LTRIM(RTRIM(@CatList)), '')
	SELECT
		SM.*
	FROM
		(
			SELECT
				SBW.[ShipCostID], SBW.[Price],
				SM.[ShipMethodID], SM.[ShipMethodName], SM.[ShipMethodAmount], SM.[SurchargeAmount], SM.[SurchargePercentage], SM.[RoleID], SM.[SortOrder],
				C.[CategoryID], C.[CategoryName],
				ROW_NUMBER() OVER (PARTITION BY SM.[ShipMethodID] ORDER BY SBW.[Price] ASC) [RowNo]
			FROM
				{databaseOwner}{objectQualifier}RZC_ShippingByWeight SBW
				INNER JOIN
					{databaseOwner}{objectQualifier}RZC_ShipMethods SM
					ON
						SBW.[ShipMethodID] = SM.[ShipMethodID]
				LEFT OUTER JOIN
					{databaseOwner}{objectQualifier}RZC_Category C
					ON
						SBW.[CategoryID] = C.[CategoryID]
			WHERE
				(@Weight BETWEEN SBW.[WeightFrom] AND SBW.[WeightTo])
				AND (SBW.[CategoryID] = @CategoryID OR @CategoryID = -1)
				AND (NULLIF(@CatList, '') IS NULL OR (
					SBW.[CategoryID] IN (SELECT LTRIM(RTRIM([Value])) FROM {databaseOwner}{objectQualifier}RZC_FxSplit(@CatList, ','))
					OR SBW.[CategoryID] = 0
				))
				AND (SBW.[StoreID] = @StoreID OR @StoreID = -1)
				AND SBW.[PortalID] = @PortalID
		) SM
	WHERE
		SM.[RowNo] = 1
	ORDER BY
		SM.[SortOrder]
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListCustomZoneShippingByQuantity
	@CountryCode VARCHAR(2) = NULL,
	@RegionCode VARCHAR(6) = NULL,
	@PostalCode NVARCHAR(16) = NULL,
	@Quantity INT = NULL,
	@CategoryID INT = NULL,
	@PortalID INT = NULL,
	@StoreID INT = NULL
AS
BEGIN
	DECLARE @UseCodeLimit BIT = NULL
	SELECT @UseCodeLimit = CASE WHEN EXISTS (
		SELECT
			SZ.[ZoneID]
		FROM
			{databaseOwner}{objectQualifier}RZC_ShipZone SZ
		WHERE
			@PostalCode IN (SELECT * FROM {databaseOwner}{objectQualifier}RZC_FxSplit(SZ.[Codes], ','))
			AND (SZ.[StoreID] = @StoreID OR @StoreID = -1)
			AND SZ.[PortalID] = @PortalID
	) THEN 1 ELSE 0 END
	SELECT
		SM.*
	FROM
		(
			SELECT
				SBQ.[ShipCostID], SBQ.[Price],
				SM.[ShipMethodID], SM.[ShipMethodName], SM.[ShipMethodAmount], SM.[SurchargeAmount], SM.[SurchargePercentage], SM.[RoleID], SM.[SortOrder],
				C.[CategoryID], C.[CategoryName],
				ROW_NUMBER() OVER (PARTITION BY SM.[ShipMethodID] ORDER BY SBQ.[Price] ASC) [RowNo]
			FROM
				{databaseOwner}{objectQualifier}RZC_ShippingByQuantity SBQ
				INNER JOIN
					{databaseOwner}{objectQualifier}RZC_ShipZone SZ
					ON
						SBQ.[ZoneID] = SZ.[ZoneID]
				INNER JOIN
					{databaseOwner}{objectQualifier}RZC_ShipMethods SM
					ON
						SBQ.[ShipMethodID] = SM.[ShipMethodID]
				LEFT OUTER JOIN
					{databaseOwner}{objectQualifier}RZC_Category C
					ON
						SBQ.[CategoryID] = C.[CategoryID]
			WHERE
				(@Quantity BETWEEN SBQ.[QuantityFrom] AND SBQ.[QuantityTo])
				AND (
					@CountryCode IN (SELECT * FROM {databaseOwner}{objectQualifier}RZC_FxSplit(SZ.[Country], ';'))
					AND @RegionCode IN (SELECT * FROM {databaseOwner}{objectQualifier}RZC_FxSplit(SZ.[State], ';'))
					AND (
						(NULLIF(@UseCodeLimit, 0) IS NULL AND NULLIF(SZ.[Codes], '') IS NULL)
						OR (@UseCodeLimit = 1 AND @PostalCode IN (SELECT * FROM {databaseOwner}{objectQualifier}RZC_FxSplit(SZ.[Codes], ',')))
					)
				)
				AND (SBQ.[CategoryID] = @CategoryID OR NULLIF(@CategoryID, -1) IS NULL)
				AND (SBQ.[StoreID] = @StoreID OR @StoreID = -1)
				AND SBQ.[PortalID] = @PortalID
		) SM
	WHERE
		SM.[RowNo] = 1
	ORDER BY
		SM.[SortOrder]
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListCustomZoneShippingByWeight
	@CountryCode VARCHAR(2) = NULL,
	@RegionCode VARCHAR(6) = NULL,
	@PostalCode NVARCHAR(16) = NULL,
	@Weight DECIMAL(18,2) = NULL,
	@CategoryID INT = NULL,
	@PortalID INT = NULL,
	@StoreID INT = NULL
AS
BEGIN
	DECLARE @UseCodeLimit BIT = NULL
	SELECT @UseCodeLimit = CASE WHEN EXISTS (
		SELECT
			SZ.[ZoneID]
		FROM
			{databaseOwner}{objectQualifier}RZC_ShipZone SZ
		WHERE
			@PostalCode IN (SELECT * FROM {databaseOwner}{objectQualifier}RZC_FxSplit(SZ.[Codes], ','))
			AND (SZ.[StoreID] = @StoreID OR @StoreID = -1)
			AND SZ.[PortalID] = @PortalID
	) THEN 1 ELSE 0 END
	SELECT
		SM.*
	FROM
		(
			SELECT
				SBW.[ShipCostID], SBW.[Price],
				SM.[ShipMethodID], SM.[ShipMethodName], SM.[ShipMethodAmount], SM.[SurchargeAmount], SM.[SurchargePercentage], SM.[RoleID], SM.[SortOrder],
				C.[CategoryID], C.[CategoryName],
				ROW_NUMBER() OVER (PARTITION BY SM.[ShipMethodID] ORDER BY SBW.[Price] ASC) [RowNo]
			FROM
				{databaseOwner}{objectQualifier}RZC_ShippingByWeight SBW
				INNER JOIN
					{databaseOwner}{objectQualifier}RZC_ShipZone SZ
					ON
						SBW.[ZoneID] = SZ.[ZoneID]
				INNER JOIN
					{databaseOwner}{objectQualifier}RZC_ShipMethods SM
					ON
						SBW.[ShipMethodID] = SM.[ShipMethodID]
				LEFT OUTER JOIN
					{databaseOwner}{objectQualifier}RZC_Category C
					ON
						SBW.[CategoryID] = C.[CategoryID]
			WHERE
				(@Weight BETWEEN SBW.[WeightFrom] AND SBW.[WeightTo])
				AND (
					@CountryCode IN (SELECT * FROM {databaseOwner}{objectQualifier}RZC_FxSplit(SZ.[Country], ';'))
					AND @RegionCode IN (SELECT * FROM {databaseOwner}{objectQualifier}RZC_FxSplit(SZ.[State], ';'))
					AND (
						(NULLIF(@UseCodeLimit, 0) IS NULL AND NULLIF(SZ.[Codes], '') IS NULL)
						OR (@UseCodeLimit = 1 AND @PostalCode IN (SELECT * FROM {databaseOwner}{objectQualifier}RZC_FxSplit(SZ.[Codes], ',')))
					)
				)
				AND (SBW.[CategoryID] = @CategoryID OR NULLIF(@CategoryID, -1) IS NULL)
				AND (SBW.[StoreID] = @StoreID OR @StoreID = -1)
				AND SBW.[PortalID] = @PortalID
		) SM
	WHERE
		SM.[RowNo] = 1
	ORDER BY
		SM.[SortOrder]
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListDepartments
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		*
	FROM
		{databaseOwner}{objectQualifier}RZC_Department D
	WHERE
		(D.[StoreID] = @StoreID OR D.[Share] = 1)
	ORDER BY
		ParentID, SortOrder
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListEmailCampaigns
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		EC.*
	FROM
		{databaseOwner}{objectQualifier}RZC_EmailCampaign EC
	WHERE
		(EC.[StoreID] = @StoreID OR @StoreID = -1)
		AND EC.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListEmailTemplates
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		ET.*
	FROM
		{databaseOwner}{objectQualifier}RZC_EmailTemplateSC ET
	WHERE
		(ET.[StoreID] = @StoreID OR @StoreID = -1)
		AND ET.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListExpiringCreditCardSubscriptions
	@ExpDays VARCHAR(1024),
	@StoreID INT,
	@PortalID INT
AS
BEGIN
	DECLARE @TodayDate DATE = CONVERT(DATE, GETDATE())
	DECLARE @ExpDaysTbl TABLE ([ExpDays] INT)
	INSERT INTO @ExpDaysTbl SELECT [Value] FROM {databaseOwner}{objectQualifier}RZC_FxSplit(@ExpDays, ',')
	SELECT
		S.*
	FROM
		{databaseOwner}{objectQualifier}RZC_SubscriptionSC S
		JOIN {databaseOwner}{objectQualifier}RZC_PaymentMethods PM ON PM.PayMethodID = S.PayMethodID
	WHERE
		S.[PortalID] = @PortalID
		AND (S.[StoreID] = @StoreID OR @StoreID = -1)
		AND S.[Status] = 'Active'
		AND PM.[Type] = 'CreditCard'
		AND DATEDIFF(DAY, @TodayDate, EOMONTH(LEFT(YEAR(@TodayDate), 2) + RIGHT(S.[ExpRoute], 2) + '-' + LEFT(S.[ExpRoute], 2) + '-01')) IN (SELECT [ExpDays] FROM @ExpDaysTbl)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListExpiringSubscriptions
	@StoreID INT,
	@PortalID INT
AS
BEGIN
	SELECT
		S.*
	FROM
		{databaseOwner}{objectQualifier}RZC_SubscriptionSC S
	WHERE
		S.[PortalID] = @PortalID
		AND (S.[StoreID] = @StoreID OR @StoreID = -1)
		AND S.[Status] = 'Active'
		AND S.[Occurrences] <> 9999
		AND CONVERT(DATE, S.[SubEndDate]) < (
			CASE S.[Interval]
				WHEN 'Weekly' THEN DATEADD(DAY, 7, S.[NextPaymentDate])
				WHEN '2Weeks' THEN DATEADD(DAY, 14, S.[NextPaymentDate])
				WHEN 'Monthly' THEN DATEADD(MONTH, 1, S.[NextPaymentDate])
				WHEN '2Months' THEN DATEADD(MONTH, 2, S.[NextPaymentDate])
				WHEN 'Quarterly' THEN DATEADD(MONTH, 3, S.[NextPaymentDate])
				WHEN 'Semiannual' THEN DATEADD(MONTH, 6, S.[NextPaymentDate])
				WHEN 'Yearly' THEN DATEADD(YEAR, 1, S.[NextPaymentDate])
			END
		)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListFeaturedProducts
	@UserID INT = NULL,
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	DECLARE @Now DATETIME = GETDATE()
	SELECT
		P.*, I.[ThumbImage], I.[LargeImage], I.[ZoomImage], V.[HasVariants]
	FROM
		{databaseOwner}{objectQualifier}RZC_Products P
	OUTER APPLY
	(
		SELECT TOP 1
			PI.*
		FROM
			{databaseOwner}{objectQualifier}RZC_ProductImages PI
		WHERE
			PI.[ProductID] = P.[ProductID]
		ORDER BY
			PI.[SortOrder]
	) I
	CROSS APPLY
	(
		SELECT CASE WHEN EXISTS
		(
			SELECT
				PV.[VariantID]
			FROM
				{databaseOwner}{objectQualifier}RZC_ProductVariant PV
			WHERE
				PV.[ProductID] = P.[ProductID]
		)
		THEN
			CAST(1 AS BIT)
		ELSE
			CAST(0 AS BIT)
		END
		AS [HasVariants]
	) V
	WHERE
		P.[Featured] = 1
		AND P.[LogicallyDeleted] <> 1
		AND P.[Archived] <> 1
		AND P.[HideProduct] <> 1
		AND (
			@UserID = 0
			OR (
				P.[ProductID] NOT IN (
					SELECT
						VR.[ProductID]
					FROM
						{databaseOwner}{objectQualifier}RZC_ProductVisibilityRole VR
						JOIN {databaseOwner}{objectQualifier}UserRoles UR ON UR.[RoleID] = VR.[RoleID]
						JOIN {databaseOwner}{objectQualifier}Roles R ON R.[RoleID] = UR.[RoleID]
					WHERE
						R.[Status] = 1
						AND VR.[Action] = 'Hide'
						AND UR.[UserID] = @UserID
						AND @Now BETWEEN ISNULL(UR.[EffectiveDate], @Now) AND ISNULL(UR.[ExpiryDate], @Now)
				)
				AND (
					P.[ShowProductRole] = 0 OR P.[ProductID] IN (
						SELECT
							VR.[ProductID]
						FROM
							{databaseOwner}{objectQualifier}RZC_ProductVisibilityRole VR
							JOIN {databaseOwner}{objectQualifier}UserRoles UR ON UR.[RoleID] = VR.[RoleID]
							JOIN {databaseOwner}{objectQualifier}Roles R ON R.[RoleID] = UR.[RoleID]
						WHERE
							R.[Status] = 1
							AND VR.[Action] = 'Show'
							AND UR.[UserID] = @UserID
							AND @Now BETWEEN ISNULL(UR.[EffectiveDate], @Now) AND ISNULL(UR.[ExpiryDate], @Now)
					)
				)
			)
		)
		AND (P.[StoreID] = @StoreID OR P.[Share] = 1 OR @StoreID = -1)
		AND P.[PortalID] = @PortalID
	ORDER BY
		P.[SortOrder] ASC
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListFreeShippings
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		SF.*,
		ISNULL(SM.[ShipMethodName], 'No Ship Method') AS [ShipMethodName],
		ISNULL(C.[CategoryName], 'All Categories') AS [CategoryName]
	FROM
		{databaseOwner}{objectQualifier}RZC_ShipFree SF
	LEFT OUTER JOIN
		{databaseOwner}{objectQualifier}RZC_ShipMethods SM
	ON
		SF.[ShipMethodID] = SM.[ShipMethodID]
	LEFT OUTER JOIN
		{databaseOwner}{objectQualifier}RZC_ShipCategories SC
	ON
		SF.[CategoryID] = SC.[CategoryID]
	LEFT OUTER JOIN
		{databaseOwner}{objectQualifier}RZC_Category C
	ON
		SC.[CategoryID] = C.[CategoryID]
	WHERE
		(SF.[StoreID] = @StoreID OR @StoreID = -1)
		AND SF.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListFulfillmentDetails
	@FulfillmentID INT = NULL,
	@OrderID INT = NULL
AS
BEGIN
	SELECT
		FD.*
	FROM
		{databaseOwner}{objectQualifier}RZC_OrderFulfillmentDetails FD
	INNER JOIN
		{databaseOwner}{objectQualifier}RZC_OrderFulfillments F
	ON
		F.[FulfillmentID] = FD.[FulfillmentID]
	INNER JOIN
		{databaseOwner}{objectQualifier}RZC_StoreOrders O
	ON
		O.[OrderID] = F.[OrderID]
	WHERE
		FD.[FulfillmentID] = @FulfillmentID
		AND O.[OrderID] = @OrderID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListInvoiceTemplates
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		IT.*
	FROM
		{databaseOwner}{objectQualifier}RZC_InvoiceTemplate IT
	WHERE
		IT.[StoreID] = @StoreID
		AND IT.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListLicenseKeys
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		LK.*
	FROM
		{databaseOwner}{objectQualifier}RZC_LicenseKey LK
	WHERE
		LK.[PortalID] = @PortalID
	ORDER BY
		LK.[CreateDate] DESC
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListManufacturers
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		M.*
	FROM
		{databaseOwner}{objectQualifier}RZC_Manufacturer M
	WHERE
		(M.[StoreID] = @StoreID OR M.[Share] = 1)
		AND M.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListOrderDetails
	@OrderID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		OD.*
	FROM
		{databaseOwner}{objectQualifier}RZC_StoreOrderDetails OD
	WHERE
		OD.[OrderID] = @OrderID
		AND OD.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListOrderDetailsByFilter
	@PageNumber INT = NULL,
	@PageSize INT = NULL,
	@OrderColumn VARCHAR(128) = NULL,
	@OrderDirection VARCHAR(4) = NULL,
	@SearchValue NVARCHAR(256) = NULL,
	@OrderID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SET NOCOUNT ON;
	DECLARE @PageRecordStart INT
	DECLARE @PageRecordEnd INT
	SET @PageRecordStart = ((@PageNumber - 1) * @PageSize) + 1
	SET @PageRecordEnd = @PageNumber * @PageSize
	;WITH [DetailsPage] AS
	(
		SELECT
			(
				CASE
					WHEN @OrderColumn = 'ProductID' AND @OrderDirection = 'ASC' THEN ROW_NUMBER() OVER (ORDER BY OD.[ProductID] ASC)
					WHEN @OrderColumn = 'ProductID' AND @OrderDirection = 'DESC' THEN ROW_NUMBER() OVER (ORDER BY OD.[ProductID] DESC)
					WHEN @OrderColumn = 'Quantity' AND @OrderDirection = 'ASC' THEN ROW_NUMBER() OVER (ORDER BY OD.[Quantity] ASC)
					WHEN @OrderColumn = 'Quantity' AND @OrderDirection = 'DESC' THEN ROW_NUMBER() OVER (ORDER BY OD.[Quantity] DESC)
					WHEN @OrderColumn = 'UnitCost' AND @OrderDirection = 'ASC' THEN ROW_NUMBER() OVER (ORDER BY OD.[UnitCost] ASC)
					WHEN @OrderColumn = 'UnitCost' AND @OrderDirection = 'DESC' THEN ROW_NUMBER() OVER (ORDER BY OD.[UnitCost] DESC)
					WHEN @OrderColumn = 'ProductName' AND @OrderDirection = 'ASC' THEN ROW_NUMBER() OVER (ORDER BY OD.[ProductName] ASC)
					WHEN @OrderColumn = 'ProductName' AND @OrderDirection = 'DESC' THEN ROW_NUMBER() OVER (ORDER BY OD.[ProductName] DESC)
					WHEN @OrderColumn = 'ProductSKU' AND @OrderDirection = 'ASC' THEN ROW_NUMBER() OVER (ORDER BY OD.[ProductSKU] ASC)
					WHEN @OrderColumn = 'ProductSKU' AND @OrderDirection = 'DESC' THEN ROW_NUMBER() OVER (ORDER BY OD.[ProductSKU] DESC)
					WHEN @OrderColumn = 'CartAddDate' AND @OrderDirection = 'ASC' THEN ROW_NUMBER() OVER (ORDER BY OD.[CartAddDate] ASC)
					WHEN @OrderColumn = 'CartAddDate' AND @OrderDirection = 'DESC' THEN ROW_NUMBER() OVER (ORDER BY OD.[CartAddDate] DESC)
					WHEN @OrderColumn = 'Weight' AND @OrderDirection = 'ASC' THEN ROW_NUMBER() OVER (ORDER BY OD.[Weight] ASC)
					WHEN @OrderColumn = 'Weight' AND @OrderDirection = 'DESC' THEN ROW_NUMBER() OVER (ORDER BY OD.[Weight] DESC)
				ELSE ROW_NUMBER() OVER (ORDER BY OD.[OrderDetailID] ASC)
				END
			) AS [RowNo], OD.*
		FROM
			{databaseOwner}{objectQualifier}RZC_StoreOrderDetails OD
		WHERE
			OD.[OrderID] = @OrderID
			AND OD.[PortalID] = @PortalID
			AND (
				OD.[ProductName] LIKE '%' + @SearchValue + '%'
				OR OD.[ProductSKU] LIKE '%' + @SearchValue + '%'
			)
	)
	SELECT
		*,
		TotalRecords = (
			SELECT COUNT(*) FROM [DetailsPage]
		),
		MoreRecords = (
			SELECT COUNT(*) FROM [DetailsPage]
			WHERE [RowNo] > @PageRecordEnd
		)
	FROM
		[DetailsPage]
	WHERE
		[RowNo] BETWEEN @PageRecordStart AND @PageRecordEnd
	ORDER BY
		[RowNo]
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListOrderDetailVariants
	@OrderID INT = NULL,
	@OrderDetailID INT = NULL
AS
BEGIN
	SELECT
		ODV.*
	FROM
		{databaseOwner}{objectQualifier}RZC_StoreOrderDetailVariant ODV
		INNER JOIN {databaseOwner}{objectQualifier}RZC_StoreOrderDetails OD
		ON
			OD.[OrderDetailID] = ODV.[OrderDetailID]
	WHERE
		OD.[OrderID] = @OrderID
		AND ODV.[OrderDetailID] = @OrderDetailID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListOrderDiscounts
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		OD.*
	FROM
		{databaseOwner}{objectQualifier}RZC_OrderDiscounts OD
	WHERE
		(OD.[StoreID] = @StoreID OR @StoreID = -1)
		AND OD.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListOrderFulfillments
	@OrderID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		F.*
	FROM
		{databaseOwner}{objectQualifier}RZC_OrderFulfillments F
	INNER JOIN
		{databaseOwner}{objectQualifier}RZC_StoreOrders O
	ON
		O.[OrderID] = F.[OrderID]
	WHERE
		F.[OrderID] = @OrderID
		AND O.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListOrderLevelDiscounts
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		OD.*
	FROM
		{databaseOwner}{objectQualifier}RZC_OrderDiscounts OD
	WHERE
		(OD.[StoreID] = @StoreID OR @StoreID = -1)
		AND OD.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListOrderNotes
	@OrderID INT = NULL
AS
BEGIN
	SELECT
		N.*
	FROM
		{databaseOwner}{objectQualifier}RZC_OrderNotes N
	WHERE
		N.[OrderID] = @OrderID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListOrdersByFilter
	@PageNumber INT = NULL,
	@PageSize INT = NULL,
	@OrderColumn VARCHAR(128) = NULL,
	@OrderDirection VARCHAR(4) = NULL,
	@OrderStatus VARCHAR(128) = NULL,
	@PayStatus VARCHAR(128) = NULL,
	@PayMethod VARCHAR(128) = NULL,
	@TransType VARCHAR(128) = NULL,
	@SearchValue NVARCHAR(256) = NULL,
	@CustomerID INT = NULL,
	@DateFrom DATETIME = NULL,
	@DateTo DATETIME = NULL,
	@ModifiedFrom DATETIME = NULL,
	@ModifiedTo DATETIME = NULL,
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SET NOCOUNT ON;
	DECLARE @PageRecordStart INT
	DECLARE @PageRecordEnd INT
	SET @PageRecordStart = ((@PageNumber - 1) * @PageSize) + 1
	SET @PageRecordEnd = @PageNumber * @PageSize
	;WITH [OrdersPage] AS
	(
		SELECT
			(
				CASE
					WHEN @OrderColumn = 'Status' AND @OrderDirection = 'ASC' THEN ROW_NUMBER() OVER (ORDER BY O.[Status] ASC)
					WHEN @OrderColumn = 'Status' AND @OrderDirection = 'DESC' THEN ROW_NUMBER() OVER (ORDER BY O.[Status] DESC)
					WHEN @OrderColumn = 'PayMethod' AND @OrderDirection = 'ASC' THEN ROW_NUMBER() OVER (ORDER BY PM.[PayMethod] ASC)
					WHEN @OrderColumn = 'PayMethod' AND @OrderDirection = 'DESC' THEN ROW_NUMBER() OVER (ORDER BY PM.[PayMethod] DESC)
					WHEN @OrderColumn = 'OrderID' AND @OrderDirection = 'ASC' THEN ROW_NUMBER() OVER (ORDER BY O.[OrderID] ASC)
					WHEN @OrderColumn = 'OrderID' AND @OrderDirection = 'DESC' THEN ROW_NUMBER() OVER (ORDER BY O.[OrderID] DESC)
					WHEN @OrderColumn = 'OrderDate' AND @OrderDirection = 'ASC' THEN ROW_NUMBER() OVER (ORDER BY O.[OrderDate] ASC)
					WHEN @OrderColumn = 'OrderDate' AND @OrderDirection = 'DESC' THEN ROW_NUMBER() OVER (ORDER BY O.[OrderDate] DESC)
					WHEN @OrderColumn = 'GrandTotal' AND @OrderDirection = 'ASC' THEN ROW_NUMBER() OVER (ORDER BY O.[GrandTotal] ASC)
					WHEN @OrderColumn = 'GrandTotal' AND @OrderDirection = 'DESC' THEN ROW_NUMBER() OVER (ORDER BY O.[GrandTotal] DESC)
					WHEN @OrderColumn = 'DateModified' AND @OrderDirection = 'ASC' THEN ROW_NUMBER() OVER (ORDER BY O.[DateModified] ASC)
					WHEN @OrderColumn = 'DateModified' AND @OrderDirection = 'DESC' THEN ROW_NUMBER() OVER (ORDER BY O.[DateModified] DESC)
				ELSE ROW_NUMBER() OVER (ORDER BY O.[OrderID] ASC)
				END
			) AS [RowNo], O.*, C.[DNNLogin], PM.[PayMethod], PT.[PayTotal]
		FROM
			{databaseOwner}{objectQualifier}RZC_StoreOrders O
		LEFT JOIN
			{databaseOwner}{objectQualifier}RZC_Customer C
		ON
			C.[CustomerID] = O.[CustomerID]
		OUTER APPLY
		(
			SELECT
				STUFF((
					SELECT
						', ' + PH.[PayType]
					FROM
						(
							SELECT
								PH.[PayType], MIN(PH.[PayHistID]) AS 'PayHistID'
							FROM
								{databaseOwner}{objectQualifier}RZC_PayHist PH
							WHERE
								PH.[OrderID] = O.[OrderID]
							GROUP BY
								PH.[PayType]
						) PH
					ORDER BY
						PH.[PayHistID]
					FOR XML PATH('')), 1, 2, ''
				) AS 'PayMethod'
		) PM
		OUTER APPLY
		(
			SELECT
				ISNULL(SUM(PH.[Amount]), 0) AS 'PayTotal'
			FROM
				{databaseOwner}{objectQualifier}RZC_PayHist PH
			WHERE
				PH.[OrderID] = O.[OrderID]
				AND PH.[Success] = 1
		) PT
		OUTER APPLY
		(
			SELECT TOP 1
				PH.[TransType]
			FROM
				{databaseOwner}{objectQualifier}RZC_PayHist PH
			WHERE
				PH.[OrderID] = O.[OrderID]
				AND PH.[TransType] = @TransType
		) TT
		WHERE
			(NULLIF(@SearchValue, '') IS NULL
				OR (
					(LEFT(@SearchValue, 1) = '#' AND O.[OrderID] = TRY_CONVERT(INT, SUBSTRING(@SearchValue, 2, LEN(@SearchValue))))
					OR (LEFT(@SearchValue, 1) <> '#'
						AND (
							O.[ShipFirstName] LIKE '%' + @SearchValue + '%'
							OR O.[ShipLastName] LIKE '%' + @SearchValue + '%'
							OR O.[ShipAddress1] LIKE '%' + @SearchValue + '%'
							OR O.[ShipAddress2] LIKE '%' + @SearchValue + '%'
							OR O.[ShipCity] LIKE '%' + @SearchValue + '%'
							OR O.[ShipZipcode] LIKE '%' + @SearchValue + '%'
							OR O.[ShipMethod] LIKE '%' + @SearchValue + '%'
							OR O.[SpecialInstructions] LIKE '%' + @SearchValue + '%'
							OR C.[DNNLogin] LIKE '%' + @SearchValue + '%'
						)
					)
				)
			)
			AND (NULLIF(@PayMethod, '') IS NULL OR PM.[PayMethod] LIKE '%' + @PayMethod + '%')
			AND (NULLIF(@OrderStatus, '') IS NULL OR O.[Status] = @OrderStatus)
			AND (NULLIF(@PayStatus, '') IS NULL
				OR (
					(@PayStatus = 'Unpaid' AND PT.[PayTotal] <= 0)
					OR (@PayStatus = 'PartiallyPaid' AND PT.[PayTotal] > 0 AND PT.[PayTotal] < O.[GrandTotal])
					OR (@PayStatus = 'Paid' AND PT.[PayTotal] >= O.[GrandTotal])
				)
			)
			AND (NULLIF(@TransType, '') IS NULL OR TT.[TransType] LIKE '%' + @TransType + '%')
			AND (
				CONVERT(DATE, O.[OrderDate]) BETWEEN ISNULL(@DateFrom, CAST(-53690 AS DATETIME)) AND ISNULL(@DateTo, CAST(2958463 AS DATETIME))
			)
			AND (
				CONVERT(DATETIME, O.[DateModified]) BETWEEN ISNULL(@ModifiedFrom, CAST(-53690 AS DATETIME)) AND ISNULL(@ModifiedTo, CAST(2958463 AS DATETIME))
			)
			AND (NULLIF(@CustomerID, '-1') IS NULL OR O.[CustomerID] = @CustomerID)
			AND (O.[StoreID] = @StoreID OR @StoreID = -1)
			AND O.[PortalID] = @PortalID
	)
	SELECT
		*,
		TotalRecords = (
			SELECT COUNT(*) FROM [OrdersPage]
		),
		MoreRecords = (
			SELECT COUNT(*) FROM [OrdersPage]
			WHERE [RowNo] > @PageRecordEnd
		)
	FROM
		[OrdersPage]
	WHERE
		[RowNo] BETWEEN @PageRecordStart AND @PageRecordEnd
	ORDER BY
		[RowNo];
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListPaymentMethods
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		PM.*, PMZ.[Country], PMZ.[State]
	FROM
		{databaseOwner}{objectQualifier}RZC_PaymentMethods PM
		LEFT OUTER JOIN {databaseOwner}{objectQualifier}RZC_PaymentMethodsZones PMZ
		ON
			PM.[PayZoneID] = PMZ.[PayZoneID]
	WHERE
		(PM.[StoreID] = @StoreID OR PM.[Share] = 1)
		AND PM.[PortalID] = @PortalID
	ORDER BY
		PM.[SortOrder]
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListPaymentsByFilter
	@PageNumber INT = NULL,
	@PageSize INT = NULL,
	@OrderColumn VARCHAR(128) = NULL,
	@OrderDirection VARCHAR(4) = NULL,
	@SearchValue NVARCHAR(256) = NULL,
	@DateFrom DATETIME = NULL,
	@DateTo DATETIME = NULL,
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SET NOCOUNT ON;
	DECLARE @PageRecordStart INT
	DECLARE @PageRecordEnd INT
	SET @PageRecordStart = ((@PageNumber - 1) * @PageSize) + 1
	SET @PageRecordEnd = @PageNumber * @PageSize
	;WITH [PaymentsPage] AS
	(
		SELECT
			(
				CASE
					WHEN @OrderColumn = 'OrderID' AND @OrderDirection = 'ASC' THEN ROW_NUMBER() OVER (ORDER BY P.[OrderID] ASC)
					WHEN @OrderColumn = 'OrderID' AND @OrderDirection = 'DESC' THEN ROW_NUMBER() OVER (ORDER BY P.[OrderID] DESC)
					WHEN @OrderColumn = 'CustomerID' AND @OrderDirection = 'ASC' THEN ROW_NUMBER() OVER (ORDER BY P.[CustomerID] ASC)
					WHEN @OrderColumn = 'CustomerID' AND @OrderDirection = 'DESC' THEN ROW_NUMBER() OVER (ORDER BY P.[CustomerID] DESC)
					WHEN @OrderColumn = 'PayType' AND @OrderDirection = 'ASC' THEN ROW_NUMBER() OVER (ORDER BY P.[PayType] ASC)
					WHEN @OrderColumn = 'PayType' AND @OrderDirection = 'DESC' THEN ROW_NUMBER() OVER (ORDER BY P.[PayType] DESC)
					WHEN @OrderColumn = 'PayDate' AND @OrderDirection = 'ASC' THEN ROW_NUMBER() OVER (ORDER BY P.[PayDate] ASC)
					WHEN @OrderColumn = 'PayDate' AND @OrderDirection = 'DESC' THEN ROW_NUMBER() OVER (ORDER BY P.[PayDate] DESC)
					WHEN @OrderColumn = 'Amount' AND @OrderDirection = 'ASC' THEN ROW_NUMBER() OVER (ORDER BY P.[Amount] ASC)
					WHEN @OrderColumn = 'Amount' AND @OrderDirection = 'DESC' THEN ROW_NUMBER() OVER (ORDER BY P.[Amount] DESC)
					WHEN @OrderColumn = 'Success' AND @OrderDirection = 'ASC' THEN ROW_NUMBER() OVER (ORDER BY P.[Success] ASC)
					WHEN @OrderColumn = 'Success' AND @OrderDirection = 'DESC' THEN ROW_NUMBER() OVER (ORDER BY P.[Success] DESC)
					WHEN @OrderColumn = 'TransType' AND @OrderDirection = 'ASC' THEN ROW_NUMBER() OVER (ORDER BY P.[TransType] ASC)
					WHEN @OrderColumn = 'TransType' AND @OrderDirection = 'DESC' THEN ROW_NUMBER() OVER (ORDER BY P.[TransType] DESC)
				ELSE ROW_NUMBER() OVER (ORDER BY P.[PayHistID] ASC)
				END
			) AS [RowNo], P.*
		FROM
			{databaseOwner}{objectQualifier}RZC_PayHist P
		WHERE
			(NULLIF(@SearchValue, '') IS NULL
				OR (
					P.[BillingName] LIKE '%' + @SearchValue + '%'
					OR P.[BillingAddress] LIKE '%' + @SearchValue + '%'
					OR P.[BillingCity] LIKE '%' + @SearchValue + '%'
					OR P.[BillingZip] LIKE '%' + @SearchValue + '%'
					OR P.[Notes] LIKE '%' + @SearchValue + '%'
					OR P.[IPAddress] LIKE '%' + @SearchValue + '%'
					OR P.[TransID] LIKE '%' + @SearchValue + '%'
					OR P.[PayType] LIKE '%' + @SearchValue + '%'
					OR P.[TransType] LIKE '%' + @SearchValue + '%'
				)
			)
			AND (
				CONVERT(DATE, P.[PayDate]) BETWEEN ISNULL(@DateFrom, CAST(-53690 AS DATETIME)) AND ISNULL(@DateTo, CAST(2958463 AS DATETIME))
			)
			AND (P.[StoreID] = @StoreID OR @StoreID = -1)
			AND P.[PortalID] = @PortalID
	)
	SELECT
		*,
		TotalRecords = (
			SELECT COUNT(*) FROM [PaymentsPage]
		),
		MoreRecords = (
			SELECT COUNT(*) FROM [PaymentsPage]
			WHERE [RowNo] > @PageRecordEnd
		)
	FROM
		[PaymentsPage]
	WHERE
		[RowNo] BETWEEN @PageRecordStart AND @PageRecordEnd
	ORDER BY
		[RowNo];
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListPaymentsByOrderID
	@OrderID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		P.*
	FROM
		{databaseOwner}{objectQualifier}RZC_PayHist P
	WHERE
		P.[OrderID] = @OrderID
		AND P.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListPortalBookableProducts
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		P.*, I.[ThumbImage], I.[LargeImage], I.[ZoomImage]
	FROM
		{databaseOwner}{objectQualifier}RZC_Products P
	CROSS APPLY
	(
		SELECT TOP 1
			[ThumbImage], [LargeImage], [ZoomImage]
		FROM
			{databaseOwner}{objectQualifier}RZC_ProductImages
		WHERE
			[ProductID] = P.[ProductID]
		ORDER BY
			[SortOrder] ASC
		UNION ALL SELECT
			NULL, NULL, NULL
		WHERE
		(
			SELECT
				COUNT(*)
			FROM
				{databaseOwner}{objectQualifier}RZC_ProductImages
			WHERE
				[ProductID] = P.[ProductID]
		) = 0
	) I
	WHERE
		(P.[LogicallyDeleted] <> 1 AND P.[Archived] <> 1 AND P.[HideProduct] <> 1)
		AND P.[PortalID] = @PortalID
		AND P.[Booking] = 1
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListPortalProducts
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		P.*, I.[ThumbImage], I.[LargeImage], I.[ZoomImage], V.[HasVariants]
	FROM
		{databaseOwner}{objectQualifier}RZC_Products P
	OUTER APPLY
	(
		SELECT TOP 1
			IMG.*
		FROM
			{databaseOwner}{objectQualifier}RZC_ProductImages IMG
		WHERE
			IMG.[ProductID] = P.[ProductID]
		ORDER BY
			IMG.[SortOrder] ASC
	) I
	CROSS APPLY
	(
		SELECT CASE WHEN EXISTS
		(
			SELECT PV.[VariantID]
			FROM {databaseOwner}{objectQualifier}RZC_ProductVariant PV
			WHERE PV.[ProductID] = P.[ProductID]
		)
		THEN CAST(1 AS BIT)
		ELSE CAST(0 AS BIT)
		END AS [HasVariants]
	) V
	WHERE
		(P.[LogicallyDeleted] <> 1 AND P.[Archived] <> 1 AND P.[HideProduct] <> 1)
		AND P.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListPortalStoreProducts
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		P.*, I.[ThumbImage], I.[LargeImage], I.[ZoomImage], V.[HasVariants]
	FROM
		{databaseOwner}{objectQualifier}RZC_Products P
	OUTER APPLY
	(
		SELECT TOP 1
			IMG.*
		FROM
			{databaseOwner}{objectQualifier}RZC_ProductImages IMG
		WHERE
			IMG.[ProductID] = P.[ProductID]
		ORDER BY
			IMG.[SortOrder] ASC
	) I
	CROSS APPLY
	(
		SELECT CASE WHEN EXISTS
		(
			SELECT PV.[VariantID]
			FROM {databaseOwner}{objectQualifier}RZC_ProductVariant PV
			WHERE PV.[ProductID] = P.[ProductID]
		)
		THEN CAST(1 AS BIT)
		ELSE CAST(0 AS BIT)
		END AS [HasVariants]
	) V
	WHERE
		(P.[LogicallyDeleted] <> 1 AND P.[Archived] <> 1 AND P.[HideProduct] <> 1)
		AND P.[StoreID] = @StoreID
		AND P.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListPriceClasses
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		PC.*
	FROM
		{databaseOwner}{objectQualifier}RZC_PriceClass PC
	WHERE
		(PC.[StoreID] = @StoreID OR @StoreID = -1)
		AND PC.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListProductBookingHistory
	@VendorProductID INT = NULL,
	@StartDate DATETIME = NULL,
	@EndDate DATETIME = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		VB.*, SOD.[OrderID], SOD.[ProductSKU], SOD.[ProductName], C.[FirstName], C.[LastName]
	FROM
		{databaseOwner}{objectQualifier}RZC_VendorBooking VB
	INNER JOIN
		{databaseOwner}{objectQualifier}RZC_StoreOrderDetails SOD
	ON
		SOD.[OrderDetailID] = VB.[OrderDetailID]
	LEFT OUTER JOIN
		{databaseOwner}{objectQualifier}RZC_Customer C
	ON
		C.[CustomerID] = VB.[CustomerID]
	WHERE
		VB.[VendorProductID] = @VendorProductID
		AND (
			(NULLIF(VB.[EndDate], CAST(-53690 AS DATETIME)) IS NULL AND (VB.[StartDate] BETWEEN @StartDate AND @EndDate))
			OR (NULLIF(VB.[EndDate], CAST(-53690 AS DATETIME)) IS NOT NULL AND (
				(@StartDate BETWEEN VB.[StartDate] AND VB.[EndDate]) OR (@EndDate BETWEEN VB.[StartDate] AND VB.[EndDate]))
				OR (VB.[StartDate] BETWEEN @StartDate AND @EndDate) OR (VB.[EndDate] BETWEEN @StartDate AND @EndDate)
			)
		)
		AND SOD.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListProductCategories
	@ProductID INT = NULL,
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		CP.*
	FROM
		{databaseOwner}{objectQualifier}RZC_CategoryProduct CP
	INNER JOIN
		{databaseOwner}{objectQualifier}RZC_Products P
	ON
		P.[ProductID] = CP.[ProductID]
	WHERE
		CP.[ProductID] = @ProductID
		AND (P.[StoreID] = @StoreID OR P.[Share] = 1)
		AND P.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListProductCategoryDiscounts
	@ProductID INT = NULL
AS
BEGIN
	SELECT
		CQD.*
	FROM
		{databaseOwner}{objectQualifier}RZC_CategoryQtyDiscounts CQD
		INNER JOIN
			{databaseOwner}{objectQualifier}RZC_CategoryProduct CP
		ON
			CQD.[CategoryID] = CP.[CategoryID]
	WHERE
		CP.[ProductID] = @ProductID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListProductCategoryTemplateFields
	@CategoryID INT = NULL,
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		PT.*
	FROM
		{databaseOwner}{objectQualifier}RZC_ProductTemplate PT
	INNER JOIN
		{databaseOwner}{objectQualifier}RZC_Category C
	ON
		C.[CategoryID] = PT.[CategoryID]
	WHERE
		(PT.[CategoryID] = @CategoryID OR @CategoryID = -1)
		AND (PT.[StoreID] = @StoreID OR PT.[Share] = 1)
		AND PT.[PortalID] = @PortalID
	ORDER BY
		PT.[SortOrder] ASC
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListProductCustomFields
	@ProductID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		PCF.*
	FROM
		{databaseOwner}{objectQualifier}RZC_ProductCustomFields PCF
	WHERE
		PCF.[ProductID] = @ProductID
		AND PCF.[PortalID] = @PortalID
	ORDER BY
		PCF.[SortOrder] ASC
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListProductDownloadHistory
	@ProductID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		PDH.*
	FROM
		{databaseOwner}{objectQualifier}RZC_ProductDownloadHistory PDH
	WHERE
		PDH.[ProductID] = @ProductID
		AND PDH.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListProductGridCustomFields
	@PageNumber INT = NULL,
	@PageSize INT = NULL,
	@CategoryID INT = NULL,
	@Filter NVARCHAR(MAX) = NULL,
	@PortalID INT = NULL
AS
BEGIN
	DECLARE @Query NVARCHAR(MAX)
	DECLARE @Columns VARCHAR(MAX)
	SELECT @Columns = STUFF((
		SELECT DISTINCT
			'],[' + LTRIM([Label])
		FROM 
			{databaseOwner}{objectQualifier}RZC_ProductCustomFields PCF
		INNER JOIN
			{databaseOwner}{objectQualifier}RZC_Products P
		ON
			PCF.[ProductID] = P.[ProductID]
		INNER JOIN
			{databaseOwner}{objectQualifier}RZC_CategoryProduct CP
		ON
			CP.[ProductID] = P.[ProductID]
		WHERE
			CP.[CategoryID] = @CategoryID
			AND P.[LogicallyDeleted] <> 1
			AND P.[Archived] <> 1
			AND P.[HideProduct] <> 1
			AND PCF.[PortalID] = @PortalID
		ORDER BY
			'],[' + LTRIM([Label])
		FOR XML
			PATH('')
	), 1, 2, '') + ']'
	IF NULLIF(@Filter, 'ALL') IS NULL
		BEGIN
			SET @Query = '
				DECLARE @PageRecordStart INT
				DECLARE @PageRecordEnd INT
				SET @PageRecordStart = ((' + CAST(@PageNumber AS VARCHAR(15)) + ' - 1 ) * ' + CAST(@PageSize AS VARCHAR(15)) + ') + 1
				SET @PageRecordEnd = ' + CAST(@PageNumber AS VARCHAR(15)) + ' * ' + CAST(@PageSize AS VARCHAR(15)) + '
				;WITH [FieldsPage] AS
				(
					SELECT
						Row_Number() OVER (ORDER BY P.[SortOrder] ASC) AS [RowNo],
						P.[ModelNumber], P.[ModelName], P.[SEOURL], P.[QuantityOnHand], P.[UnitCost], P.[PortalID], PVT.*
					FROM (
						SELECT
							PCF.[ProductID], PCF.[Label], PCF.[CustomFieldValue]
						FROM
							{databaseOwner}{objectQualifier}RZC_ProductCustomFields PCF
						WHERE
							PCF.[PortalID] = ' + CAST(@PortalID AS VARCHAR(8)) + '
					) SRC
					PIVOT (
						MAX([CustomFieldValue]) FOR [Label]
						IN (' + @Columns + ')
					) AS PVT
					INNER JOIN
						{databaseOwner}{objectQualifier}RZC_Products P
					ON
						PVT.[ProductID] = P.[ProductID]
					INNER JOIN
						{databaseOwner}{objectQualifier}RZC_CategoryProduct CP
					ON
						CP.[ProductID] = P.[ProductID]
					WHERE 
						P.[Logicallydeleted] <> 1
						AND P.[Archived] <> 1
						AND P.[HideProduct] <> 1
						AND CP.[CategoryID] = ' + CAST(@CategoryID AS VARCHAR(8)) + '
						AND P.[PortalID] = ' + CAST(@PortalID AS VARCHAR(8)) +
				')
				SELECT
					F.*,
					TotalRecords = (
						SELECT COUNT(*) FROM [FieldsPage]
					),
					MoreRecords = (
						SELECT COUNT(*) FROM [FieldsPage]
						WHERE [RowNo] > @PageRecordEnd
					)
				FROM
					[FieldsPage] F
				WHERE
					F.[RowNo] BETWEEN @PageRecordStart AND @PageRecordEnd
				ORDER BY
					F.[RowNo]
				;'
		END
	ELSE
		BEGIN
			SET @Query = '
				DECLARE @PageRecordStart INT
				DECLARE @PageRecordEnd INT
				SET @PageRecordStart = ((' + CAST(@PageNumber AS VARCHAR(15)) + ' - 1 ) * ' + CAST(@PageSize AS VARCHAR(15)) + ') + 1
				SET @PageRecordEnd = ' + CAST(@PageNumber AS VARCHAR(15)) + ' * ' + CAST(@PageSize AS VARCHAR(15)) + '
				;WITH [FieldsPage] AS
				(
					SELECT
						Row_Number() OVER (ORDER BY P.[SortOrder] ASC) AS [RowNo],
						P.[ModelNumber], P.[ModelName], P.[SEOURL], P.[QuantityOnHand], P.[UnitCost], P.[PortalID], PVT.*
					FROM (
						SELECT
							PCF.[ProductID], PCF.[Label], PCF.[CustomFieldValue]
						FROM
							{databaseOwner}{objectQualifier}RZC_ProductCustomFields PCF
						WHERE
							PCF.[PortalID] = ' + CAST(@PortalID AS VARCHAR(8)) + '
					) SRC
					PIVOT (
						MAX([CustomFieldValue]) FOR [Label]
						IN (' + @Columns + ')
					) AS PVT
					INNER JOIN
						{databaseOwner}{objectQualifier}RZC_Products P
					ON
						PVT.[ProductID] = P.[ProductID]
					INNER JOIN
						{databaseOwner}{objectQualifier}RZC_CategoryProduct CP
					ON
						CP.[ProductID] = P.[ProductID]
					WHERE 
						P.[Logicallydeleted] <> 1
						AND P.[Archived] <> 1
						AND P.[HideProduct] <> 1
						AND CP.[CategoryID] = ' + CAST(@CategoryID AS VARCHAR(8)) + '
						AND P.[PortalID] = ' + CAST(@PortalID AS VARCHAR(8)) + '
						' + @Filter + '
				)
				SELECT
					F.*,
					TotalRecords = (
						SELECT COUNT(*) FROM [FieldsPage]
					),
					MoreRecords = (
						SELECT COUNT(*) FROM [FieldsPage]
						WHERE [RowNo] > @PageRecordEnd
					)
				FROM
					[FieldsPage] F
				WHERE
					F.[RowNo] BETWEEN @PageRecordStart AND @PageRecordEnd
				ORDER BY
					F.[RowNo]
				;'
		END
	EXECUTE (@Query)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListProductGroupVariants
	@ProductID INT = NULL,
	@GroupID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		PV.*
	FROM
		{databaseOwner}{objectQualifier}RZC_ProductVariant PV
	WHERE
		PV.[ProductID] = @ProductID
		AND PV.[VariantGroupID] = @GroupID
		AND PV.[PortalID] = @PortalID
	ORDER BY
		PV.[SortOrder] ASC
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListProductImages
	@ProductID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		PI.* 
	FROM 
		{databaseOwner}{objectQualifier}RZC_ProductImages PI
	WHERE 
		PI.[ProductID] = @ProductID
		AND PI.[PortalID] = @PortalID
	ORDER BY
		PI.[SortOrder]
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListProductInventory
	@ProductID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		PVI.*
	FROM
		{databaseOwner}{objectQualifier}RZC_ProductVariantInventory PVI
	INNER JOIN
		{databaseOwner}{objectQualifier}RZC_Products P
	ON
		P.[ProductID] = PVI.[ProductID]
	WHERE
		PVI.[ProductID] = @ProductID
		AND P.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListProductInventoryVariants
	@VariantInventoryID INT = NULL,
	@ProductID INT = NULL
AS
BEGIN
	SELECT
		PVIL.*, PV.[VariantName]
	FROM
		{databaseOwner}{objectQualifier}RZC_ProductVariantInvLinker PVIL
	INNER JOIN
		{databaseOwner}{objectQualifier}RZC_ProductVariant PV
	ON
		PV.[VariantID] = PVIL.[VariantID]
	WHERE
		PVIL.[VariantInventoryID] = @VariantInventoryID
		AND PVIL.[ProductID] = @ProductID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListProductManageRoles
	@ProductID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		PMR.*
	FROM
		{databaseOwner}{objectQualifier}RZC_ProductManageRole PMR
	INNER JOIN
		{databaseOwner}{objectQualifier}RZC_Products P
	ON
		P.[ProductID] = PMR.[ProductID]
	WHERE
		PMR.[ProductID] = @ProductID
		AND P.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListProductPackages
	@ProductID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		PP.* 
	FROM 
		{databaseOwner}{objectQualifier}RZC_ProductPackage PP
		INNER JOIN {databaseOwner}{objectQualifier}RZC_Products P
		ON
			P.[ProductID] = PP.[ProductID]
	WHERE 
		PP.[ProductID] = @ProductID
		AND P.[PortalID] = @PortalID
	ORDER BY
		PP.[PackageName] ASC
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListProductPurchaseDownloadHistory
	@OrderDetailGUID UNIQUEIDENTIFIER = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		PDH.*
	FROM
		{databaseOwner}{objectQualifier}RZC_ProductDownloadHistory PDH
	WHERE
		PDH.[OrderDetailGUID] = @OrderDetailGUID
		AND PDH.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListProductQuantityDiscounts
	@ProductID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		PQD.*
	FROM
		{databaseOwner}{objectQualifier}RZC_ProductQtyDiscounts PQD
	WHERE
		PQD.[ProductID] = @ProductID
		AND PQD.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListProductReviews
	@ProductID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		PR.*, P.[ModelNumber], P.[ModelName]
	FROM
		{databaseOwner}{objectQualifier}RZC_ProductReviews PR
	INNER JOIN
		{databaseOwner}{objectQualifier}RZC_Products P
	ON
		P.[ProductID] = PR.[ProductID]
	WHERE
		PR.[Approved] <> 0
		AND PR.[ProductID] = @ProductID
		AND P.[PortalID] = @PortalID
	ORDER BY
		PR.[ReviewDate] DESC
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListProductRoleDiscounts
	@ProductID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		PRD.*
	FROM
		{databaseOwner}{objectQualifier}RZC_ProductDiscountsByRole PRD
	WHERE
		PRD.[ProductID] = @ProductID
		AND (PRD.[PortalID] = @PortalID OR PRD.[PortalID] IS NULL)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListProductsByFilter
	@PageNumber INT = NULL,
	@PageSize INT = NULL,
	@OrderColumn VARCHAR(128) = NULL,
	@OrderDirection VARCHAR(4) = NULL,
	@SearchText NVARCHAR(128) = NULL,
	@CatList VARCHAR(1024) = NULL,
	@MinPrice MONEY = NULL,
	@MaxPrice MONEY = NULL,
	@IsSaleEnabled BIT = NULL,
	@UserID INT = NULL,
	@IsAdmin BIT = NULL,
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	DECLARE @Now DATETIME = GETDATE()
	DECLARE @Today DATETIME = CONVERT(DATE, @Now)
	DECLARE @CatPIDTbl TABLE ([PID] INT)
	SET @CatList = NULLIF(LTRIM(RTRIM(@CatList)), '')
	IF @CatList IS NOT NULL
	BEGIN
    	DECLARE @CatIDTbl TABLE ([RowNo] INT, [CatID] INT)
		INSERT INTO @CatIDTbl
		SELECT CT.[RowNo], CI.[Value]
		FROM (
				SELECT ROW_NUMBER() OVER (ORDER BY (SELECT NULL)) [RowNo], [Value]
				FROM {databaseOwner}{objectQualifier}RZC_FxSplit(@CatList, '|')
			) CT
			CROSS APPLY (
				SELECT [Value]
				FROM {databaseOwner}{objectQualifier}RZC_FxSplit(CT.[Value], ',')
			) CI
		INSERT INTO @CatPIDTbl
		SELECT DISTINCT CP.ProductID
		FROM {databaseOwner}{objectQualifier}RZC_CategoryProduct CP JOIN @CatIDTbl C ON C.CatID = CP.CategoryID
		GROUP BY CP.ProductID
		HAVING COUNT(DISTINCT C.[RowNo]) = (SELECT COUNT(DISTINCT C2.[RowNo]) FROM @CatIDTbl C2)
	END
	DECLARE @ProductList TABLE ([ProductID] INT, [TotalRecords] INT)
	INSERT INTO
		@ProductList
	SELECT
		P.[ProductID], COUNT(*) OVER() AS [TotalRecords]
	FROM
		{databaseOwner}{objectQualifier}RZC_Products P WITH (NOLOCK)
	LEFT JOIN
		@CatPIDTbl PT
	ON
		P.[ProductID] = PT.[PID]
	CROSS APPLY
	(
		SELECT
		(
			CASE WHEN
				@IsSaleEnabled = 1 AND P.[SalePrice] > 0
				AND (
					@Today BETWEEN P.[SaleStartDate] AND P.[SaleEndDate]
				)
			THEN
				P.[SalePrice]
			ELSE
				P.[UnitCost]
			END
		) AS [SellingPrice]
	) PR
	WHERE
		(NULLIF(@SearchText, '') IS NULL
			OR (
				(LEFT(@SearchText, 1) = '#' AND P.[ProductID] = TRY_CONVERT(INT, SUBSTRING(@SearchText, 2, LEN(@SearchText))))
				OR (LEFT(@SearchText, 1) <> '#'
					AND (
						P.[ModelName] LIKE '%' + @SearchText + '%'
						OR P.[ModelNumber] LIKE '%' + @SearchText + '%'
						OR P.[Description] Like '%' + @SearchText + '%'
						OR P.[Summary] Like '%' + @SearchText + '%'
					)
				)
			)
		)
		AND (
			@UserID = 0
			OR (
				P.[ProductID] NOT IN (
					SELECT
						VR.[ProductID]
					FROM
						{databaseOwner}{objectQualifier}RZC_ProductVisibilityRole VR
						JOIN {databaseOwner}{objectQualifier}UserRoles UR ON UR.[RoleID] = VR.[RoleID]
						JOIN {databaseOwner}{objectQualifier}Roles R ON R.[RoleID] = UR.[RoleID]
					WHERE
						R.[Status] = 1
						AND VR.[Action] = 'Hide'
						AND UR.[UserID] = @UserID
						AND @Now BETWEEN ISNULL(UR.[EffectiveDate], @Now) AND ISNULL(UR.[ExpiryDate], @Now)
				)
				AND (
					P.[ShowProductRole] = 0 OR P.[ProductID] IN (
						SELECT
							VR.[ProductID]
						FROM
							{databaseOwner}{objectQualifier}RZC_ProductVisibilityRole VR
							JOIN {databaseOwner}{objectQualifier}UserRoles UR ON UR.[RoleID] = VR.[RoleID]
							JOIN {databaseOwner}{objectQualifier}Roles R ON R.[RoleID] = UR.[RoleID]
						WHERE
							R.[Status] = 1
							AND VR.[Action] = 'Show'
							AND UR.[UserID] = @UserID
							AND @Now BETWEEN ISNULL(UR.[EffectiveDate], @Now) AND ISNULL(UR.[ExpiryDate], @Now)
					)
				)
			)
		)
		AND (
			@IsAdmin = 1 OR ((P.[ActiveFrom] IS NULL OR @Now >= P.[ActiveFrom])
			AND (P.[ActiveTo] IS NULL OR P.[ActiveTo] = CAST(-53690 AS DATETIME) OR @Now <= P.[ActiveTo]))
		)
		AND (@MinPrice = -1 OR PR.[SellingPrice] >= @MinPrice)
		AND (@MaxPrice = -1 OR PR.[SellingPrice] <= @MaxPrice)
		AND (
			PT.[PID] IS NOT NULL
			OR @CatList IS NULL
		)
		AND P.[LogicallyDeleted] <> 1
		AND (@IsAdmin = 1 OR (P.[Archived] <> 1 AND P.[HideProduct] <> 1))
		AND (P.[StoreID] = @StoreID OR P.[Share] = 1 OR @StoreID = -1)
		AND P.[PortalID] = @PortalID
	ORDER BY
		CASE WHEN (@OrderColumn = 'SortOrder' AND @OrderDirection = 'ASC') THEN P.[SortOrder] END ASC,
		CASE WHEN (@OrderColumn = 'SortOrder' AND @OrderDirection = 'DESC') THEN P.[SortOrder] END DESC,
		CASE WHEN (@OrderColumn = 'UnitCost' AND @OrderDirection = 'ASC') THEN P.[UnitCost] END ASC,
		CASE WHEN (@OrderColumn = 'UnitCost' AND @OrderDirection = 'DESC') THEN P.[UnitCost] END DESC,
		CASE WHEN (@OrderColumn = 'SellingPrice' AND @OrderDirection = 'ASC') THEN PR.[SellingPrice] END ASC,
		CASE WHEN (@OrderColumn = 'SellingPrice' AND @OrderDirection = 'DESC') THEN PR.[SellingPrice] END DESC,
		CASE WHEN (@OrderColumn = 'ModelName' AND @OrderDirection = 'ASC') THEN P.[ModelName] END ASC,
		CASE WHEN (@OrderColumn = 'ModelName' AND @OrderDirection = 'DESC') THEN P.[ModelName] END DESC,
		CASE WHEN (@OrderColumn = 'ModelNumber' AND @OrderDirection = 'ASC') THEN P.[ModelNumber] END ASC,
		CASE WHEN (@OrderColumn = 'ModelNumber' AND @OrderDirection = 'DESC') THEN P.[ModelNumber] END DESC,
		CASE WHEN (@OrderColumn = 'Manufacturer' AND @OrderDirection = 'ASC') THEN P.[Manufacturer] END ASC,
		CASE WHEN (@OrderColumn = 'Manufacturer' AND @OrderDirection = 'DESC') THEN P.[Manufacturer] END DESC,
		CASE WHEN (@OrderColumn = 'CreatedDate' AND @OrderDirection = 'ASC') THEN P.[CreatedDate] END ASC,
		CASE WHEN (@OrderColumn = 'CreatedDate' AND @OrderDirection = 'DESC') THEN P.[CreatedDate] END DESC,
		CASE WHEN (@OrderColumn = 'QuantityOnHand' AND @OrderDirection = 'ASC') THEN P.[QuantityOnHand] END ASC,
		CASE WHEN (@OrderColumn = 'QuantityOnHand' AND @OrderDirection = 'DESC') THEN P.[QuantityOnHand] END DESC,
		CASE WHEN (@OrderColumn = 'ProductID' AND @OrderDirection = 'ASC') THEN P.[ProductID] END ASC,
		CASE WHEN (@OrderColumn = 'ProductID' AND @OrderDirection = 'DESC') THEN P.[ProductID] END DESC
	OFFSET
		@PageSize * (@PageNumber - 1) ROWS
	FETCH NEXT
		@PageSize ROWS ONLY
	DECLARE @TotalRecords INT = (SELECT TOP 1 [TotalRecords] FROM @ProductList)
	DECLARE @MoreRecords INT = (@TotalRecords - ((SELECT COUNT(*) FROM @ProductList) + (@PageSize * (@PageNumber - 1))))
	SELECT
		P.*, I.[ThumbImage], I.[LargeImage], I.[ZoomImage], I.[Title] AS [ImageTitle], I.[AltTag] AS [ImageAlt], V.[HasVariants], @TotalRecords AS [TotalRecords], @MoreRecords AS [MoreRecords]
	FROM
		{databaseOwner}{objectQualifier}RZC_Products P
	INNER JOIN
		@ProductList PL
	ON
		P.[ProductID] = PL.[ProductID]
	OUTER APPLY
	(
		SELECT TOP 1
			IMG.*
		FROM
			{databaseOwner}{objectQualifier}RZC_ProductImages IMG
		WHERE
			IMG.[ProductID] = P.[ProductID]
		ORDER BY
			IMG.[SortOrder] ASC
	) I
	CROSS APPLY
	(
		SELECT CASE WHEN EXISTS
		(
			SELECT PV.[VariantID]
			FROM {databaseOwner}{objectQualifier}RZC_ProductVariant PV
			WHERE PV.[ProductID] = P.[ProductID]
		)
		THEN 1
		ELSE 0
		END AS [HasVariants]
	) V
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListProductsByPidList
	@PageNo INT = NULL,
	@PageSize INT = NULL,
	@PidList VARCHAR(4000) = '',
	@IsSaleEnabled BIT = 0,
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	DECLARE @PageRecordStart INT = ((@PageNo - 1 ) * @PageSize) + 1
	DECLARE @PageRecordEnd INT = @PageNo * @PageSize
	DECLARE @NullDate DATETIME = CAST(-53690 AS DATETIME)
	DECLARE @TodayDate DATETIME = CONVERT(DATE, GETDATE())
	DECLARE @PidIDTable TABLE ([PID] INT)
	IF @PidList <> ''
	BEGIN
		INSERT INTO @PidIDTable SELECT DISTINCT [Value] FROM {databaseOwner}{objectQualifier}RZC_FxSplit(@PidList, ',')
	END
	;WITH [Products_Page] AS
	(
		SELECT
			P.*, I.[ThumbImage], I.[LargeImage], I.[ZoomImage], PV.[HasVariants],
			(
				CASE
					WHEN @IsSaleEnabled = 0 OR P.[SalePrice] <= 0 THEN P.[UnitCost]
				ELSE
				(
					CASE
						WHEN @TodayDate BETWEEN P.SaleStartDate AND (CASE WHEN P.SaleEndDate IN (@NullDate)
						THEN @TodayDate ELSE P.[SaleEndDate] END) THEN P.[SalePrice] ELSE P.[UnitCost]
					END
				)
				END
			) AS [SortPrice], ROW_NUMBER() OVER (ORDER BY P.[SortOrder] ASC) RowNo
		FROM
			{databaseOwner}{objectQualifier}RZC_Products P WITH (NOLOCK)
		OUTER APPLY
		(
			SELECT TOP 1 IMG.*
			FROM {databaseOwner}{objectQualifier}RZC_ProductImages IMG
			WHERE IMG.[ProductID] = P.[ProductID]
			ORDER BY IMG.[SortOrder]
		) I
		CROSS APPLY
		(
			SELECT CASE WHEN EXISTS
			(
				SELECT PVT.[VariantID]
				FROM {databaseOwner}{objectQualifier}RZC_ProductVariant PVT
				WHERE PVT.[ProductID] = P.[ProductID]
			)
			THEN
				CAST(1 AS BIT)
			ELSE
				CAST(0 AS BIT)
			END
			AS [HasVariants]
		) PV
		WHERE
			P.[PortalID] = @PortalID
			AND (P.[StoreID] = @StoreID OR P.[Share] = 1)
			AND (P.[LogicallyDeleted] <> 1 AND P.[Archived] <> 1 AND P.[HideProduct] <> 1)
			AND (@PidList <> '')
			AND (P.[ProductID] IN (SELECT [PID] FROM @PidIDTable))
	)
	SELECT
		*,
		TotalRecords = (
			SELECT COUNT(*)
			FROM [Products_Page]
		),
		MoreRecords = (
			SELECT COUNT(*)
			FROM [Products_Page]
			WHERE [RowNo] > @PageRecordEnd
		)
	FROM
		[Products_Page]
	WHERE
		[RowNo] BETWEEN @PageRecordStart AND @PageRecordEnd
	ORDER BY
		[RowNo]
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListProductSearchKeys
	@ProductID INT = NULL
AS
BEGIN
	SELECT
		SK.*
	FROM
		{databaseOwner}{objectQualifier}RZC_SearchKeys SK
	WHERE
		SK.[ProductID] = @ProductID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListProductStoreCategories
	@ProductID INT = NULL,
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		C.*
	FROM
		{databaseOwner}{objectQualifier}RZC_Category C
	INNER JOIN
		{databaseOwner}{objectQualifier}RZC_CategoryProduct CP
	ON
		CP.[CategoryID] = C.[CategoryID]
	WHERE
		CP.[ProductID] = @ProductID
		AND (C.[StoreID] = @StoreID OR C.[Share] = 1)
		AND C.[PortalID] = @PortalID
	ORDER BY
		C.[SortOrder] ASC, C.[ParentID] ASC
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListProductTemplateFields
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		PT.*
	FROM
		{databaseOwner}{objectQualifier}RZC_ProductTemplate PT
	WHERE
		(PT.[StoreID] = @StoreID OR PT.[Share] = 1)
		AND PT.[PortalID] = @PortalID
	ORDER BY
		PT.[SortOrder] ASC
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListProductTemplateFieldsByFilter
	@PageNumber INT = NULL,
	@PageSize INT = NULL,
	@OrderColumn VARCHAR(128) = NULL,
	@OrderDirection VARCHAR(4) = NULL,
	@SearchValue NVARCHAR(256) = NULL,
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SET NOCOUNT ON;
	DECLARE @PageRecordStart INT
	DECLARE @PageRecordEnd INT
	SET @PageRecordStart = ((@PageNumber - 1) * @PageSize) + 1
	SET @PageRecordEnd = @PageNumber * @PageSize
	;WITH [FieldsPage] AS
	(
		SELECT
			(
				CASE
					WHEN @OrderColumn = 'Label' AND @OrderDirection = 'ASC' THEN ROW_NUMBER() OVER (ORDER BY PT.[Label] ASC)
					WHEN @OrderColumn = 'Label' AND @OrderDirection = 'DESC' THEN ROW_NUMBER() OVER (ORDER BY PT.[Label] DESC)
					WHEN @OrderColumn = 'Type' AND @OrderDirection = 'ASC' THEN ROW_NUMBER() OVER (ORDER BY PT.[Type] ASC)
					WHEN @OrderColumn = 'Type' AND @OrderDirection = 'DESC' THEN ROW_NUMBER() OVER (ORDER BY PT.[Type] DESC)
					WHEN @OrderColumn = 'Value' AND @OrderDirection = 'ASC' THEN ROW_NUMBER() OVER (ORDER BY PT.[Value] ASC)
					WHEN @OrderColumn = 'Value' AND @OrderDirection = 'DESC' THEN ROW_NUMBER() OVER (ORDER BY PT.[Value] DESC)
					WHEN @OrderColumn = 'SortOrder' AND @OrderDirection = 'ASC' THEN ROW_NUMBER() OVER (ORDER BY PT.[SortOrder] ASC)
					WHEN @OrderColumn = 'SortOrder' AND @OrderDirection = 'DESC' THEN ROW_NUMBER() OVER (ORDER BY PT.[SortOrder] DESC)
					WHEN @OrderColumn = 'CategoryID' AND @OrderDirection = 'ASC' THEN ROW_NUMBER() OVER (ORDER BY PT.[CategoryID] ASC)
					WHEN @OrderColumn = 'CategoryID' AND @OrderDirection = 'DESC' THEN ROW_NUMBER() OVER (ORDER BY PT.[CategoryID] DESC)
				ELSE ROW_NUMBER() OVER (ORDER BY PT.[PTID] ASC)
				END
			) AS [RowNo], PT.*
		FROM
			{databaseOwner}{objectQualifier}RZC_ProductTemplate PT
		WHERE
			(PT.[StoreID] = @StoreID OR PT.[Share] = 1)
			AND PT.[PortalID] = @PortalID
			AND (NULLIF(@SearchValue, '') IS NULL OR (
					PT.[Label] LIKE '%' + @SearchValue + '%'
					OR PT.[Type] LIKE '%' + @SearchValue + '%'
					OR PT.[Value] LIKE '%' + @SearchValue + '%'
				)
			)
	)
	SELECT
		*,
		TotalRecords = (
			SELECT COUNT(*) FROM [FieldsPage]
		),
		MoreRecords = (
			SELECT COUNT(*) FROM [FieldsPage]
			WHERE [RowNo] > @PageRecordEnd
		)
	FROM
		[FieldsPage]
	WHERE
		[RowNo] BETWEEN @PageRecordStart AND @PageRecordEnd
	ORDER BY
		[RowNo];
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListProductVariantGroups
	@ProductID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		PVG.*
	FROM
		{databaseOwner}{objectQualifier}RZC_ProductVariantGroup PVG
	WHERE
		PVG.[ProductID] = @ProductID
		AND PVG.[PortalID] = @PortalID
	ORDER BY
		PVG.[SortOrder] ASC
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListProductVariantRole
	@ManageRoleID INT = NULL,
	@ProductID INT = NULL
AS
BEGIN
	SELECT
		PVR.*, PV.VariantGroup, PV.VariantName
	FROM
		{databaseOwner}{objectQualifier}RZC_ProductVariantRole PVR
	INNER JOIN
		{databaseOwner}{objectQualifier}RZC_ProductManageRole PMR
	ON
		PMR.[ID] = PVR.[ManageRoleID]
	LEFT JOIN
		{databaseOwner}{objectQualifier}RZC_ProductVariant PV
	ON
		PV.[VariantID] = PVR.[VariantID]
	WHERE
		PVR.[ManageRoleID] = @ManageRoleID
		AND PMR.[ProductID] = @ProductID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListProductVariants
	@ProductID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		PV.*
	FROM
		{databaseOwner}{objectQualifier}RZC_ProductVariant PV
	WHERE
		PV.[ProductID] = @ProductID
		AND PV.[PortalID] = @PortalID
	ORDER BY
		PV.[SortOrder] ASC
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListProductVisibilityRoles
	@ProductID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		PVR.*
	FROM
		{databaseOwner}{objectQualifier}RZC_ProductVisibilityRole PVR
	INNER JOIN
		{databaseOwner}{objectQualifier}RZC_Products P
	ON
		PVR.[ProductID] = P.[ProductID]
	WHERE
		PVR.[ProductID] = @ProductID
		AND P.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListRecommendedProducts
	@UserID INT = NULL,
	@ProductID INT = NULL,
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	DECLARE @Now DATETIME = GETDATE()
	;WITH Phase1 AS
	(
		SELECT
			DISTINCT OD.[ProductID], COUNT(OD.[ProductID]) AS [PurchaseCount]
		FROM
			{databaseOwner}{objectQualifier}RZC_StoreOrderDetails OD
		WHERE
			OD.[OrderID] IN
			(
				SELECT
					DISTINCT OD.[OrderID]
				FROM
					{databaseOwner}{objectQualifier}RZC_StoreOrderDetails OD
				WHERE
					OD.[ProductID] = @ProductID
					AND OD.[PortalID] = @PortalID
				GROUP BY
					OD.[OrderID]
			)
			AND OD.[ProductID] <> @ProductID
		GROUP BY
			OD.[ProductID]
		UNION
		(
			SELECT
				RP.[RelatedProductID], 0
			FROM
				{databaseOwner}{objectQualifier}RZC_RelatedProducts RP
			WHERE
				RP.[ProductID] = @ProductID
		)
	),
	Phase2 AS
	(
		SELECT
			MAX(P1.[ProductID]) AS [ProductID], SUM(P1.[PurchaseCount]) AS [PurchaseCount], MAX(R.[Rate]) AS [Rate]
		FROM
			Phase1 P1
		CROSS APPLY
		(
			SELECT
				CONVERT(DECIMAL(10,2), ISNULL(SUM(PR.[Rate]) / COUNT(PR.[Rate]), 0)) AS [Rate]
			FROM
				{databaseOwner}{objectQualifier}RZC_ProductReviews PR
			WHERE
				PR.[ProductID] = P1.[ProductID]
		) R
		GROUP BY
			P1.[ProductID]
	),
	Phase3 AS
	(
		SELECT
			P.*, P2.[PurchaseCount], P2.[Rate], I.[ThumbImage], I.[LargeImage], I.[ZoomImage], V.[HasVariants]
		FROM
			{databaseOwner}{objectQualifier}RZC_Products P
		INNER JOIN
			Phase2 P2
		ON
			P.[ProductID] = P2.[ProductID]
		OUTER APPLY
		(
			SELECT TOP 1
				PI.*
			FROM
				{databaseOwner}{objectQualifier}RZC_ProductImages PI
			WHERE
				PI.[ProductID] = P.[ProductID]
			ORDER BY
				PI.[SortOrder]
		) I
		CROSS APPLY
		(
			SELECT CASE WHEN EXISTS
			(
				SELECT
					PV.[VariantID]
				FROM
					{databaseOwner}{objectQualifier}RZC_ProductVariant PV
				WHERE
					PV.[ProductID] = P.[ProductID]
			)
			THEN
				CAST(1 AS BIT)
			ELSE
				CAST(0 AS BIT)
			END
			AS [HasVariants]
		) V
		WHERE
			P.[LogicallyDeleted] <> 1
			AND P.[Archived] <> 1
			AND P.[HideProduct] <> 1
			AND (
				@UserID = 0
				OR (
					P.[ProductID] NOT IN (
						SELECT
							VR.[ProductID]
						FROM
							{databaseOwner}{objectQualifier}RZC_ProductVisibilityRole VR
							JOIN {databaseOwner}{objectQualifier}UserRoles UR ON UR.[RoleID] = VR.[RoleID]
							JOIN {databaseOwner}{objectQualifier}Roles R ON R.[RoleID] = UR.[RoleID]
						WHERE
							R.[Status] = 1
							AND VR.[Action] = 'Hide'
							AND UR.[UserID] = @UserID
							AND @Now BETWEEN ISNULL(UR.[EffectiveDate], @Now) AND ISNULL(UR.[ExpiryDate], @Now)
					)
					AND (
						P.[ShowProductRole] = 0 OR P.[ProductID] IN (
							SELECT
								VR.[ProductID]
							FROM
								{databaseOwner}{objectQualifier}RZC_ProductVisibilityRole VR
								JOIN {databaseOwner}{objectQualifier}UserRoles UR ON UR.[RoleID] = VR.[RoleID]
								JOIN {databaseOwner}{objectQualifier}Roles R ON R.[RoleID] = UR.[RoleID]
							WHERE
								R.[Status] = 1
								AND VR.[Action] = 'Show'
								AND UR.[UserID] = @UserID
								AND @Now BETWEEN ISNULL(UR.[EffectiveDate], @Now) AND ISNULL(UR.[ExpiryDate], @Now)
						)
					)
				)
			)
			AND (P.[StoreID] = @StoreID OR P.[Share] = 1 OR @StoreID = -1)
			AND P.[PortalID] = @PortalID
	)
	SELECT
		P3.*
	FROM
		Phase3 P3
	ORDER BY
		P3.[PurchaseCount] DESC, P3.[Rate] DESC
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListRegionalTaxesByAddress
	@CountryCode VARCHAR(2) = NULL,
	@RegionCode VARCHAR(6) = NULL,
	@PostalCode VARCHAR(16) = NULL,
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		TS.*
	FROM
		{databaseOwner}{objectQualifier}RZC_TaxStates TS
	WHERE
		TS.[CountryCode] = @CountryCode
		AND (TS.[State] = @RegionCode OR NULLIF(TS.[State], '') IS NULL OR TS.[State] = '0')
		AND (TS.[ZipCode] = @PostalCode OR NULLIF(TS.[ZipCode], '') IS NULL OR TS.[ZipCode] = '0')
		AND (TS.[StoreID] = @StoreID OR @StoreID = -1)
		AND TS.[PortalID] = @PortalID
	ORDER BY
		DIFFERENCE(TS.[State], @RegionCode) DESC,
		DIFFERENCE(TS.[ZipCode], @PostalCode) DESC
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListRegionalTaxesByFilter
	@PageNumber INT = NULL,
	@PageSize INT = NULL,
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SET NOCOUNT ON;
	DECLARE @PageRecordStart INT
	DECLARE @PageRecordEnd INT
	SET @PageRecordStart = ((@PageNumber - 1) * @PageSize) + 1
	SET @PageRecordEnd = @PageNumber * @PageSize
	;WITH [TaxesPage] AS
	(
		SELECT
			ROW_NUMBER() OVER (ORDER BY TS.[TaxStateId] ASC) AS [RowNo], TS.*
		FROM
			{databaseOwner}{objectQualifier}RZC_TaxStates TS
		WHERE
			(TS.[StoreID] = @StoreID OR @StoreID = -1)
			AND TS.[PortalID] = @PortalID
	)
	SELECT
		*,
		TotalRecords = (
			SELECT COUNT(*) FROM [TaxesPage]
		),
		MoreRecords = (
			SELECT COUNT(*) FROM [TaxesPage]
			WHERE [RowNo] > @PageRecordEnd
		)
	FROM
		[TaxesPage]
	WHERE
		[RowNo] BETWEEN @PageRecordStart AND @PageRecordEnd
	ORDER BY
		[RowNo];
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListRelatedProducts
	@UserID INT = NULL,
	@ProductID INT = NULL,
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	DECLARE @Now DATETIME = GETDATE()
	SELECT
		P.*, I.[ThumbImage], I.[LargeImage], I.[ZoomImage], V.[HasVariants]
	FROM
		{databaseOwner}{objectQualifier}RZC_Products P
	INNER JOIN
		{databaseOwner}{objectQualifier}RZC_RelatedProducts RP
	ON
		P.[ProductID] = RP.[RelatedProductID]
	OUTER APPLY
	(
		SELECT TOP 1
			PI.*
		FROM
			{databaseOwner}{objectQualifier}RZC_ProductImages PI
		WHERE
			PI.[ProductID] = P.[ProductID]
		ORDER BY
			PI.[SortOrder]
	) I
	CROSS APPLY
	(
		SELECT CASE WHEN EXISTS
		(
			SELECT
				PV.[VariantID]
			FROM
				{databaseOwner}{objectQualifier}RZC_ProductVariant PV
			WHERE
				PV.[ProductID] = P.[ProductID]
		)
		THEN
			CAST(1 AS BIT)
		ELSE
			CAST(0 AS BIT)
		END
		AS [HasVariants]
	) V
	WHERE
		RP.[ProductID] = @ProductID
		AND P.[LogicallyDeleted] <> 1
		AND P.[Archived] <> 1
		AND P.[HideProduct] <> 1
		AND (
			@UserID = 0
			OR (
				P.[ProductID] NOT IN (
					SELECT
						VR.[ProductID]
					FROM
						{databaseOwner}{objectQualifier}RZC_ProductVisibilityRole VR
						JOIN {databaseOwner}{objectQualifier}UserRoles UR ON UR.[RoleID] = VR.[RoleID]
						JOIN {databaseOwner}{objectQualifier}Roles R ON R.[RoleID] = UR.[RoleID]
					WHERE
						R.[Status] = 1
						AND VR.[Action] = 'Hide'
						AND UR.[UserID] = @UserID
						AND @Now BETWEEN ISNULL(UR.[EffectiveDate], @Now) AND ISNULL(UR.[ExpiryDate], @Now)
				)
				AND (
					P.[ShowProductRole] = 0 OR P.[ProductID] IN (
						SELECT
							VR.[ProductID]
						FROM
							{databaseOwner}{objectQualifier}RZC_ProductVisibilityRole VR
							JOIN {databaseOwner}{objectQualifier}UserRoles UR ON UR.[RoleID] = VR.[RoleID]
							JOIN {databaseOwner}{objectQualifier}Roles R ON R.[RoleID] = UR.[RoleID]
						WHERE
							R.[Status] = 1
							AND VR.[Action] = 'Show'
							AND UR.[UserID] = @UserID
							AND @Now BETWEEN ISNULL(UR.[EffectiveDate], @Now) AND ISNULL(UR.[ExpiryDate], @Now)
					)
				)
			)
		)
		AND (P.[StoreID] = @StoreID OR P.[Share] = 1 OR @StoreID = -1)
		AND P.[PortalID] = @PortalID
	ORDER BY
		P.[SortOrder] ASC
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListSafetyStockByFilter
	@PageNumber INT = NULL,
	@PageSize INT = NULL,
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SET NOCOUNT ON;
	DECLARE @PageRecordStart INT = ((@PageNumber - 1) * @PageSize) + 1
	DECLARE @PageRecordEnd INT = @PageNumber * @PageSize
	;WITH [SafetyStockPage] AS
	(
		SELECT
			ROW_NUMBER() OVER (ORDER BY P2.[SafetyStockQty] - P.[QuantityOnHand] DESC, P.[QuantityOnHand] ASC, P2.[SafetyStockQty] DESC) AS [RowNo],
			P.[ProductID], P.[ModelNumber], P.[ModelName], P.[UnitCost], P.[QuantityOnHand], P2.[SafetyStockQty]
		FROM
			{databaseOwner}{objectQualifier}RZC_Products P
		INNER JOIN
			{databaseOwner}{objectQualifier}RZC_Products2 P2
		ON
			P.[ProductID] = P2.[ProductID]
		WHERE
			P2.[SafetyStockQty] > -1
			AND P.[QuantityOnHand] <= P2.[SafetyStockQty]
			AND (P.[StoreID] = @StoreID OR @StoreID = -1)
			AND P.[PortalID] = @PortalID
	)
	SELECT
		*,
		TotalRecords = (
			SELECT COUNT(*) FROM [SafetyStockPage]
		),
		MoreRecords = (
			SELECT COUNT(*) FROM [SafetyStockPage]
			WHERE [RowNo] > @PageRecordEnd
		)
	FROM
		[SafetyStockPage]
	WHERE
		[RowNo] BETWEEN @PageRecordStart AND @PageRecordEnd
	ORDER BY
		[RowNo];
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListSavedShoppingCartByUser
	@DNNLogin NVARCHAR(100) = NULL,
	@PortalID INT = NULL,
	@StoreID INT = NULL
AS
BEGIN
	SELECT
		SC.*
	FROM
		{databaseOwner}{objectQualifier}RZC_SavedCart SC
	WHERE
		SC.[DNNLogin] = @DNNLogin
		AND SC.[PortalID] = @PortalID
		AND SC.[StoreID] = @StoreID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListSavedShoppingCartItems
	@CartID INT = NULL
AS
BEGIN
	SELECT
		SCD.*
	FROM
		{databaseOwner}{objectQualifier}RZC_SavedCartDetail SCD
	WHERE
		SCD.[CartID] = @CartID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListSavedShoppingCartItemVariants
	@CartDetailID INT = NULL
AS
BEGIN
	SELECT
		SCDV.*
	FROM
		{databaseOwner}{objectQualifier}RZC_SavedCartDetailVariant SCDV
	WHERE
		SCDV.[CartDetailID] = @CartDetailID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListShippingAmountCosts
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		SA.*,
		ISNULL(SM.[ShipMethodName], 'No Ship Method') AS [ShipMethodName],
		ISNULL(C.[CategoryName], 'All Categories') AS [CategoryName]
	FROM
		{databaseOwner}{objectQualifier}RZC_ShippingByAmount SA
	LEFT OUTER JOIN
		{databaseOwner}{objectQualifier}RZC_ShipMethods SM
	ON
		SA.[ShipMethodID] = SM.[ShipMethodID]
	LEFT OUTER JOIN
		{databaseOwner}{objectQualifier}RZC_ShipCategories SC
	ON
		SA.[CategoryID] = SC.[CategoryID]
	LEFT OUTER JOIN
		{databaseOwner}{objectQualifier}RZC_Category C
	ON
		SC.[CategoryID] = C.[CategoryID]
	WHERE
		(SA.[StoreID] = @StoreID OR @StoreID = -1)
		AND SA.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListShippingCategories
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		SC.*, C.[CategoryName]
	FROM
		{databaseOwner}{objectQualifier}RZC_ShipCategories SC
	INNER JOIN
		{databaseOwner}{objectQualifier}RZC_Category C
	ON
		SC.[CategoryID] = C.[CategoryID]
	WHERE
		(SC.[StoreID] = @StoreID OR @StoreID = -1)
		AND SC.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListShippingPostalCosts
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		SZ.*,
		ISNULL(SM.[ShipMethodName], 'No Ship Method') AS [ShipMethodName],
		ISNULL(C.[CategoryName], 'All Categories') AS [CategoryName]
	FROM
		{databaseOwner}{objectQualifier}RZC_ShippingByZipCode SZ
	LEFT OUTER JOIN
		{databaseOwner}{objectQualifier}RZC_ShipMethods SM
	ON
		SZ.[ShipMethodID] = SM.[ShipMethodID]
	LEFT OUTER JOIN
		{databaseOwner}{objectQualifier}RZC_ShipCategories SC
	ON
		SZ.[CategoryID] = SC.[CategoryID]
	LEFT OUTER JOIN
		{databaseOwner}{objectQualifier}RZC_Category C
	ON
		SC.[CategoryID] = C.[CategoryID]
	WHERE
		(SZ.[StoreID] = @StoreID OR @StoreID = -1)
		AND SZ.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListShippingQuantityCosts
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		SQ.*,
		ISNULL(SM.[ShipMethodName], 'No Ship Method') AS [ShipMethodName],
		ISNULL(SN.[ZoneName], 'No Zone') AS [ZoneName],
		ISNULL(C.[CategoryName], 'All Categories') AS [CategoryName]
	FROM
		{databaseOwner}{objectQualifier}RZC_ShippingByQuantity SQ
	LEFT OUTER JOIN
		{databaseOwner}{objectQualifier}RZC_ShipMethods SM
	ON
		SQ.[ShipMethodID] = SM.[ShipMethodID]
	LEFT OUTER JOIN
		{databaseOwner}{objectQualifier}RZC_ShipZone SN
	ON
		SQ.[ZoneID] = SN.[ZoneID]
	LEFT OUTER JOIN
		{databaseOwner}{objectQualifier}RZC_ShipCategories SC
	ON
		SQ.[CategoryID] = SC.[CategoryID]
	LEFT OUTER JOIN
		{databaseOwner}{objectQualifier}RZC_Category C
	ON
		SC.[CategoryID] = C.[CategoryID]
	WHERE
		(SQ.[StoreID] = @StoreID OR @StoreID = -1)
		AND SQ.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListShippingWeightCosts
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		SW.*,
		ISNULL(SM.[ShipMethodName], 'No Ship Method') AS [ShipMethodName],
		ISNULL(SN.[ZoneName], 'No Zone') AS [ZoneName],
		ISNULL(C.[CategoryName], 'All Categories') AS [CategoryName]
	FROM
		{databaseOwner}{objectQualifier}RZC_ShippingByWeight SW
	LEFT OUTER JOIN
		{databaseOwner}{objectQualifier}RZC_ShipMethods SM
	ON
		SW.[ShipMethodID] = SM.[ShipMethodID]
	LEFT OUTER JOIN
		{databaseOwner}{objectQualifier}RZC_ShipZone SN
	ON
		SW.[ZoneID] = SN.[ZoneID]
	LEFT OUTER JOIN
		{databaseOwner}{objectQualifier}RZC_ShipCategories SC
	ON
		SW.[CategoryID] = SC.[CategoryID]
	LEFT OUTER JOIN
		{databaseOwner}{objectQualifier}RZC_Category C
	ON
		SC.[CategoryID] = C.[CategoryID]
	WHERE
		(SW.[StoreID] = @StoreID OR @StoreID = -1)
		AND SW.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListShippingZones
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		SZ.*
	FROM
		{databaseOwner}{objectQualifier}RZC_ShipZone SZ
	WHERE
		(SZ.[StoreID] = @StoreID OR @StoreID = -1)
		AND SZ.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListShoppingCartByTimeLapse
	@Hours INT = NULL,
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		SC.*
	FROM
		{databaseOwner}{objectQualifier}RZC_ShoppingCart SC
		INNER JOIN {databaseOwner}{objectQualifier}RZC_Products P
		ON 
			SC.[ProductID] = P.[ProductID]
	WHERE
		DATEDIFF(HOUR, SC.[CreateDate], GETDATE()) < @Hours + 1
		AND DATEDIFF(HOUR, SC.[CreateDate], GETDATE()) > @Hours - 1
		AND SC.[StoreID] = @StoreID
		AND SC.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListShoppingCartByUser
	@Persistent VARCHAR(16) = NULL,
	@CartCookie VARCHAR(100) = NULL,
	@DNNLogin NVARCHAR(100) = NULL,
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		SC.*
	FROM
		{databaseOwner}{objectQualifier}RZC_ShoppingCart SC
		INNER JOIN {databaseOwner}{objectQualifier}RZC_Products P
		ON 
			SC.[ProductID] = P.[ProductID]
	WHERE
		(SC.[CartCookie] = @CartCookie OR (@Persistent <> 'Machine' AND @DNNLogin <> ''))
		AND (SC.[DNNLogin] = @DNNLogin OR @Persistent <> 'User')
		AND SC.[StoreID] = @StoreID
		AND SC.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListShoppingCartVariants
	@CartID INT = NULL
AS
BEGIN
	SELECT
		SCV.*
	FROM
		{databaseOwner}{objectQualifier}RZC_ShoppingCartVariant SCV
	WHERE
		SCV.[CartID] = @CartID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListStoreBookingHistory
	@StartDate DATETIME = NULL,
	@EndDate DATETIME = NULL,
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		VB.*, SOD.[OrderID], SOD.[ProductSKU], SOD.[ProductName], C.[FirstName], C.[LastName]
	FROM
		{databaseOwner}{objectQualifier}RZC_VendorBooking VB
	INNER JOIN
		{databaseOwner}{objectQualifier}RZC_Products P
	ON
		P.[ProductID] = VB.[VendorProductID]
	INNER JOIN
		{databaseOwner}{objectQualifier}RZC_StoreOrderDetails SOD
	ON
		SOD.[OrderDetailID] = VB.[OrderDetailID]
	LEFT OUTER JOIN
		{databaseOwner}{objectQualifier}RZC_Customer C
	ON
		C.[CustomerID] = VB.[CustomerID]
	WHERE
		(
			(NULLIF(VB.[EndDate], CAST(-53690 AS DATETIME)) IS NULL AND (VB.[StartDate] BETWEEN @StartDate AND @EndDate))
			OR (NULLIF(VB.[EndDate], CAST(-53690 AS DATETIME)) IS NOT NULL AND (
				(@StartDate BETWEEN VB.[StartDate] AND VB.[EndDate]) OR (@EndDate BETWEEN VB.[StartDate] AND VB.[EndDate]))
				OR (VB.[StartDate] BETWEEN @StartDate AND @EndDate) OR (VB.[EndDate] BETWEEN @StartDate AND @EndDate)
			)
		)
		AND (P.[StoreID] = @StoreID OR P.[Share] = 1)
		AND VB.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListStoreBookingHistoryByFilter
	@PageNumber INT = NULL,
	@PageSize INT = NULL,
	@OrderColumn VARCHAR(128) = NULL,
	@OrderDirection VARCHAR(4) = NULL,
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SET NOCOUNT ON;
	DECLARE @PageRecordStart INT
	DECLARE @PageRecordEnd INT
	SET @PageRecordStart = ((@PageNumber - 1) * @PageSize) + 1
	SET @PageRecordEnd = @PageNumber * @PageSize
	;WITH [BookingPage] AS
	(
		SELECT
			(
				CASE
					WHEN @OrderColumn = 'ID' AND @OrderDirection = 'ASC' THEN ROW_NUMBER() OVER (ORDER BY VB.[ID] ASC)
					WHEN @OrderColumn = 'ID' AND @OrderDirection = 'DESC' THEN ROW_NUMBER() OVER (ORDER BY VB.[ID] DESC)
					WHEN @OrderColumn = 'ProductID' AND @OrderDirection = 'ASC' THEN ROW_NUMBER() OVER (ORDER BY VB.[VendorProductID] ASC)
					WHEN @OrderColumn = 'ProductID' AND @OrderDirection = 'DESC' THEN ROW_NUMBER() OVER (ORDER BY VB.[VendorProductID] DESC)
					WHEN @OrderColumn = 'OrderID' AND @OrderDirection = 'ASC' THEN ROW_NUMBER() OVER (ORDER BY SOD.[OrderID] ASC)
					WHEN @OrderColumn = 'OrderID' AND @OrderDirection = 'DESC' THEN ROW_NUMBER() OVER (ORDER BY SOD.[OrderID] DESC)
					WHEN @OrderColumn = 'CustomerID' AND @OrderDirection = 'ASC' THEN ROW_NUMBER() OVER (ORDER BY VB.[CustomerID] ASC)
					WHEN @OrderColumn = 'CustomerID' AND @OrderDirection = 'DESC' THEN ROW_NUMBER() OVER (ORDER BY VB.[CustomerID] DESC)
					WHEN @OrderColumn = 'StartDate' AND @OrderDirection = 'ASC' THEN ROW_NUMBER() OVER (ORDER BY VB.[StartDate] ASC)
					WHEN @OrderColumn = 'StartDate' AND @OrderDirection = 'DESC' THEN ROW_NUMBER() OVER (ORDER BY VB.[StartDate] DESC)
					WHEN @OrderColumn = 'EndDate' AND @OrderDirection = 'ASC' THEN ROW_NUMBER() OVER (ORDER BY VB.[EndDate] ASC)
					WHEN @OrderColumn = 'EndDate' AND @OrderDirection = 'DESC' THEN ROW_NUMBER() OVER (ORDER BY VB.[EndDate] DESC)
					WHEN @OrderColumn = 'IsConfirmed' AND @OrderDirection = 'ASC' THEN ROW_NUMBER() OVER (ORDER BY VB.[IsConfirmed] ASC)
					WHEN @OrderColumn = 'IsConfirmed' AND @OrderDirection = 'DESC' THEN ROW_NUMBER() OVER (ORDER BY VB.[IsConfirmed] DESC)
				ELSE ROW_NUMBER() OVER (ORDER BY VB.[ID] ASC)
				END
			) AS [RowNo], VB.*, SOD.[OrderID], SOD.[ProductSKU], SOD.[ProductName], C.[FirstName], C.[LastName]
		FROM
			{databaseOwner}{objectQualifier}RZC_VendorBooking VB
		INNER JOIN
			{databaseOwner}{objectQualifier}RZC_Products P
		ON
			P.[ProductID] = VB.[VendorProductID]
		INNER JOIN
			{databaseOwner}{objectQualifier}RZC_StoreOrderDetails SOD
		ON
			SOD.[OrderDetailID] = VB.[OrderDetailID]
		LEFT OUTER JOIN
			{databaseOwner}{objectQualifier}RZC_Customer C
		ON
			C.[CustomerID] = VB.[CustomerID]
		WHERE
			(C.[StoreID] = @StoreID OR @StoreID = -1)
			AND C.[PortalID] = @PortalID
	)
	SELECT
		*,
		TotalRecords = (
			SELECT COUNT(*) FROM [BookingPage]
		),
		MoreRecords = (
			SELECT COUNT(*) FROM [BookingPage]
			WHERE [RowNo] > @PageRecordEnd
		)
	FROM
		[BookingPage]
	WHERE
		[RowNo] BETWEEN @PageRecordStart AND @PageRecordEnd
	ORDER BY
		[RowNo];
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListStoreCoupons
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		C.*, P.[HasProducts], V.[HasVariants]
	FROM
		{databaseOwner}{objectQualifier}RZC_Coupons C
	CROSS APPLY
	(
		SELECT CASE WHEN EXISTS
		(
			SELECT CP.[ID]
			FROM {databaseOwner}{objectQualifier}RZC_CouponProduct CP
			WHERE CP.[CouponID] = C.[CouponID]
		)
		THEN CAST(1 AS BIT)
		ELSE CAST(0 AS BIT)
		END AS [HasProducts]
	) P
	CROSS APPLY
	(
		SELECT CASE WHEN EXISTS
		(
			SELECT CV.[ID]
			FROM {databaseOwner}{objectQualifier}RZC_CouponVariant CV
			WHERE CV.[CouponID] = C.[CouponID]
		)
		THEN CAST(1 AS BIT)
		ELSE CAST(0 AS BIT)
		END AS [HasVariants]
	) V
	WHERE
		(C.[StoreID] = @StoreID OR C.[StoreID] = -1)
		AND C.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListStorePermissions
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		P.*, R.RoleName
	FROM
		{databaseOwner}{objectQualifier}RZC_StorePermissions P
	LEFT JOIN
		{databaseOwner}{objectQualifier}Roles R
	ON
		R.[RoleID] = P.[RoleID]
	WHERE
		P.[StoreID] = @StoreID
		AND P.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListStorePermissionsByRole
	@RoleID INT = NULL,
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		P.*, R.RoleName
	FROM
		{databaseOwner}{objectQualifier}RZC_StorePermissions P
	LEFT JOIN
		{databaseOwner}{objectQualifier}Roles R
	ON
		R.[RoleID] = P.[RoleID]
	WHERE
		P.[RoleID] = @RoleID
		AND P.[StoreID] = @StoreID
		AND P.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListStorePermissionsBySection
	@Section NVARCHAR(64) = NULL,
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		P.*, R.RoleName
	FROM
		{databaseOwner}{objectQualifier}RZC_StorePermissions P
	LEFT JOIN
		{databaseOwner}{objectQualifier}Roles R
	ON
		R.[RoleID] = P.[RoleID]
	WHERE
		P.[Section] = @Section
		AND P.[StoreID] = @StoreID
		AND P.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListStoreReviewsByFilter
	@PageNumber INT = NULL,
	@PageSize INT = NULL,
	@OrderColumn VARCHAR(128) = NULL,
	@OrderDirection VARCHAR(4) = NULL,
	@SearchValue NVARCHAR(256) = NULL,
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SET NOCOUNT ON;
	DECLARE @PageRecordStart INT
	DECLARE @PageRecordEnd INT
	SET @PageRecordStart = ((@PageNumber - 1) * @PageSize) + 1
	SET @PageRecordEnd = @PageNumber * @PageSize
	;WITH [ReviewsPage] AS
	(
		SELECT
			(
				CASE
					WHEN @OrderColumn = 'ReviewID' AND @OrderDirection = 'ASC' THEN ROW_NUMBER() OVER (ORDER BY PR.[ReviewID] ASC)
					WHEN @OrderColumn = 'ReviewID' AND @OrderDirection = 'DESC' THEN ROW_NUMBER() OVER (ORDER BY PR.[ReviewID] DESC)
					WHEN @OrderColumn = 'ProductID' AND @OrderDirection = 'ASC' THEN ROW_NUMBER() OVER (ORDER BY PR.[ProductID] ASC)
					WHEN @OrderColumn = 'ProductID' AND @OrderDirection = 'DESC' THEN ROW_NUMBER() OVER (ORDER BY PR.[ProductID] DESC)
					WHEN @OrderColumn = 'DNNUserName' AND @OrderDirection = 'ASC' THEN ROW_NUMBER() OVER (ORDER BY PR.[DNNUserName] ASC)
					WHEN @OrderColumn = 'DNNUserName' AND @OrderDirection = 'DESC' THEN ROW_NUMBER() OVER (ORDER BY PR.[DNNUserName] DESC)
					WHEN @OrderColumn = 'Rate' AND @OrderDirection = 'ASC' THEN ROW_NUMBER() OVER (ORDER BY PR.[Rate] ASC)
					WHEN @OrderColumn = 'Rate' AND @OrderDirection = 'DESC' THEN ROW_NUMBER() OVER (ORDER BY PR.[Rate] DESC)
					WHEN @OrderColumn = 'NickName' AND @OrderDirection = 'ASC' THEN ROW_NUMBER() OVER (ORDER BY PR.[NickName] ASC)
					WHEN @OrderColumn = 'NickName' AND @OrderDirection = 'DESC' THEN ROW_NUMBER() OVER (ORDER BY PR.[NickName] DESC)
					WHEN @OrderColumn = 'ReviewDate' AND @OrderDirection = 'ASC' THEN ROW_NUMBER() OVER (ORDER BY PR.[ReviewDate] ASC)
					WHEN @OrderColumn = 'ReviewDate' AND @OrderDirection = 'DESC' THEN ROW_NUMBER() OVER (ORDER BY PR.[ReviewDate] DESC)
					WHEN @OrderColumn = 'Approved' AND @OrderDirection = 'ASC' THEN ROW_NUMBER() OVER (ORDER BY PR.[Approved] ASC)
					WHEN @OrderColumn = 'Approved' AND @OrderDirection = 'DESC' THEN ROW_NUMBER() OVER (ORDER BY PR.[Approved] DESC)
					WHEN @OrderColumn = 'DateApproved' AND @OrderDirection = 'ASC' THEN ROW_NUMBER() OVER (ORDER BY PR.[DateApproved] ASC)
					WHEN @OrderColumn = 'DateApproved' AND @OrderDirection = 'DESC' THEN ROW_NUMBER() OVER (ORDER BY PR.[DateApproved] DESC)
				ELSE ROW_NUMBER() OVER (ORDER BY PR.[ReviewID] ASC)
				END
			) AS [RowNo], PR.*, P.[ModelNumber], P.[ModelName]
		FROM
			{databaseOwner}{objectQualifier}RZC_ProductReviews PR
		INNER JOIN
			{databaseOwner}{objectQualifier}RZC_Products P
		ON
			P.[ProductID] = PR.[ProductID]
		WHERE
			(P.[StoreID] = @StoreID OR @StoreID = -1)
			AND P.[PortalID] = @PortalID
			AND (
				PR.[DNNUserName] LIKE '%' + @SearchValue + '%'
				OR PR.[Comments] LIKE '%' + @SearchValue + '%'
				OR PR.[NickName] LIKE '%' + @SearchValue + '%'
				OR P.[ModelNumber] LIKE '%' + @SearchValue + '%'
				OR P.[ModelName] LIKE '%' + @SearchValue + '%'
				OR P.[Summary] LIKE '%' + @SearchValue + '%'
				OR P.[Description] LIKE '%' + @SearchValue + '%'
			)
	)
	SELECT
		*,
		TotalRecords = (
			SELECT COUNT(*) FROM [ReviewsPage]
		),
		MoreRecords = (
			SELECT COUNT(*) FROM [ReviewsPage]
			WHERE [RowNo] > @PageRecordEnd
		)
	FROM
		[ReviewsPage]
	WHERE
		[RowNo] BETWEEN @PageRecordStart AND @PageRecordEnd
	ORDER BY
		[RowNo]
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListStores
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		S.*
	FROM
		{databaseOwner}{objectQualifier}RZC_Stores S
	WHERE
		S.[PortalID] = @PortalID
	ORDER BY
		S.[StoreID]
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListSubscriptionsByFilter
	@PageNumber INT = NULL,
	@PageSize INT = NULL,
	@OrderColumn VARCHAR(128) = NULL,
	@OrderDirection VARCHAR(4) = NULL,
	@DateFilter VARCHAR(10) = NULL,
	@FromDate DATETIME = NULL,
	@ToDate DATETIME = NULL,
	@Status NVARCHAR(50) = NULL,
	@PayMethod NVARCHAR(100) = NULL,
	@Interval NVARCHAR(50) = NULL,
	@SearchValue NVARCHAR(256) = NULL,
	@CustomerID INT = NULL,
	@OrderID INT = NULL,
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SET NOCOUNT ON;
	DECLARE @PageRecordStart INT
	DECLARE @PageRecordEnd INT
	SET @PageRecordStart = ((@PageNumber - 1) * @PageSize) + 1
	SET @PageRecordEnd = @PageNumber * @PageSize
	;WITH [SubscriptionsPage] AS
	(
		SELECT
			(
				CASE
					WHEN @OrderColumn = 'Status' AND @OrderDirection = 'ASC' THEN ROW_NUMBER() OVER (ORDER BY S.[Status] ASC)
					WHEN @OrderColumn = 'Status' AND @OrderDirection = 'DESC' THEN ROW_NUMBER() OVER (ORDER BY S.[Status] DESC)
					WHEN @OrderColumn = 'OrderID' AND @OrderDirection = 'ASC' THEN ROW_NUMBER() OVER (ORDER BY S.[OrderID] ASC)
					WHEN @OrderColumn = 'OrderID' AND @OrderDirection = 'DESC' THEN ROW_NUMBER() OVER (ORDER BY S.[OrderID] DESC)
					WHEN @OrderColumn = 'Customer' AND @OrderDirection = 'ASC' THEN ROW_NUMBER() OVER (ORDER BY (C.[FirstName] + ' ' + C.[LastName]) ASC)
					WHEN @OrderColumn = 'Customer' AND @OrderDirection = 'DESC' THEN ROW_NUMBER() OVER (ORDER BY (C.[FirstName] + ' ' + C.[LastName]) DESC)
					WHEN @OrderColumn = 'ProductName' AND @OrderDirection = 'ASC' THEN ROW_NUMBER() OVER (ORDER BY OD.[ProductName] ASC)
					WHEN @OrderColumn = 'ProductName' AND @OrderDirection = 'DESC' THEN ROW_NUMBER() OVER (ORDER BY OD.[ProductName] DESC)
					WHEN @OrderColumn = 'CreateDate' AND @OrderDirection = 'ASC' THEN ROW_NUMBER() OVER (ORDER BY S.[CreateDate] ASC)
					WHEN @OrderColumn = 'CreateDate' AND @OrderDirection = 'DESC' THEN ROW_NUMBER() OVER (ORDER BY S.[CreateDate] DESC)
					WHEN @OrderColumn = 'NextPaymentDate' AND @OrderDirection = 'ASC' THEN ROW_NUMBER() OVER (ORDER BY S.[NextPaymentDate] ASC)
					WHEN @OrderColumn = 'NextPaymentDate' AND @OrderDirection = 'DESC' THEN ROW_NUMBER() OVER (ORDER BY S.[NextPaymentDate] DESC)
					WHEN @OrderColumn = 'Amount' AND @OrderDirection = 'ASC' THEN ROW_NUMBER() OVER (ORDER BY S.[Amount] ASC)
					WHEN @OrderColumn = 'Amount' AND @OrderDirection = 'DESC' THEN ROW_NUMBER() OVER (ORDER BY S.[Amount] DESC)
					WHEN @OrderColumn = 'Interval' AND @OrderDirection = 'ASC' THEN ROW_NUMBER() OVER (ORDER BY S.[Interval] ASC)
					WHEN @OrderColumn = 'Interval' AND @OrderDirection = 'DESC' THEN ROW_NUMBER() OVER (ORDER BY S.[Interval] DESC)
					WHEN @OrderColumn = 'Occurrences' AND @OrderDirection = 'ASC' THEN ROW_NUMBER() OVER (ORDER BY S.[Occurrences] ASC)
					WHEN @OrderColumn = 'Occurrences' AND @OrderDirection = 'DESC' THEN ROW_NUMBER() OVER (ORDER BY S.[Occurrences] DESC)
					WHEN @OrderColumn = 'PayMethod' AND @OrderDirection = 'ASC' THEN ROW_NUMBER() OVER (ORDER BY ISNULL(PM.[Name], S.[PayType]) ASC)
					WHEN @OrderColumn = 'PayMethod' AND @OrderDirection = 'DESC' THEN ROW_NUMBER() OVER (ORDER BY ISNULL(PM.[Name], S.[PayType]) DESC)
				ELSE ROW_NUMBER() OVER (ORDER BY S.[SubscriptionID] DESC)
				END
			) AS [RowNo], S.*, (C.[FirstName] + ' ' + C.[LastName]) AS [CustomerName], ISNULL(PM.[Name], S.[PayType]) AS [PayMethod]
		FROM
			{databaseOwner}{objectQualifier}RZC_SubscriptionSC S
			JOIN {databaseOwner}{objectQualifier}RZC_Customer C ON C.[CustomerID] = S.[CustomerID]
			CROSS APPLY
			(
				SELECT
					TOP 1 OD.[ProductName]
				FROM
					{databaseOwner}{objectQualifier}RZC_StoreOrderDetails OD
				WHERE
					OD.[OrderID] = S.[OrderID]
					AND OD.[ProductID] = S.[ProductID]
					AND OD.[OrderDetailID] = (CASE WHEN S.[OrderDetailID] > 0 THEN S.[OrderDetailID] ELSE OD.[OrderDetailID] END)
			) OD
			LEFT JOIN {databaseOwner}{objectQualifier}RZC_PaymentMethods PM ON PM.[PayMethodID] = S.[PayMethodID]
		WHERE
			(@FromDate IS NULL OR @FromDate <= CASE WHEN @DateFilter = 'Create' THEN CAST(S.[CreateDate] AS DATE) ELSE S.[NextPaymentDate] END)
			AND (@ToDate IS NULL OR @ToDate >= CASE WHEN @DateFilter = 'Create' THEN CAST(S.[CreateDate] AS DATE) ELSE S.[NextPaymentDate] END)
			AND (NULLIF(@Status, '') IS NULL OR S.[Status] = @Status)
			AND (NULLIF(@PayMethod, '') IS NULL OR @PayMethod = ISNULL(PM.[Name], S.[PayType]))
			AND (NULLIF(@Interval, '') IS NULL OR S.[Interval] = @Interval)
			AND (NULLIF(@SearchValue, '') IS NULL
				OR (
					(LEFT(@SearchValue, 1) = '#' AND S.[OrderID] = TRY_CONVERT(INT, SUBSTRING(@SearchValue, 2, LEN(@SearchValue))))
					OR (LEFT(@SearchValue, 1) <> '#'
						AND (
							OD.[ProductName] LIKE '%' + @SearchValue + '%'
							OR S.[BillingName] LIKE '%' + @SearchValue + '%'
							OR S.[BillingAddress] LIKE '%' + @SearchValue + '%'
							OR S.[BillingCity] LIKE '%' + @SearchValue + '%'
							OR S.[BillingZip] LIKE '%' + @SearchValue + '%'
							OR S.[BillingState] LIKE '%' + @SearchValue + '%'
							OR S.[BillingCountry] LIKE '%' + @SearchValue + '%'
							OR S.[TransID] LIKE '%' + @SearchValue + '%'
						)
					)
				)
			)
			AND (NULLIF(@CustomerID, '-1') IS NULL OR S.[CustomerID] = @CustomerID)
			AND (NULLIF(@OrderID, '-1') IS NULL OR S.[OrderID] = @OrderID)
			AND (S.[StoreID] = @StoreID OR @StoreID = -1)
			AND S.[PortalID] = @PortalID
	)
	SELECT
		*,
		TotalRecords = (
			SELECT COUNT(*) FROM [SubscriptionsPage]
		),
		MoreRecords = (
			SELECT COUNT(*) FROM [SubscriptionsPage]
			WHERE [RowNo] > @PageRecordEnd
		)
	FROM
		[SubscriptionsPage]
	WHERE
		[RowNo] BETWEEN @PageRecordStart AND @PageRecordEnd
	ORDER BY
		[RowNo];
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListSubscriptionsByOrderID
	@OrderID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		S.*
	FROM
		{databaseOwner}{objectQualifier}RZC_SubscriptionSC S
	WHERE
		S.[OrderID] = @OrderID
		AND S.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListTaxesByAddress
	@RegionCode VARCHAR(6) = NULL,
	@City VARCHAR(48) = NULL,
	@PostalCode VARCHAR(16) = NULL,
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		T.*
	FROM
		{databaseOwner}{objectQualifier}RZC_Tax T
	WHERE
		T.[State] = @RegionCode
		AND (T.[City] = @City OR NULLIF(T.[City], '') IS NULL)
		AND (T.[PostalCode] = @PostalCode OR NULLIF(T.[PostalCode], '') IS NULL OR T.[PostalCode] = '0')
		AND (T.[StoreID] = @StoreID OR T.[StoreID] = -1)
		AND T.[PortalID] = @PortalID
	ORDER BY
		DIFFERENCE(T.[City], @City) DESC,
		DIFFERENCE(T.[PostalCode], @PostalCode) DESC
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListTaxesByFilter
	@PageNumber INT = NULL,
	@PageSize INT = NULL,
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SET NOCOUNT ON;
	DECLARE @PageRecordStart INT
	DECLARE @PageRecordEnd INT
	SET @PageRecordStart = ((@PageNumber - 1) * @PageSize) + 1
	SET @PageRecordEnd = @PageNumber * @PageSize
	;WITH [TaxesPage] AS
	(
		SELECT
			ROW_NUMBER() OVER (ORDER BY T.[TaxId] ASC) AS [RowNo], T.*
		FROM
			{databaseOwner}{objectQualifier}RZC_Tax T
		WHERE
			(T.[StoreID] = @StoreID OR T.[StoreID] IS NULL)
			AND T.[PortalID] = @PortalID
	)
	SELECT
		*,
		TotalRecords = (
			SELECT COUNT(*) FROM [TaxesPage]
		),
		MoreRecords = (
			SELECT COUNT(*) FROM [TaxesPage]
			WHERE [RowNo] > @PageRecordEnd
		)
	FROM
		[TaxesPage]
	WHERE
		[RowNo] BETWEEN @PageRecordStart AND @PageRecordEnd
	ORDER BY
		[RowNo];
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListTerminationSubscriptions
	@StoreID INT,
	@PortalID INT
AS
BEGIN
	DECLARE @TodayDate DATE = CONVERT(DATE, GETDATE())
	SELECT
		S.*
	FROM
		{databaseOwner}{objectQualifier}RZC_SubscriptionSC S
	WHERE
		S.[PortalID] = @PortalID
		AND (S.[StoreID] = @StoreID OR @StoreID = -1)
		AND S.[Status] = 'Suspended'
		AND @TodayDate >= (
			CASE S.[Interval]
				WHEN 'Weekly' THEN DATEADD(DAY, 7, S.[NextPaymentDate])
				WHEN '2Weeks' THEN DATEADD(DAY, 14, S.[NextPaymentDate])
				WHEN 'Monthly' THEN DATEADD(MONTH, 1, S.[NextPaymentDate])
				WHEN '2Months' THEN DATEADD(MONTH, 2, S.[NextPaymentDate])
				WHEN 'Quarterly' THEN DATEADD(MONTH, 3, S.[NextPaymentDate])
				WHEN 'Semiannual' THEN DATEADD(MONTH, 6, S.[NextPaymentDate])
				WHEN 'Yearly' THEN DATEADD(YEAR, 1, S.[NextPaymentDate])
			END
		)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListTodaySubscriptions
	@Suspend SMALLINT,
	@StoreID INT,
	@PortalID INT
AS
BEGIN
	DECLARE @TodayDate DATE = CONVERT(DATE, GETDATE())
SELECT
	S.*
FROM
	{databaseOwner}{objectQualifier}RZC_SubscriptionSC S
WHERE
	S.[PortalID] = @PortalID
	AND (S.[StoreID] = @StoreID OR @StoreID = -1)
	AND S.[Status] = 'Active'
	AND S.[Suspend] < @Suspend
	AND S.[NextPaymentDate] <= @TodayDate
	AND (S.[Occurrences] = 9999 OR S.[Occurrences] - (
		SELECT
			COUNT(PH.[PayHistID])
		FROM
			{databaseOwner}{objectQualifier}RZC_PayHist PH
		WHERE
			PH.[OrderID] = S.[OrderID]
			AND PH.[SubscriptionID] = S.[SubscriptionID]
			AND PH.[Success] = 1) > 0
	)
	AND NOT EXISTS (
		SELECT
			PH.[PayHistID]
		FROM
			{databaseOwner}{objectQualifier}RZC_PayHist PH
		WHERE
			PH.[OrderID] = S.[OrderID]
			AND PH.[SubscriptionID] = S.[SubscriptionID]
			AND PH.[Success] = 1
			AND CONVERT(DATE, PH.[PayDate]) >= S.[NextPaymentDate]
	)
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListUserOrders
	@DNNLogin VARCHAR(50) = NULL,
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		O.*
	FROM
		{databaseOwner}{objectQualifier}RZC_StoreOrders O
	INNER JOIN
		{databaseOwner}{objectQualifier}RZC_Customer C
	ON
		C.[CustomerID] = O.[CustomerID]
	WHERE
		C.[DNNLogin] = @DNNLogin
		AND (O.[StoreID] = @StoreID OR @StoreID = -1)
		AND O.[PortalID] = @PortalID
	ORDER BY
		O.[OrderDate] DESC
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListUserOrdersByFilter
	@PageNumber INT = NULL,
	@PageSize INT = NULL,
	@OrderColumn VARCHAR(128) = NULL,
	@OrderDirection VARCHAR(4) = NULL,
	@DNNLogin VARCHAR(50) = NULL,
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SET NOCOUNT ON;
	DECLARE @PageRecordStart INT
	DECLARE @PageRecordEnd INT
	SET @PageRecordStart = ((@PageNumber - 1) * @PageSize) + 1
	SET @PageRecordEnd = @PageNumber * @PageSize
	;WITH [OrdersPage] AS
	(
		SELECT
			(
				CASE
					WHEN @OrderColumn = 'Status' AND @OrderDirection = 'ASC' THEN ROW_NUMBER() OVER (ORDER BY O.[Status] ASC)
					WHEN @OrderColumn = 'Status' AND @OrderDirection = 'DESC' THEN ROW_NUMBER() OVER (ORDER BY O.[Status] DESC)
					WHEN @OrderColumn = 'OrderID' AND @OrderDirection = 'ASC' THEN ROW_NUMBER() OVER (ORDER BY O.[OrderID] ASC)
					WHEN @OrderColumn = 'OrderID' AND @OrderDirection = 'DESC' THEN ROW_NUMBER() OVER (ORDER BY O.[OrderID] DESC)
					WHEN @OrderColumn = 'OrderDate' AND @OrderDirection = 'ASC' THEN ROW_NUMBER() OVER (ORDER BY O.[OrderDate] ASC)
					WHEN @OrderColumn = 'OrderDate' AND @OrderDirection = 'DESC' THEN ROW_NUMBER() OVER (ORDER BY O.[OrderDate] DESC)
					WHEN @OrderColumn = 'GrandTotal' AND @OrderDirection = 'ASC' THEN ROW_NUMBER() OVER (ORDER BY O.[GrandTotal] ASC)
					WHEN @OrderColumn = 'GrandTotal' AND @OrderDirection = 'DESC' THEN ROW_NUMBER() OVER (ORDER BY O.[GrandTotal] DESC)
				ELSE ROW_NUMBER() OVER (ORDER BY O.[OrderID] ASC)
				END
			) AS [RowNo], O.*, PM.[PayMethod], P.[PaidTotal]
		FROM
			{databaseOwner}{objectQualifier}RZC_StoreOrders O
		INNER JOIN
			{databaseOwner}{objectQualifier}RZC_Customer C
		ON
			C.[CustomerID] = O.[CustomerID]
		OUTER APPLY
		(
			SELECT
				STUFF((
					SELECT
						', ' + PH.[PayType]
					FROM
						(
							SELECT
								PH.[PayType], MIN(PH.[PayHistID]) AS 'PayHistID'
							FROM
								{databaseOwner}{objectQualifier}RZC_PayHist PH
							WHERE
								PH.[OrderID] = O.[OrderID]
							GROUP BY
								PH.[PayType]
						) PH
					ORDER BY
						PH.[PayHistID]
					FOR XML PATH('')), 1, 2, ''
				) AS 'PayMethod'
		) PM
		OUTER APPLY
		(
			SELECT
				ISNULL(SUM(PH.[Amount]), 0) AS 'PaidTotal'
			FROM
				{databaseOwner}{objectQualifier}RZC_PayHist PH
			WHERE
				PH.[OrderID] = O.[OrderID]
				AND PH.[Success] = 1
		) P
		WHERE
			C.[DNNLogin] = @DNNLogin
			AND (O.[StoreID] = @StoreID OR @StoreID = -1)
			AND O.[PortalID] = @PortalID
	)
	SELECT
		*,
		TotalRecords = (
			SELECT COUNT(*) FROM [OrdersPage]
		),
		MoreRecords = (
			SELECT COUNT(*) FROM [OrdersPage]
			WHERE [RowNo] > @PageRecordEnd
		)
	FROM
		[OrdersPage]
	WHERE
		[RowNo] BETWEEN @PageRecordStart AND @PageRecordEnd
	ORDER BY
		[RowNo];
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListUserProductOrders
	@DNNLogin VARCHAR(128) = NULL,
	@ProductID INT = NULL,
	@Length INT = NULL,
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT TOP (@Length)
		OD.*, O.[OrderID], O.[OrderDate], O.[Status]
	FROM
		{databaseOwner}{objectQualifier}RZC_StoreOrders O
	INNER JOIN
		{databaseOwner}{objectQualifier}RZC_StoreOrderDetails OD
	ON
		OD.[OrderID] = O.[OrderID]
	INNER JOIN
		{databaseOwner}{objectQualifier}RZC_Customer C
	ON
		C.[CustomerID] = O.[CustomerID]
	INNER JOIN
			{databaseOwner}{objectQualifier}RZC_PayHist P
		ON
			P.[OrderID] = O.[OrderID]
	WHERE
		C.[DNNLogin] = @DNNLogin
		AND OD.[ProductID] = @ProductID
		AND O.[DeletedFlag] <> 1
		AND O.[Status] NOT IN ('BillMeLater', 'Cancelled', 'Incomplete', 'Returned')
		AND P.[Success] = 1
		AND P.[TransType] = 'Sale'
		AND (O.[StoreID] = @StoreID OR @StoreID = -1)
		AND O.[PortalID] = @PortalID
	ORDER BY
		O.[OrderDate] DESC
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListUserSavedSearches
	@UserID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		SS.*
	FROM
		{databaseOwner}{objectQualifier}RZC_SavedSearches SS
	WHERE
		SS.[UserID] = @UserID
		AND SS.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListVariantConditionalGroups
	@VariantID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		VCG.[ID], PVG.[VariantGroupID], PVG.[VariantGroup], PV.[VariantID], PV.[VariantName], PV.[VariantDisplayType]
	FROM
		{databaseOwner}{objectQualifier}RZC_VariantConditionalGroup VCG
		INNER JOIN
			{databaseOwner}{objectQualifier}RZC_ProductVariantGroup PVG
		ON
			PVG.[VariantGroupID] = VCG.[VariantGroupID]
		INNER JOIN
			{databaseOwner}{objectQualifier}RZC_ProductVariant PV
		ON
			PV.[VariantID] = VCG.[VariantID]
	WHERE
		VCG.[VariantID] = @VariantID
		AND PVG.[PortalID] = @PortalID
	ORDER BY
		PVG.[SortOrder] ASC, PV.[SortOrder] ASC
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_ListVariantGroupConditionals
	@VariantGroupID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		VCG.[ID], PV.[VariantGroupID], PV.[VariantGroup], PV.[VariantID], PV.[VariantName], PV.[VariantDisplayType]
	FROM
		{databaseOwner}{objectQualifier}RZC_VariantConditionalGroup VCG
		INNER JOIN
			{databaseOwner}{objectQualifier}RZC_ProductVariantGroup PVG
		ON
			PVG.[VariantGroupID] = VCG.[VariantGroupID]
		INNER JOIN
			{databaseOwner}{objectQualifier}RZC_ProductVariant PV
		ON
			PV.[VariantID] = VCG.[VariantID]
	WHERE
		VCG.[VariantGroupID] = @VariantGroupID
		AND PVG.[PortalID] = @PortalID
	ORDER BY
		PVG.[SortOrder] ASC, PV.[SortOrder] ASC
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_LoadStoreConfig
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	SELECT
		SC.*
	FROM
		{databaseOwner}{objectQualifier}RZC_StoreConfig SC
	WHERE
		SC.[StoreID] = @StoreID
		AND SC.[PortalID] = @PortalID
	ORDER BY
		SC.[ConfigName]
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_SaveProductLocalization
	@ProductID INT = NULL,
	@LanguageLocale NVARCHAR(20) = NULL,
	@ModelName NVARCHAR(200) = NULL,
	@Summary NVARCHAR(1000) = NULL,
	@TabName1 NVARCHAR(50) = NULL,
	@Description NTEXT = NULL,
	@TabName2 NVARCHAR(50) = NULL,
	@Description2 NTEXT = NULL,
	@TabName3 NVARCHAR(50) = NULL,
	@Description3 NTEXT = NULL,
	@TabName4 NVARCHAR(50) = NULL,
	@Description4 NTEXT = NULL,
	@TabName5 NVARCHAR(50) = NULL,
	@Description5 NTEXT = NULL
AS
BEGIN
	SET NOCOUNT ON;
	MERGE
		{databaseOwner}{objectQualifier}RZC_ProductLocalization AS TARGET
	USING
	(
		SELECT
			@ProductID AS [ProductID], @LanguageLocale AS [LanguageLocale],
			@ModelName AS [ModelName], @Summary AS [Summary],
			@TabName1 AS [TabName1], @Description AS [Description],
			@TabName2 AS [TabName2], @Description2 AS [Description2],
			@TabName3 AS [TabName3], @Description3 AS [Description3],
			@TabName4 AS [TabName4], @Description4 AS [Description4],
			@TabName5 AS [TabName5], @Description5 AS [Description5]
	) AS SOURCE
	ON
	(
		TARGET.[ProductID] = SOURCE.[ProductID]
		AND TARGET.[LanguageLocale] = SOURCE.[LanguageLocale]
	)
	WHEN MATCHED THEN
		UPDATE SET
			[ModelName] = SOURCE.[ModelName],
			[Summary] = SOURCE.[Summary],
			[TabName1] = SOURCE.[TabName1],
			[Description] = SOURCE.[Description],
			[TabName2] = SOURCE.[TabName2],
			[Description2] = SOURCE.[Description2],
			[TabName3] = SOURCE.[TabName3],
			[Description3] = SOURCE.[Description3],
			[TabName4] = SOURCE.[TabName4],
			[Description4] = SOURCE.[Description4],
			[TabName5] = SOURCE.[TabName5],
			[Description5] = SOURCE.[Description5]
	WHEN NOT MATCHED THEN
		INSERT
			([ProductID]
			,[LanguageLocale]
			,[ModelName]
			,[Summary]
			,[TabName1]
			,[Description]
			,[TabName2]
			,[Description2]
			,[TabName3]
			,[Description3]
			,[TabName4]
			,[Description4]
			,[TabName5]
			,[Description5])
		VALUES
			(SOURCE.[ProductID]
			,SOURCE.[LanguageLocale]
			,SOURCE.[ModelName]
			,SOURCE.[Summary]
			,SOURCE.[TabName1]
			,SOURCE.[Description]
			,SOURCE.[TabName2]
			,SOURCE.[Description2]
			,SOURCE.[TabName3]
			,SOURCE.[Description3]
			,SOURCE.[TabName4]
			,SOURCE.[Description4]
			,SOURCE.[TabName5]
			,SOURCE.[Description5]);
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_SaveProductManageRole
	@ProductID INT = NULL,
	@RoleID INT = NULL,
	@Action VARCHAR(16) = NULL,
	@Type VARCHAR(16) = NULL,
	@ExpireDays INT = NULL,
	@StartDate DATETIME = NULL,
	@EndDate DATETIME = NULL
AS
BEGIN
	SET NOCOUNT ON;
	MERGE
		{databaseOwner}{objectQualifier}RZC_ProductManageRole AS TARGET
	USING
	(
		SELECT
			@ProductID AS [ProductID], @RoleID AS [RoleID],
			@Action AS [Action], @Type AS [Type], @ExpireDays AS [ExpireDays],
			@StartDate AS [StartDate], @EndDate AS [EndDate]
	) AS SOURCE
	ON
	(
		TARGET.[ProductID] = SOURCE.[ProductID]
		AND TARGET.[RoleID] = SOURCE.[RoleID]
		AND TARGET.[Action] = SOURCE.[Action]
	)
	WHEN MATCHED THEN
		UPDATE SET
			[Action] = SOURCE.[Action],
			[Type] = SOURCE.[Type],
			[ExpireDays] = SOURCE.[ExpireDays],
			[StartDate] = SOURCE.[StartDate],
			[EndDate] = SOURCE.[EndDate]
	WHEN NOT MATCHED THEN
		INSERT
			([ProductID]
			,[RoleID]
			,[Action]
			,[Type]
			,[ExpireDays]
			,[StartDate]
			,[EndDate])
		VALUES
			(SOURCE.[ProductID]
			,SOURCE.[RoleID]
			,SOURCE.[Action]
			,SOURCE.[Type]
			,SOURCE.[ExpireDays]
			,SOURCE.[StartDate]
			,SOURCE.[EndDate])
	OUTPUT INSERTED.[ID];
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_SaveShoppingCart
	@Description VARCHAR(150) = NULL,
	@DNNLogin VARCHAR(50) = NULL,
	@ShippingTotal MONEY = NULL,
	@HandlingCharge MONEY = NULL,
	@TaxTotal MONEY = NULL,
	@Discount MONEY = NULL,
	@PortalID INT = NULL,
	@StoreID INT = NULL
AS
BEGIN
	DECLARE @CartID [INT]
	SELECT
		@CartID = SC.[CartID]
	FROM
		{databaseOwner}{objectQualifier}RZC_SavedCart SC
	WHERE
		SC.[Description] = @Description
		AND SC.[DNNLogin] = @DNNLogin
		AND SC.[PortalID] = @PortalID
		AND SC.[StoreID] = @StoreID
	IF @CartID IS NOT NULL
		BEGIN
			UPDATE
				{databaseOwner}{objectQualifier}RZC_SavedCart
			SET
				[CreateDate] = GETDATE(),
				[ShippingTotal] = @ShippingTotal,
				[HandlingCharge] = @HandlingCharge,
				[TaxTotal] = @TaxTotal,
				[Discount] = @Discount
			WHERE
				[CartID] = @CartID
			SELECT @CartID
		END
	ELSE
		BEGIN
			INSERT INTO {databaseOwner}{objectQualifier}RZC_SavedCart
				([Description]
				,[DNNLogin]
				,[PortalID]
				,[CreateDate]
				,[ShippingTotal]
				,[HandlingCharge]
				,[TaxTotal]
				,[Discount]
				,[StoreID])
			 VALUES
				(@Description
				,@DNNLogin
				,@PortalID
				,GETDATE()
				,@ShippingTotal
				,@HandlingCharge
				,@TaxTotal
				,@Discount
				,@StoreID)
			SELECT SCOPE_IDENTITY()
		END
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_SaveShoppingCartItem
	@CartID INT = NULL,
	@ProductID INT = NULL,
	@Manufacturer VARCHAR(50) = NULL,
	@ModelName VARCHAR(255) = NULL,
	@UnitCost MONEY = NULL,
	@QuantityOnHand INT = NULL,
	@Quantity INT = NULL,
	@Weight DECIMAL(18,0) = NULL,
	@ProductName NVARCHAR(255) = NULL,
	@ProductSku VARCHAR(50) = NULL,
	@IsRequired BIT = NULL,
	@BundleID INT = NULL,
	@AddDnnRole VARCHAR(50) = NULL,
	@Recurring BIT = NULL,
	@RequireLogin BIT = NULL,
	@UsePriPriceWght BIT = NULL,
	@MasterBundleID INT = NULL,
	@LineItem INT = NULL,
	@RoleExpireDays VARCHAR(50) = NULL,
	@MemberPrice MONEY = NULL,
	@TaxExempt BIT = NULL,
	@ShipCodes VARCHAR(100) = NULL,
	@ShipText VARCHAR(500) = NULL,
	@ShipCost MONEY = NULL,
	@PriceClass VARCHAR(20) = NULL,
	@VariantCost MONEY = NULL,
	@RemoveDNNRole VARCHAR(70) = NULL,
	@IsBooking BIT = NULL
AS
BEGIN
	DECLARE @CartDetailID [INT],
			@DetailVariantID [INT]
	SELECT
		@CartDetailID = SCD.[CartDetailID]
	FROM
		{databaseOwner}{objectQualifier}RZC_SavedCartDetail SCD
	WHERE
		SCD.[CartID] = @CartID
		AND SCD.[ProductID] = @ProductID
		AND SCD.[ModelName] = @ModelName
		AND SCD.[ProductName] = @ProductName
		AND SCD.[ProductSku] = @ProductSku
	SELECT
		@DetailVariantID = SCDV.[DetailVariantID]
	FROM
		{databaseOwner}{objectQualifier}RZC_SavedCartDetailVariant SCDV
	WHERE
		SCDV.[CartDetailID] = @CartDetailID
	IF (@CartDetailID IS NOT NULL) AND (@DetailVariantID IS NULL AND @IsBooking <> 1)
		BEGIN
			UPDATE
				{databaseOwner}{objectQualifier}RZC_SavedCartDetail
			SET
				[Quantity] = @Quantity
			WHERE
				[CartDetailID] = @CartDetailID
			SELECT @CartDetailID
		END
	ELSE
		BEGIN
			INSERT INTO {databaseOwner}{objectQualifier}RZC_SavedCartDetail
				([CartID]
				,[ProductID]
				,[Manufacturer]
				,[ModelName]
				,[UnitCost]
				,[QuantityOnHand]
				,[Quantity]
				,[Weight]
				,[ProductName]
				,[ProductSku]
				,[IsRequired]
				,[BundleID]
				,[AddDnnRole]
				,[Recurring]
				,[RequireLogin]
				,[UsePriPriceWght]
				,[MasterBundleID]
				,[LineItem]
				,[RoleExpireDays]
				,[MemberPrice]
				,[TaxExempt]
				,[ShipCodes]
				,[ShipText]
				,[ShipCost]
				,[PriceClass]
				,[VariantCost]
				,[RemoveDNNRole])
			 VALUES
				(@CartID
				,@ProductID
				,@Manufacturer
				,@ModelName
				,@UnitCost
				,@QuantityOnHand
				,@Quantity
				,@Weight
				,@ProductName
				,@ProductSku
				,@IsRequired
				,@BundleID
				,@AddDnnRole
				,@Recurring
				,@RequireLogin
				,@UsePriPriceWght
				,@MasterBundleID
				,@LineItem
				,@RoleExpireDays
				,@MemberPrice
				,@TaxExempt
				,@ShipCodes
				,@ShipText
				,@ShipCost
				,@PriceClass
				,@VariantCost
				,@RemoveDNNRole)
			SELECT SCOPE_IDENTITY()
		END
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_SaveShoppingCartItemVariant
	@CartDetailID INT = NULL,
	@VariantGroupID INT = NULL,
	@VariantGroup VARCHAR(50) = NULL,
	@VariantID INT = NULL,
	@VariantName VARCHAR(50) = NULL,
	@VariantHasText BIT = NULL,
	@VariantText VARCHAR(200) = NULL,
	@PriceCalculated MONEY = NULL
AS
BEGIN
	DECLARE @DetailVariantID [INT]
	SELECT
		@DetailVariantID = SCDV.[DetailVariantID]
	FROM
		{databaseOwner}{objectQualifier}RZC_SavedCartDetailVariant SCDV
	WHERE
		SCDV.[CartDetailID] = @CartDetailID
		AND SCDV.[VariantGroup] = @VariantGroup
		AND SCDV.[VariantID] = @VariantID
	IF @DetailVariantID IS NOT NULL
		BEGIN
			UPDATE
				{databaseOwner}{objectQualifier}RZC_SavedCartDetailVariant
			SET
				[VariantGroup] = @VariantGroup,
				[VariantName] = @VariantName,
				[VariantHasText] = @VariantHasText,
				[VariantText] = @VariantText,
				[PriceCalculated] = @PriceCalculated
			WHERE
				[DetailVariantID] = @DetailVariantID
			SELECT @DetailVariantID
		END
	ELSE
		BEGIN
			INSERT INTO {databaseOwner}{objectQualifier}RZC_SavedCartDetailVariant
				([CartDetailID]
				,[VariantGroupID]
				,[VariantGroup]
				,[VariantID]
				,[VariantName]
				,[VariantHasText]
				,[VariantText]
				,[PriceCalculated])
			VALUES
				(@CartDetailID
				,@VariantGroupID
				,@VariantGroup
				,@VariantID
				,@VariantName
				,@VariantHasText
				,@VariantText
				,@PriceCalculated)
			SELECT SCOPE_IDENTITY()
		END
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_SaveStoreConfig
	@StoreConfig {databaseOwner}{objectQualifier}RCStoreConfig READONLY
AS
BEGIN
	SET NOCOUNT ON;
	MERGE {databaseOwner}{objectQualifier}RZC_StoreConfig AS TARGET
	USING (SELECT * FROM @StoreConfig) AS SOURCE
	ON
	(
		TARGET.[StoreID] = SOURCE.[StoreID]
		AND TARGET.[ConfigName] = SOURCE.[ConfigName]
		AND TARGET.[PortalID] = SOURCE.[PortalID]
	)
	WHEN MATCHED THEN
		UPDATE SET
			[ConfigValue] = SOURCE.[ConfigValue],
			[ModifiedBy] = SOURCE.[ModifiedBy],
			[ModifiedDate] = GETDATE()
	WHEN NOT MATCHED THEN
		INSERT
			([StoreID]
			,[ConfigName]
			,[ConfigValue]
			,[ModifiedBy]
			,[ModifiedDate]
			,[PortalID])
		VALUES
			(SOURCE.[StoreID]
			,SOURCE.[ConfigName]
			,SOURCE.[ConfigValue]
			,SOURCE.[ModifiedBy]
			,GETDATE()
			,SOURCE.[PortalID]);
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_SearchAutoComplete
	@SearchTerm NVARCHAR(50) = NULL,
	@UserID INT = NULL,
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	DECLARE @Now DATETIME = GETDATE()
	SET @SearchTerm = NULLIF(LTRIM(RTRIM(@SearchTerm)), '')
	SELECT DISTINCT TOP 8
		0 AS [ProductID], '' AS [SEOURL], S2.[Value] AS [Value], 'SearchKey' AS [Category]
	FROM
		{databaseOwner}{objectQualifier}RZC_SearchKeys S
	INNER JOIN
		{databaseOwner}{objectQualifier}RZC_Products P
	ON
		P.[ProductID] = S.[ProductID]
	CROSS APPLY (
		SELECT
			LTRIM(RTRIM([Value])) [Value]
		FROM
			{databaseOwner}{objectQualifier}RZC_FxSplit(S.[SearchTerm], ',')
	) S2
	WHERE
		(P.[PortalID] = @PortalID)
		AND (P.[StoreID] = @StoreID OR P.[Share] = 1 OR @StoreID = -1)
		AND (P.[LogicallyDeleted] <> 1 AND P.[Archived] <> 1 AND P.[HideProduct] <> 1)
		AND (S2.[Value] LIKE '%' + @SearchTerm + '%')
	UNION
	SELECT DISTINCT TOP 4
		P.[ProductID], P.[SEOURL], P.[ModelName] AS [Value], 'Product' AS [Category]
	FROM
		{databaseOwner}{objectQualifier}RZC_Products P
	WHERE
		P.[ModelName] LIKE '%' + @SearchTerm + '%'
		AND (
			@UserID = 0
			OR (
				P.[ProductID] NOT IN (
					SELECT
						VR.[ProductID]
					FROM
						{databaseOwner}{objectQualifier}RZC_ProductVisibilityRole VR
						JOIN {databaseOwner}{objectQualifier}UserRoles UR ON UR.[RoleID] = VR.[RoleID]
						JOIN {databaseOwner}{objectQualifier}Roles R ON R.[RoleID] = UR.[RoleID]
					WHERE
						R.[Status] = 1
						AND VR.[Action] = 'Hide'
						AND UR.[UserID] = @UserID
						AND @Now BETWEEN ISNULL(UR.[EffectiveDate], @Now) AND ISNULL(UR.[ExpiryDate], @Now)
				)
				AND (
					P.[ShowProductRole] = 0 OR P.[ProductID] IN (
						SELECT
							VR.[ProductID]
						FROM
							{databaseOwner}{objectQualifier}RZC_ProductVisibilityRole VR
							JOIN {databaseOwner}{objectQualifier}UserRoles UR ON UR.[RoleID] = VR.[RoleID]
							JOIN {databaseOwner}{objectQualifier}Roles R ON R.[RoleID] = UR.[RoleID]
						WHERE
							R.[Status] = 1
							AND VR.[Action] = 'Show'
							AND UR.[UserID] = @UserID
							AND @Now BETWEEN ISNULL(UR.[EffectiveDate], @Now) AND ISNULL(UR.[ExpiryDate], @Now)
					)
				)
			)
		)
		AND (P.[LogicallyDeleted] <> 1 AND P.[Archived] <> 1 AND P.[HideProduct] <> 1)
		AND (P.[StoreID] = @StoreID OR P.[Share] = 1)
		AND P.[PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateBookingHistory
	@ID INT = NULL,
	@VendorProductID INT = NULL,
	@OrderDetailID INT = NULL,
	@CustomerID INT = NULL,
	@StartDate DATETIME = NULL,
	@EndDate DATETIME = NULL,
	@BookQtyReserved INT = NULL,
	@BookQtyPurchased INT = NULL,
	@AllDay BIT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	UPDATE
		{databaseOwner}{objectQualifier}RZC_VendorBooking
	SET
		[VendorProductID] = @VendorProductID,
		[OrderDetailID] = @OrderDetailID,
		[CustomerID] = @CustomerID,
		[StartDate] = @StartDate,
		[EndDate] = @EndDate,
		[BookQtyReserved] = @BookQtyReserved,
		[BookQtyPurchased] = @BookQtyPurchased,
		[AllDay] = @AllDay
	WHERE
		[ID] = @ID
		AND [PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateCategory
	@CategoryID INT = NULL,
	@CategoryName VARCHAR(50) = NULL,
	@SortOrder INT = NULL,
	@Share BIT = NULL,
	@ParentID INT = NULL,
	@PortalID INT = NULL,
	@CatSEOURL VARCHAR(50) = NULL,
	@CatDescription NTEXT = NULL,
	@ShowCategoryRole BIT = NULL,
	@MinOrderAmount MONEY = NULL,
	@MinOrderQty INT = NULL,
	@DepartmentID INT = NULL,
	@Featured BIT = NULL,
	@CatImage NVARCHAR(500) = NULL,
	@BreadCrumb NVARCHAR(200) = NULL,
	@LinkUrl NVARCHAR(1000) = NULL,
	@H2Tag NVARCHAR(100) = NULL,
	@AltTag NVARCHAR(120) = NULL,
	@MetaDescription NVARCHAR(160) = NULL,
	@StoreID INT = NULL
AS
BEGIN
	UPDATE
		{databaseOwner}{objectQualifier}RZC_Category
	SET
		[CategoryName] = @CategoryName,
		[SortOrder] = @SortOrder,
		[Share] = @Share,
		[ParentID] = @ParentID,
		[PortalID] = @PortalID,
		[CatSEOURL] = @CatSEOURL,
		[CatDescription] = @CatDescription,
		[ShowCategoryRole] = @ShowCategoryRole,
		[MinOrderAmount] = @MinOrderAmount,
		[MinOrderQty] = @MinOrderQty,
		[DepartmentID] = @DepartmentID,
		[Featured] = @Featured,
		[CatImage] = @CatImage,
		[BreadCrumb] = @BreadCrumb,
		[LinkUrl] = @LinkUrl,
		[H2Tag] = @H2Tag,
		[AltTag] = @AltTag,
		[MetaDescription] = @MetaDescription,
		[StoreID] = @StoreID
	WHERE
		[CategoryID] = @CategoryID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateCategoryQuantityDiscount
	@QtyDiscountID INT = NULL,
	@CategoryID INT = NULL,
	@QtyFrom INT = NULL,
	@QtyTo INT = NULL,
	@Price MONEY = NULL,
	@DiscountGroup VARCHAR(50) = NULL
AS
BEGIN
	UPDATE
		{databaseOwner}{objectQualifier}RZC_CategoryQtyDiscounts
	SET
		[CategoryID] = @CategoryID,
		[QtyFrom] = @QtyFrom,
		[QtyTo] = @QtyTo,
		[Price] = @Price,
		[DiscountGroup] = @DiscountGroup
	WHERE
		[QtyDiscountID] = @QtyDiscountID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateClientCredential
	@ID BIGINT = NULL,
	@Title NVARCHAR(256) = NULL,
	@Summary NVARCHAR(1024) = NULL,
	@ClientID NVARCHAR(64) = NULL,
	@ClientSecret NVARCHAR(256) = NULL,
	@CallbackUrl NVARCHAR(256) = NULL,
	@ApplicationUrl NVARCHAR(256) = NULL,
	@Status SMALLINT = NULL,
	@SortOrder FLOAT = NULL,
	@CreatedDate DATETIME = NULL,
	@CreatedByUser NVARCHAR(64) = NULL,
	@ModifiedDate DATETIME = NULL,
	@ModifiedByUser NVARCHAR(64) = NULL,
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	UPDATE
		{databaseOwner}{objectQualifier}RZC_ClientCredentials
	SET
		[Title] = @Title,
		[Summary] = @Summary,
		[ClientID] = @ClientID,
		[ClientSecret] = @ClientSecret,
		[CallbackUrl] = @CallbackUrl,
		[ApplicationUrl] = @ApplicationUrl,
		[Status] = @Status,
		[SortOrder] = @SortOrder,
		[CreatedDate] = @CreatedDate,
		[CreatedByUser] = @CreatedByUser,
		[ModifiedDate] = @ModifiedDate,
		[ModifiedByUser] = @ModifiedByUser,
		[StoreID] = @StoreID,
		[PortalID] = @PortalID
	WHERE
		[ID] = @ID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateCoupon
	@CouponID INT = NULL,
	@CouponCode VARCHAR(50) = NULL,
	@CouponName VARCHAR(255) = NULL,
	@CouponAmount MONEY = NULL,
	@CouponQuantity VARCHAR(50) = NULL,
	@DiscountByItem BIT = NULL,
	@CreatedByUser VARCHAR(100) = NULL,
	@CreatedDate DATETIME = NULL,
	@ProductID INT = NULL,
	@CouponLimit INT = NULL,
	@CouponShipping MONEY = NULL,
	@DiscountPercent DECIMAL(18,2) = NULL,
	@PortalID INT = NULL,
	@ExpireDate DATETIME = NULL,
	@DiscountFirstPaymentOnly BIT = NULL,
	@CouponRoleExists BIT = NULL,
	@MaxUseProduct INT = NULL,
	@Active BIT = NULL,
	@StartDate DATETIME = NULL,
	@MinOrderAmount MONEY = NULL,
	@FreeStandardShipping BIT = NULL,
	@UpgradeShipping BIT = NULL,
	@StoreID INT = NULL
AS
BEGIN
	UPDATE
		{databaseOwner}{objectQualifier}RZC_Coupons
	SET
		[CouponCode] = @CouponCode,
		[CouponName] = @CouponName,
		[CouponAmount] = @CouponAmount,
		[CouponQuantity] = @CouponQuantity,
		[DiscountByItem] = @DiscountByItem,
		[CreatedByUser] = @CreatedByUser,
		[CreatedDate] = @CreatedDate,
		[ProductID] = @ProductID,
		[CouponLimit] = @CouponLimit,
		[CouponShipping] = @CouponShipping,
		[DiscountPercent] = @DiscountPercent,
		[PortalID] = @PortalID,
		[ExpireDate] = @ExpireDate,
		[DiscountFirstPaymentOnly] = @DiscountFirstPaymentOnly,
		[CouponRoleExists] = @CouponRoleExists,
		[MaxUseProduct] = @MaxUseProduct,
		[Active] = @Active,
		[StartDate] = @StartDate,
		[MinOrderAmount] = @MinOrderAmount,
		[FreeStandardShipping] = @FreeStandardShipping,
		[UpgradeShipping] = @UpgradeShipping,
		[StoreID] = @StoreID
	WHERE
		[CouponID] = @CouponID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateCustomer
	@CustomerID INT = NULL,
	@FirstName NVARCHAR(64) = NULL,
	@LastName NVARCHAR(64) = NULL,
	@Address1 NVARCHAR(256) = NULL,
	@Address2 NVARCHAR(128) = NULL,
	@City NVARCHAR(64) = NULL,
	@Zip NVARCHAR(64) = NULL,
	@State NVARCHAR(64) = NULL,
	@Country NVARCHAR(64) = NULL,
	@HomePhone VARCHAR(50) = NULL,
	@CellPhone VARCHAR(50) = NULL,
	@WorkPhone VARCHAR(50) = NULL,
	@PhoneCarrier VARCHAR(50) = NULL,
	@Remind BIT = NULL,
	@Email VARCHAR(50) = NULL,
	@BillingAddress1 NVARCHAR(256) = NULL,
	@BillingAddress2 NVARCHAR(256) = NULL,
	@BillingCity NVARCHAR(64) = NULL,
	@BillingZip NVARCHAR(64) = NULL,
	@BillingState NVARCHAR(64) = NULL,
	@BillingCountry NVARCHAR(64) = NULL,
	@AccountNo VARCHAR(50) = NULL,
	@MaskAccountNo VARCHAR(50) = NULL,
	@ABAExpire VARCHAR(50) = NULL,
	@DNNLogin NVARCHAR(128) = NULL,
	@DateCreated DATETIME = NULL,
	@Contact BIT = NULL,
	@IPAddress VARCHAR(50) = NULL,
	@PortalID INT = NULL,
	@CompanyName NVARCHAR(128) = NULL,
	@BuyerRole VARCHAR(50) = NULL,
	@AnniversaryDate DATETIME = NULL,
	@CreditLimit DECIMAL(18,2) = NULL,
	@BidLimit DECIMAL(18,2) = NULL,
	@ModifiedBy VARCHAR(50) = NULL,
	@DateModified DATETIME = NULL,
	@TaxID VARCHAR(50) = NULL,
	@StoreID INT = NULL
AS
BEGIN
	UPDATE
		{databaseOwner}{objectQualifier}RZC_Customer
	SET
		[FirstName] = @FirstName,
		[LastName] = @LastName,
		[Address1] = @Address1,
		[Address2] = @Address2,
		[City] = @City,
		[Zip] = @Zip,
		[State] = @State,
		[Country] = @Country,
		[HomePhone] = @HomePhone,
		[CellPhone] = @CellPhone,
		[WorkPhone] = @WorkPhone,
		[PhoneCarrier] = @PhoneCarrier,
		[Remind] = @Remind,
		[Email] = @Email,
		[BillingAddress1] = @BillingAddress1,
		[BillingAddress2] = @BillingAddress2,
		[BillingCity] = @BillingCity,
		[BillingZip] = @BillingZip,
		[BillingState] = @BillingState,
		[BillingCountry] = @BillingCountry,
		[AccountNo] = @AccountNo,
		[MaskAccountNo] = @MaskAccountNo,
		[ABAExpire] = @ABAExpire,
		[DNNLogin] = @DNNLogin,
		[DateCreated] = @DateCreated,
		[Contact] = @Contact,
		[IPAddress] = @IPAddress,
		[PortalID] = @PortalID,
		[CompanyName] = @CompanyName,
		[BuyerRole] = @BuyerRole,
		[AnniversaryDate] = @AnniversaryDate,
		[CreditLimit] = @CreditLimit,
		[BidLimit] = @BidLimit,
		[ModifiedBy] = @ModifiedBy,
		[DateModified] = @DateModified,
		[TaxID] = @TaxID,
		[StoreID] = @StoreID
	WHERE
		[CustomerID] = @CustomerID
		AND [PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateCustomerWalletItem
	@ID INT = NULL,
	@CustomerID INT = NULL,
	@BillingName NVARCHAR(50) = NULL,
	@Address1 NVARCHAR(50) = NULL,
	@Address2 NVARCHAR(50) = NULL,
	@City NVARCHAR(50) = NULL,
	@State NVARCHAR(50) = NULL,
	@Zip VARCHAR(50) = NULL,
	@Country NVARCHAR(50) = NULL,
	@WalletName NVARCHAR(150) = NULL,
	@PayType VARCHAR(50) = NULL,
	@AcctNo VARCHAR(64) = NULL,
	@ExpRoute VARCHAR(50) = NULL,
	@DNNLogin VARCHAR(50) = NULL,
	@DNNRole NVARCHAR(50) = NULL,
	@PortalID INT = NULL
AS
BEGIN
	UPDATE
		{databaseOwner}{objectQualifier}RZC_CustomerWallet
	SET
		[CustomerID] = @CustomerID,
		[BillingName] = @BillingName,
		[Address1] = @Address1,
		[Address2] = @Address2,
		[City] = @City,
		[State] = @State,
		[Zip] = @Zip,
		[Country] = @Country,
		[WalletName] = @WalletName,
		[PayType] = @PayType,
		[AcctNo] = @AcctNo,
		[ExpRoute] = @ExpRoute,
		[DNNLogin] = @DNNLogin,
		[DNNRole] = @DNNRole,
		[PortalID] = @PortalID
	WHERE
		[ID] = @ID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateCustomShipMethod
	@ShipMethodID INT = NULL,
	@ShipMethodName NVARCHAR(50) = NULL,
	@ShipMethodAmount DECIMAL(18,2) = NULL,
	@Share BIT = NULL,
	@SortOrder INT = NULL,
	@PortalID INT = NULL,
	@SurchargePercentage DECIMAL(18,2) = NULL,
	@SurchargeAmount DECIMAL(18,2) = NULL,
	@RoleID INT = NULL,
	@StoreID INT = NULL
AS
BEGIN
	UPDATE
		{databaseOwner}{objectQualifier}RZC_ShipMethods
	SET
		[ShipMethodName] = @ShipMethodName,
		[ShipMethodAmount] = @ShipMethodAmount,
		[Share] = @Share,
		[SortOrder] = @SortOrder,
		[PortalID] = @PortalID,
		[SurchargePercentage] = @SurchargePercentage,
		[SurchargeAmount] = @SurchargeAmount,
		[RoleID] = @RoleID,
		[StoreID] = @StoreID
	WHERE
		[ShipMethodID] = @ShipMethodID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateEmailCampaign
	@EmailCampaignID INT = NULL,
	@Name NVARCHAR(128) = NULL,
	@Type NVARCHAR(32) = NULL,
	@EmailFrom NVARCHAR(256) = NULL,
	@Subject NVARCHAR(256) = NULL,
	@Template NTEXT = NULL,
	@Active BIT = NULL,
	@Interval SMALLINT = NULL,
	@Units NVARCHAR(10) = NULL,
	@CouponID INT = NULL,
	@EmailsSent INT = NULL,
	@LanguageLocale NVARCHAR(20) = NULL,
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	UPDATE
		{databaseOwner}{objectQualifier}RZC_EmailCampaign
	SET
		[Name] = @Name,
		[Type] = @Type,
		[EmailFrom] = @EmailFrom,
		[Subject] = @Subject,
		[Template] = @Template,
		[Active] = @Active,
		[Interval] = @Interval,
		[Units] = @Units,
		[CouponID] = @CouponID,
		[EmailsSent] = @EmailsSent,
		[LanguageLocale] = @LanguageLocale,
		[StoreID] = @StoreID,
		[PortalID] = @PortalID
	WHERE
		[EmailCampaignID] = @EmailCampaignID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateEmailTemplate
	@TemplateID INT = NULL,
	@Name NVARCHAR(50) = NULL,
	@Subject NVARCHAR(255) = NULL,
	@Template NTEXT = NULL,
	@PortalID INT = NULL,
	@LanguageLocale NVARCHAR(20) = NULL,
	@Type NVARCHAR(150) = NULL,
	@StoreID INT = NULL
AS
BEGIN
	UPDATE
		{databaseOwner}{objectQualifier}RZC_EmailTemplateSC
	SET
		[Name] = @Name,
		[Subject] = @Subject,
		[Template] = @Template,
		[PortalID] = @PortalID,
		[LanguageLocale] = @LanguageLocale,
		[Type] = @Type,
		[StoreID] = @StoreID
	WHERE
		[TemplateID] = @TemplateID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateFreeShipping
	@ID INT = NULL,
	@ZipCode VARCHAR(50) = NULL,
	@ShipMethodID INT = NULL,
	@CategoryID INT = NULL,
	@Country VARCHAR(50) = NULL,
	@PortalID INT = NULL,
	@StoreID INT = NULL
AS
BEGIN
	UPDATE
		{databaseOwner}{objectQualifier}RZC_ShipFree
	SET
		[ZipCode] = @ZipCode,
		[ShipMethodID] = @ShipMethodID,
		[CategoryID] = @CategoryID,
		[Country] = @Country,
		[PortalID] = @PortalID,
		[StoreID] = @StoreID
	WHERE
		[ID] = @ID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateInvoiceTemplate
	@TemplateID INT = NULL,
	@Name NVARCHAR(100) = NULL,
	@Template NTEXT = NULL,
	@PortalID INT = NULL,
	@LanguageLocale NVARCHAR(20) = NULL,
	@StoreID INT = NULL
AS
BEGIN
	UPDATE
		{databaseOwner}{objectQualifier}RZC_InvoiceTemplate
	SET
		[Name] = @Name,
		[Template] = @Template,
		[PortalID] = @PortalID,
		[LanguageLocale] = @LanguageLocale,
		[StoreID] = @StoreID
	WHERE
		[TemplateID] = @TemplateID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateManufacturer
	@ManufacturerID INT = NULL,
	@ManufacturerName NVARCHAR(50) = NULL,
	@PortalID INT = NULL,
	@FirstName NVARCHAR(50) = NULL,
	@LastName NVARCHAR(50) = NULL,
	@Address1 NVARCHAR(50) = NULL,
	@Address2 NVARCHAR(50) = NULL,
	@City NVARCHAR(50) = NULL,
	@State NVARCHAR(50) = NULL,
	@Country NVARCHAR(50) = NULL,
	@Zip VARCHAR(50) = NULL,
	@Phone VARCHAR(50) = NULL,
	@Fax VARCHAR(50) = NULL,
	@Email VARCHAR(50) = NULL,
	@IDNumber VARCHAR(50) = NULL,
	@ContactName NVARCHAR(75) = NULL,
	@Description NVARCHAR(100) = NULL,
	@Occupation NVARCHAR(50) = NULL,
	@Comments NTEXT = NULL,
	@AccountNumber VARCHAR(50) = NULL,
	@RoutingNumber VARCHAR(50) = NULL,
	@Share BIT = NULL,
	@StoreID INT = NULL
AS
BEGIN
	UPDATE
		{databaseOwner}{objectQualifier}RZC_Manufacturer
	SET
		[ManufacturerName] = @ManufacturerName,
		[PortalID] = @PortalID,
		[FirstName] = @FirstName,
		[LastName] = @LastName,
		[Address1] = @Address1,
		[Address2] = @Address2,
		[City] = @City,
		[State] = @State,
		[Country] = @Country,
		[Zip] = @Zip,
		[Phone] = @Phone,
		[Fax] = @Fax,
		[Email] = @Email,
		[IDNumber] = @IDNumber,
		[ContactName] = @ContactName,
		[Description] = @Description,
		[Occupation] = @Occupation,
		[Comments] = @Comments,
		[AccountNumber] = @AccountNumber,
		[RoutingNumber] = @RoutingNumber,
		[Share] = @Share,
		[StoreID] = @StoreID
	WHERE
		[ManufacturerID] = @ManufacturerID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateOrder
	@OrderID INT = NULL,
	@CustomerID INT = NULL,
	@OrderDate DATETIME = NULL,
	@ShippingTotal MONEY = NULL,
	@TaxTotal MONEY = NULL,
	@HandlingCharge MONEY = NULL,
	@ShipFirstName NVARCHAR(50) = NULL,
	@ShipLastName NVARCHAR(50) = NULL,
	@ShipAddress1 VARCHAR(200) = NULL,
	@ShipAddress2 VARCHAR(200) = NULL,
	@ShipCity VARCHAR(60) = NULL,
	@ShipState VARCHAR(60) = NULL,
	@ShipZipcode VARCHAR(25) = NULL,
	@ShipCountry VARCHAR(50) = NULL,
	@Status VARCHAR(20) = NULL,
	@ShipMethod NVARCHAR(50) = NULL,
	@AffiliateID VARCHAR(20) = NULL,
	@CouponID INT = NULL,
	@Discount MONEY = NULL,
	@MemberDiscount MONEY = NULL,
	@MemberRole NVARCHAR(50) = NULL,
	@TrackingNumber VARCHAR(50) = NULL,
	@PortalID INT = NULL,
	@Surcharge MONEY = NULL,
	@UDF1 VARCHAR(50) = NULL,
	@UDF2 VARCHAR(50) = NULL,
	@SpecialInstructions NVARCHAR(500) = NULL,
	@ShipDate DATETIME = NULL,
	@DeletedFlag BIT = NULL,
	@DNNProfileField NVARCHAR(150) = NULL,
	@ShipCarrier NVARCHAR(50) = NULL,
	@DNNUserID INT = NULL,
	@ResidentialStatus VARCHAR(100) = NULL,
	@IPAddress VARCHAR(50) = NULL,
	@ModifiedBy NVARCHAR(100) = NULL,
	@DateModified DATETIME = NULL,
	@AuctionID INT = NULL,
	@SubTotal MONEY = NULL,
	@GrandTotal MONEY = NULL,
	@RecalcTax BIT = NULL,
	@RecalcShipping BIT = NULL,
	@StoreID INT = NULL
AS
BEGIN
	UPDATE
		{databaseOwner}{objectQualifier}RZC_StoreOrders
	SET
		[CustomerID] = @CustomerID,
		[OrderDate] = @OrderDate,
		[ShippingTotal] = @ShippingTotal,
		[TaxTotal] = @TaxTotal,
		[HandlingCharge] = @HandlingCharge,
		[ShipFirstName] = @ShipFirstName,
		[ShipLastName] = @ShipLastName,
		[ShipAddress1] = @ShipAddress1,
		[ShipAddress2] = @ShipAddress2,
		[ShipCity] = @ShipCity,
		[ShipState] = @ShipState,
		[ShipZipcode] = @ShipZipcode,
		[ShipCountry] = @ShipCountry,
		[Status] = @Status,
		[ShipMethod] = @ShipMethod,
		[AffiliateID] = @AffiliateID,
		[CouponID] = @CouponID,
		[Discount] = @Discount,
		[MemberDiscount] = @MemberDiscount,
		[MemberRole] = @MemberRole,
		[TrackingNumber] = @TrackingNumber,
		[PortalID] = @PortalID,
		[Surcharge] = @Surcharge,
		[UDF1] = @UDF1,
		[UDF2] = @UDF2,
		[SpecialInstructions] = @SpecialInstructions,
		[ShipDate] = @ShipDate,
		[DeletedFlag] = @DeletedFlag,
		[DNNProfileField] = @DNNProfileField,
		[ShipCarrier] = @ShipCarrier,
		[DNNUserID] = @DNNUserID,
		[ResidentialStatus] = @ResidentialStatus,
		[IPAddress] = @IPAddress,
		[ModifiedBy] = @ModifiedBy,
		[DateModified] = @DateModified,
		[AuctionID] = @AuctionID,
		[SubTotal] = @SubTotal,
		[GrandTotal] = @GrandTotal,
		[RecalcTax] = @RecalcTax,
		[RecalcShipping] = @RecalcShipping,
		[StoreID] = @StoreID
	WHERE
		[OrderID] = @OrderID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateOrderDetail
	@OrderDetailID INT = NULL,
	@OrderID INT = NULL,
	@ProductID INT = NULL,
	@Quantity DECIMAL(10,2) = NULL,
	@UnitCost MONEY = 0,
	@ProductName NVARCHAR(1000) = NULL,
	@ProductSKU VARCHAR(50) = NULL,
	@Shipped BIT = NULL,
	@Returned BIT = NULL,
	@DateUpdated DATETIME = NULL,
	@PortalID INT = NULL,
	@OrderDetailGUID UNIQUEIDENTIFIER = NULL,
	@SerialNumber VARCHAR(70) = NULL,
	@WebServiceData VARCHAR(255) = NULL,
	@VendorID INT = NULL,
	@TaxRate FLOAT = NULL,
	@Commission MONEY = NULL,
	@StatusID INT = NULL,
	@QtyShipped DECIMAL(10,2) = NULL,
	@Weight DECIMAL(12,2) = NULL,
	@CartAddDate DATETIME = NULL,
	@OtherDetailFields NVARCHAR(MAX) = NULL
AS
BEGIN
	UPDATE
		{databaseOwner}{objectQualifier}RZC_StoreOrderDetails
	SET
		[OrderID] = @OrderID,
		[ProductID] = @ProductID,
		[Quantity] = @Quantity,
		[UnitCost] = @UnitCost,
		[ProductName] = @ProductName,
		[ProductSKU] = @ProductSKU,
		[Shipped] = @Shipped,
		[Returned] = @Returned,
		[DateUpdated] = @DateUpdated,
		[OrderDetailGUID] = @OrderDetailGUID,
		[SerialNumber] = @SerialNumber,
		[WebServiceData] = @WebServiceData,
		[VendorID] = @VendorID,
		[TaxRate] = @TaxRate,
		[Commission] = @Commission,
		[StatusID] = @StatusID,
		[QtyShipped] = @QtyShipped,
		[Weight] = @Weight,
		[CartAddDate] = @CartAddDate,
		[OtherDetailFields] = @OtherDetailFields
	WHERE
		[OrderDetailID] = @OrderDetailID
		AND [PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateOrderDetailVariant
	@DetailVariantID INT = NULL,
	@OrderDetailID INT = NULL,
	@VariantGroupID INT = NULL,
	@VariantGroup VARCHAR(50) = NULL,
	@VariantID INT = NULL,
	@VariantName VARCHAR(50) = NULL,
	@VariantHasText BIT = NULL,
	@VariantText VARCHAR(200) = NULL,
	@PriceCalculated MONEY = NULL
AS
BEGIN
	UPDATE
		{databaseOwner}{objectQualifier}RZC_StoreOrderDetailVariant
	SET
		[VariantGroupID] = @VariantGroupID,
		[VariantGroup] = @VariantGroup,
		[VariantID] = @VariantID,
		[VariantName] = @VariantName,
		[VariantHasText] = @VariantHasText,
		[VariantText] = @VariantText,
		[PriceCalculated] = @PriceCalculated
	WHERE
		[DetailVariantID] = @DetailVariantID
		AND [OrderDetailID] = @OrderDetailID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateOrderDiscount
	@OrderDiscountID INT = NULL,
	@RoleID INT = NULL,
	@DiscountPercent DECIMAL(6,2) = NULL,
	@DiscountAmount MONEY = NULL,
	@TextBox1Required BIT = NULL,
	@TextBox2Required BIT = NULL,
	@DateRequired BIT = NULL,
	@PortalID INT = NULL,
	@StoreID INT = NULL
AS
BEGIN
	UPDATE
		{databaseOwner}{objectQualifier}RZC_OrderDiscounts
	SET
		[RoleID] = @RoleID,
		[DiscountPercent] = @DiscountPercent,
		[DiscountAmount] = @DiscountAmount,
		[TextBox1Required] = @TextBox1Required,
		[TextBox2Required] = @TextBox2Required,
		[DateRequired] = @DateRequired,
		[PortalID] = @PortalID,
		[StoreID] = @StoreID
	WHERE
		[OrderDiscountID] = @OrderDiscountID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateOrderFulfillment
	@FulfillmentID INT = NULL,
	@OrderID INT = NULL,
	@ShipCarrier NVARCHAR(64) = NULL,
	@ShipMethod NVARCHAR(128) = NULL,
	@ShipDate DATETIME = NULL,
	@Width DECIMAL(12,2) = NULL,
	@Height DECIMAL(12,2) = NULL,
	@Length DECIMAL(12,2) = NULL,
	@Shipped BIT = NULL,
	@TrackingNumber NVARCHAR(128) = NULL
AS
BEGIN
	UPDATE
		{databaseOwner}{objectQualifier}RZC_OrderFulfillments
	SET
		[OrderID] = @OrderID,
		[ShipCarrier] = @ShipCarrier,
		[ShipMethod] = @ShipMethod,
		[ShipDate] = @ShipDate,
		[Width] = @Width,
		[Height] = @Height,
		[Length] = @Length,
		[Shipped] = @Shipped,
		[TrackingNumber] = @TrackingNumber
	WHERE
		[FulfillmentID] = @FulfillmentID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateOrderNote
	@ID INT = NULL,
	@OrderID INT = NULL,
	@Notes NVARCHAR(MAX) = NULL,
	@ModifiedBy NVARCHAR(100) = NULL,
	@DateModified DATETIME = NULL,
	@DateCreated DATETIME = NULL
AS
BEGIN
	UPDATE
		{databaseOwner}{objectQualifier}RZC_OrderNotes
	SET
		[OrderID] = @OrderID,
		[Notes] = @Notes,
		[ModifiedBy] = @ModifiedBy,
		[DateModified] = @DateModified,
		[DateCreated] = @DateCreated
	WHERE
		[ID] = @ID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdatePayment
	@PayHistID INT = NULL,
	@CustomerID INT = NULL,
	@PayType VARCHAR(50) = NULL,
	@PayDate DATETIME = NULL,
	@Amount MONEY = NULL,
	@Quantity INT = NULL,
	@AcctNo VARCHAR(64) = NULL,
	@ExpRoute VARCHAR(50) = NULL,
	@TransID VARCHAR(50) = NULL,
	@BillingAddress VARCHAR(50) = NULL,
	@BillingCity VARCHAR(50) = NULL,
	@BillingState VARCHAR(50) = NULL,
	@BillingZip VARCHAR(50) = NULL,
	@BillingCountry VARCHAR(50) = NULL,
	@Coupon VARCHAR(50) = NULL,
	@Notes VARCHAR(50) = NULL,
	@Status VARCHAR(50) = NULL,
	@AuthCode VARCHAR(50) = NULL,
	@BillingName VARCHAR(50) = NULL,
	@PortalID INT = NULL,
	@InvoiceNo VARCHAR(50) = NULL,
	@PONumber VARCHAR(50) = NULL,
	@Success BIT = NULL,
	@GiftCardID INT = NULL,
	@OrderID INT = NULL,
	@IPAddress VARCHAR(50) = NULL,
	@ModifiedBy NVARCHAR(100) = NULL,
	@DateModified DATETIME = NULL,
	@MaskAcctNo VARCHAR(50) = NULL,
	@TransType VARCHAR(50) = NULL,
	@ClearDate DATETIME = NULL,
	@AdminNotes NVARCHAR(MAX) = NULL,
	@OffsetID INT = NULL,
	@SubscriptionID INT = NULL,
	@PayMethodID INT = NULL,
	@StoreID INT = NULL
AS
BEGIN
	UPDATE
		{databaseOwner}{objectQualifier}RZC_PayHist
	SET
		[CustomerID] = @CustomerID,
		[PayType] = @PayType,
		[PayDate] = @PayDate,
		[Amount] = @Amount,
		[Quantity] = @Quantity,
		[AcctNo] = @AcctNo,
		[ExpRoute] = @ExpRoute,
		[TransID] = @TransID,
		[BillingAddress] = @BillingAddress,
		[BillingCity] = @BillingCity,
		[BillingState] = @BillingState,
		[BillingZip] = @BillingZip,
		[BillingCountry] = @BillingCountry,
		[Coupon] = @Coupon,
		[Notes] = @Notes,
		[Status] = @Status,
		[AuthCode] = @AuthCode,
		[BillingName] = @BillingName,
		[PortalID] = @PortalID,
		[InvoiceNo] = @InvoiceNo,
		[PONumber] = @PONumber,
		[Success] = @Success,
		[GiftCardID] = @GiftCardID,
		[OrderID] = @OrderID,
		[IPAddress] = @IPAddress,
		[ModifiedBy] = @ModifiedBy,
		[DateModified] = @DateModified,
		[MaskAcctNo] = @MaskAcctNo,
		[TransType] = @TransType,
		[ClearDate] = @ClearDate,
		[AdminNotes] = @AdminNotes,
		[OffsetID] = @OffsetID,
		[SubscriptionID] = @SubscriptionID,
		[PayMethodID] = @PayMethodID,
		[StoreID] = @StoreID
	WHERE
		[PayHistID] = @PayHistID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdatePaymentMethod
	@PayMethodID INT = NULL,
	@PayZoneID INT = NULL,
	@Name NVARCHAR(100) = NULL,
	@Roles VARCHAR(150) = NULL,
	@SurchargeAmount DECIMAL(18,2) = NULL,
	@SurchargePercentage DECIMAL(18,2) = NULL,
	@Step2Label1 NVARCHAR(200) = NULL,
	@Step2Label2 NVARCHAR(200) = NULL,
	@EmailMessage NVARCHAR(500) = NULL,
	@PortalID INT = NULL,
	@Type VARCHAR(150) = NULL,
	@SortOrder INT = NULL,
	@PriceFrom DECIMAL(18,2) = NULL,
	@PriceTo DECIMAL(18,2) = NULL,
	@MonthlyLimit DECIMAL(18,2) = NULL,
	@Active BIT = NULL,
	@DepositRequired BIT = NULL,
	@DepositPercent DECIMAL(18,2) = NULL,
	@Share BIT = NULL,
	@StoreID INT = NULL,
	@GatewayCode NVARCHAR(64) = NULL,
	@GatewayProvider NVARCHAR(64) = NULL,
	@GatewayUserID NVARCHAR(128) = NULL,
	@GatewayPassword NVARCHAR(128) = NULL,
	@GatewayKey NVARCHAR(512) = NULL
AS
BEGIN
	UPDATE
		{databaseOwner}{objectQualifier}RZC_PaymentMethods
	SET
		[PayZoneID] = @PayZoneID,
		[Name] = @Name,
		[Roles] = @Roles,
		[SurchargeAmount] = @SurchargeAmount,
		[SurchargePercentage] = @SurchargePercentage,
		[Step2Label1] = @Step2Label1,
		[Step2Label2] = @Step2Label2,
		[EmailMessage] = @EmailMessage,
		[PortalID] = @PortalID,
		[Type] = @Type,
		[SortOrder] = @SortOrder,
		[PriceFrom] = @PriceFrom,
		[PriceTo] = @PriceTo,
		[MonthlyLimit] = @MonthlyLimit,
		[Active] = @Active,
		[DepositRequired] = @DepositRequired,
		[DepositPercent] = @DepositPercent,
		[Share] = @Share,
		[StoreID] = @StoreID,
		[GatewayCode] = @GatewayCode,
		[GatewayProvider] = @GatewayProvider,
		[GatewayUserID] = @GatewayUserID,
		[GatewayPassword] = @GatewayPassword,
		[GatewayKey] = @GatewayKey
	WHERE
		[PayMethodID] = @PayMethodID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdatePriceClass
	@PriceClassID INT = NULL,
	@PriceClass VARCHAR(20) = NULL,
	@QtyFrom INT = NULL,
	@QtyTo INT = NULL,
	@Price MONEY = NULL,
	@PortalID INT = NULL,
	@DiscountPercent DECIMAL(10,2) = NULL,
	@AdjustType VARCHAR(50) = NULL,
	@Description VARCHAR(200) = NULL,
	@StoreID INT = NULL
AS
BEGIN
	UPDATE
		{databaseOwner}{objectQualifier}RZC_PriceClass
	SET
		[PriceClass] = @PriceClass,
		[QtyFrom] = @QtyFrom,
		[QtyTo] = @QtyTo,
		[Price] = @Price,
		[PortalID] = @PortalID,
		[DiscountPercent] = @DiscountPercent,
		[AdjustType] = @AdjustType,
		[Description] = @Description,
		[StoreID] = @StoreID
	WHERE
		[PriceClassID] = @PriceClassID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateProduct
	@ProductID INT = NULL,
	@Manufacturer NVARCHAR(50) = NULL,
	@ModelNumber NVARCHAR(50) = NULL,
	@ModelName NVARCHAR(200) = NULL,
	@UnitCost MONEY = NULL,
	@QuantityOnHand INT = NULL,
	@Summary NVARCHAR(1000) = NULL,
	@Description NTEXT = NULL,
	@DownloadUrl NVARCHAR(1000) = NULL,
	@Featured BIT = NULL,
	@Archived BIT = NULL,
	@Weight DECIMAL(12,2) = NULL,
	@SortOrder INT = NULL,
	@ExcludeCoupon BIT = NULL,
	@Items INT = NULL,
	@Share BIT = NULL,
	@CreatedByUser NVARCHAR(100) = NULL,
	@CreatedDate DATETIME = NULL,
	@LogicallyDeleted BIT = NULL,
	@Recurring BIT = NULL,
	@SubscriptionInterval VARCHAR(50) = NULL,
	@RecurringOccurances INT = NULL,
	@UrlGUID VARCHAR(1000) = NULL,
	@EncryptUrl BIT = NULL,
	@AddDNNRole VARCHAR(50) = NULL,
	@RequireLogin BIT = NULL,
	@MasterBundleID INT = NULL,
	@BundleID INT = NULL,
	@RoleExpireDays NVARCHAR(500) = NULL,
	@MemberPrice MONEY = NULL,
	@TaxExempt BIT = NULL,
	@PortalID INT = NULL,
	@ShipCodes VARCHAR(100) = NULL,
	@ShipText NVARCHAR(500) = NULL,
	@AffiliateURL NVARCHAR(1000) = NULL,
	@TitleTag VARCHAR(85) = NULL,
	@DescriptionTag NVARCHAR(200) = NULL,
	@KeywordTag NVARCHAR(300) = NULL,
	@ShipCost MONEY = NULL,
	@RequireCoupon BIT = NULL,
	@Description2 NTEXT = NULL,
	@Description3 NTEXT = NULL,
	@Description4 NTEXT = NULL,
	@Description5 NTEXT = NULL,
	@TabName1 VARCHAR(50) = NULL,
	@TabName2 VARCHAR(50) = NULL,
	@TabName3 VARCHAR(50) = NULL,
	@TabName4 VARCHAR(50) = NULL,
	@TabName5 VARCHAR(50) = NULL,
	@AutoGUID BIT = NULL,
	@SEOURL VARCHAR(80) = NULL,
	@HideThumbnail BIT = NULL,
	@HidePrice BIT = NULL,
	@PriceClass VARCHAR(20) = NULL,
	@MinOrderQty INT = NULL,
	@ChargeHandling BIT = NULL,
	@LeadTime VARCHAR(50) = NULL,
	@HideQuantity BIT = NULL,
	@PriceUnits NVARCHAR(50) = NULL,
	@MaxOrderQty INT = NULL,
	@Width INT = NULL,
	@Height INT = NULL,
	@Length INT = NULL,
	@RecurringStartDate VARCHAR(15) = NULL,
	@ExcludeVariantRecur BIT = NULL,
	@WholesalePrice MONEY = NULL,
	@SalePrice MONEY = NULL,
	@HideProduct BIT = NULL,
	@RemoveDNNRole VARCHAR(70) = NULL,
	@ShowProductRole BIT = NULL,
	@TaxRate FLOAT = NULL,
	@Upsell BIT = NULL,
	@EnableTrial BIT = NULL,
	@TrialInterval VARCHAR(50) = NULL,
	@TrialOccurences VARCHAR(50) = NULL,
	@TrialAmount MONEY = NULL,
	@UseCompanyLogo BIT = NULL,
	@UserEnteredAmount BIT = NULL,
	@Booking BIT = NULL,
	@BookingUnits NVARCHAR(100) = NULL,
	@RecurStartDateSetup VARCHAR(50) = NULL,
	@UpdatedDate DATETIME = NULL,
	@ProductDetailUrl NVARCHAR(1000) = NULL,
	@GiftCard BIT = NULL,
	@TaxableAmount MONEY = NULL,
	@SaleStartDate DATETIME = NULL,
	@SaleEndDate DATETIME = NULL,
	@CompareGroup NVARCHAR(150) = NULL,
	@ProductTypeID INT = NULL,
	@MaxDownloadAttempts INT = NULL,
	@MaxDownloadDays INT = NULL,
	@ActiveFrom DATETIME = NULL,
	@ActiveTo DATETIME = NULL,
	@StoreID INT = NULL
AS
BEGIN
	UPDATE
		{databaseOwner}{objectQualifier}RZC_Products
	SET
		[Manufacturer] = @Manufacturer,
		[ModelNumber] = @ModelNumber,
		[ModelName] = @ModelName,
		[UnitCost] = @UnitCost,
		[QuantityOnHand] = @QuantityOnHand,
		[Summary] = @Summary,
		[Description] = @Description,
		[DownloadUrl] = @DownloadUrl,
		[Featured] = @Featured,
		[Archived] = @Archived,
		[Weight] = @Weight,
		[SortOrder] = @SortOrder,
		[ExcludeCoupon] = @ExcludeCoupon,
		[Items] = @Items,
		[Share] = @Share,
		[CreatedByUser] = @CreatedByUser,
		[CreatedDate] = @CreatedDate,
		[LogicallyDeleted] = @LogicallyDeleted,
		[Recurring] = @Recurring,
		[SubscriptionInterval] = @SubscriptionInterval,
		[RecurringOccurances] = @RecurringOccurances,
		[UrlGUID] = @UrlGUID,
		[EncryptUrl] = @EncryptUrl,
		[AddDNNRole] = @AddDNNRole,
		[RequireLogin] = @RequireLogin,
		[MasterBundleID] = @MasterBundleID,
		[BundleID] = @BundleID,
		[RoleExpireDays] = @RoleExpireDays,
		[MemberPrice] = @MemberPrice,
		[TaxExempt] = @TaxExempt,
		[PortalID] = @PortalID,
		[ShipCodes] = @ShipCodes,
		[ShipText] = @ShipText,
		[AffiliateURL] = @AffiliateURL,
		[TitleTag] = @TitleTag,
		[DescriptionTag] = @DescriptionTag,
		[KeywordTag] = @KeywordTag,
		[ShipCost] = @ShipCost,
		[RequireCoupon] = @RequireCoupon,
		[Description2] = @Description2,
		[Description3] = @Description3,
		[Description4] = @Description4,
		[Description5] = @Description5,
		[TabName1] = @TabName1,
		[TabName2] = @TabName2,
		[TabName3] = @TabName3,
		[TabName4] = @TabName4,
		[TabName5] = @TabName5,
		[AutoGUID] = @AutoGUID,
		[SEOURL] = @SEOURL,
		[HideThumbnail] = @HideThumbnail,
		[HidePrice] = @HidePrice,
		[PriceClass] = @PriceClass,
		[MinOrderQty] = @MinOrderQty,
		[ChargeHandling] = @ChargeHandling,
		[LeadTime] = @LeadTime,
		[HideQuantity] = @HideQuantity,
		[PriceUnits] = @PriceUnits,
		[MaxOrderQty] = @MaxOrderQty,
		[Width] = @Width,
		[Height] = @Height,
		[Length] = @Length,
		[RecurringStartDate] = @RecurringStartDate,
		[ExcludeVariantRecur] = @ExcludeVariantRecur,
		[WholesalePrice] = @WholesalePrice,
		[SalePrice] = @SalePrice,
		[HideProduct] = @HideProduct,
		[RemoveDNNRole] = @RemoveDNNRole,
		[ShowProductRole] = @ShowProductRole,
		[TaxRate] = @TaxRate,
		[Upsell] = @Upsell,
		[EnableTrial] = @EnableTrial,
		[TrialInterval] = @TrialInterval,
		[TrialOccurences] = @TrialOccurences,
		[TrialAmount] = @TrialAmount,
		[UseCompanyLogo] = @UseCompanyLogo,
		[UserEnteredAmount] = @UserEnteredAmount,
		[Booking] = @Booking,
		[BookingUnits] = @BookingUnits,
		[RecurStartDateSetup] = @RecurStartDateSetup,
		[UpdatedDate] = @UpdatedDate,
		[ProductDetailUrl] = @ProductDetailUrl,
		[GiftCard] = @GiftCard,
		[TaxableAmount] = @TaxableAmount,
		[SaleStartDate] = @SaleStartDate,
		[SaleEndDate] = @SaleEndDate,
		[CompareGroup] = @CompareGroup,
		[ProductTypeID] = @ProductTypeID,
		[MaxDownloadAttempts] = @MaxDownloadAttempts,
		[MaxDownloadDays] = @MaxDownloadDays,
		[ActiveFrom] = @ActiveFrom,
		[ActiveTo] = @ActiveTo,
		[StoreID] = @StoreID
	WHERE
		[ProductID] = @ProductID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateProductCustomField
	@PCID INT = NULL,
	@ProductID INT = NULL,
	@Label NVARCHAR(150) = NULL,
	@Type VARCHAR(50) = NULL,
	@Value NVARCHAR(500) = NULL,
	@CustomFieldValue NVARCHAR(1024) = NULL,
	@TabName VARCHAR(50) = NULL,
	@SortOrder INT = NULL,
	@Share BIT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	UPDATE
		{databaseOwner}{objectQualifier}RZC_ProductCustomFields
	SET
		[ProductID] = @ProductID,
		[Label] = @Label,
		[Type] = @Type,
		[Value] = @Value,
		[CustomFieldValue] = @CustomFieldValue,
		[TabName] = @TabName,
		[SortOrder] = @SortOrder,
		[Share] = @Share,
		[PortalID] = @PortalID
	WHERE
		[PCID] = @PCID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateProductII
	@ProductID INT = NULL,
	@ShowOrderAsIs BIT = NULL,
	@Ecard BIT = NULL,
	@BinLocation NVARCHAR(150) = NULL,
	@NumberOfBoxes NVARCHAR(50) = NULL,
	@DateAddedToInventory DATETIME = NULL,
	@Client NVARCHAR(200) = NULL,
	@Owner NVARCHAR(200) = NULL,
	@ShowDatePicker BIT = NULL,
	@ShowTimePicker BIT = NULL,
	@ProductFlags BIGINT = NULL,
	@SafetyStockQty INT = NULL,
	@MinPartialAmount DECIMAL(18,2) = NULL,
	@BookingFields VARCHAR(50) = NULL,
	@BookingDuration VARCHAR(50) = NULL,
	@FirstBookingDate INT = NULL,
	@MinBookingDuration INT = NULL,
	@MaxBookingDuration INT = NULL,
	@MinBookingTimeDuration INT = NULL,
	@MaxBookingTimeDuration INT = NULL,
	@CustomModalTabID INT = NULL,
	@AddRolesEffectiveInCart BIT = NULL,
	@RemoveRolesEffectiveInCart BIT = NULL
AS
BEGIN
	UPDATE
		{databaseOwner}{objectQualifier}RZC_Products2
	SET
		[ShowOrderAsIs] = @ShowOrderAsIs,
		[Ecard] = @Ecard,
		[BinLocation] = @BinLocation,
		[NumberOfBoxes] = @NumberOfBoxes,
		[DateAddedToInventory] = @DateAddedToInventory,
		[Client] = @Client,
		[Owner] = @Owner,
		[ShowDatePicker] = @ShowDatePicker,
		[ShowTimePicker] = @ShowTimePicker,
		[ProductFlags] = @ProductFlags,
		[SafetyStockQty] = @SafetyStockQty,
		[MinPartialAmount] = @MinPartialAmount,
		[BookingFields] = @BookingFields,
		[BookingDuration] = @BookingDuration,
		[FirstBookingDate] = @FirstBookingDate,
		[MinBookingDuration] = @MinBookingDuration,
		[MaxBookingDuration] = @MaxBookingDuration,
		[MinBookingTimeDuration] = @MinBookingTimeDuration,
		[MaxBookingTimeDuration] = @MaxBookingTimeDuration,
		[CustomModalTabID] = @CustomModalTabID,
		[AddRolesEffectiveInCart] = @AddRolesEffectiveInCart,
		[RemoveRolesEffectiveInCart] = @RemoveRolesEffectiveInCart
	WHERE
		[ProductID] = @ProductID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateProductImage
	@ID INT = NULL,
	@SortOrder INT = NULL,
	@ThumbImage NVARCHAR(500) = NULL,
	@LargeImage NVARCHAR(500) = NULL,
	@ZoomImage NVARCHAR(500) = NULL,
	@Title NVARCHAR(100) = NULL,
	@AltTag NVARCHAR(200) = NULL,
	@Status SMALLINT = NULL,
	@ModifiedByUser NVARCHAR(100) = NULL
AS
BEGIN
	UPDATE
		{databaseOwner}{objectQualifier}RZC_ProductImages
	SET
		[SortOrder] = @SortOrder,
		[ThumbImage] = @ThumbImage,
		[LargeImage] = @LargeImage,
		[ZoomImage] = @ZoomImage,
		[Title] = @Title,
		[AltTag] = @AltTag,
		[Status] = @Status,
		[ModifiedDate] = GETDATE(),
		[ModifiedByUser] = @ModifiedByUser
	WHERE
		[ID] = @ID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateProductInventory
	@VariantInventoryID INT = NULL,
	@ProductID INT = NULL,
	@VariantName VARCHAR(500) = NULL,
	@Sku VARCHAR(50) = NULL,
	@QtyOnHand INT = NULL
AS
BEGIN
	UPDATE
		{databaseOwner}{objectQualifier}RZC_ProductVariantInventory
	SET
		[ProductID] = @ProductID,
		[VariantName] = @VariantName,
		[Sku] = @Sku,
		[QtyOnHand] = @QtyOnHand
	WHERE
		[VariantInventoryID] = @VariantInventoryID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateProductQuantityDiscount
	@QtyDiscountID INT = NULL,
	@ProductID INT = NULL,
	@QtyFrom INT = NULL,
	@QtyTo INT = NULL,
	@Price MONEY = NULL,
	@AdjustType VARCHAR(50) = NULL,
	@RoleID INT = NULL,
	@PaymentMethod VARCHAR(100) = NULL,
	@DisplayLabel NVARCHAR(50) = NULL,
	@DiscountLevel VARCHAR(512) = NULL,
	@PortalID INT = NULL
AS
BEGIN
	UPDATE
		{databaseOwner}{objectQualifier}RZC_ProductQtyDiscounts
	SET
		[ProductID] = @ProductID,
		[QtyFrom] = @QtyFrom,
		[QtyTo] = @QtyTo,
		[Price] = @Price,
		[AdjustType] = @AdjustType,
		[RoleID] = @RoleID,
		[PaymentMethod] = @PaymentMethod,
		[DisplayLabel] = @DisplayLabel,
		[DiscountLevel] = @DiscountLevel,
		[PortalID] = @PortalID
	WHERE
		[QtyDiscountID] = @QtyDiscountID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateProductReview
	@ReviewID INT = NULL,
	@ProductID INT = NULL,
	@DNNUserName VARCHAR(50) = NULL,
	@Rate DECIMAL(4,2) = NULL,
	@Comments VARCHAR(2000) = NULL,
	@NickName VARCHAR(50) = NULL,
	@ReviewDate DATETIME = NULL,
	@Approved SMALLINT = NULL,
	@DateApproved DATETIME = NULL
AS
BEGIN
	UPDATE
		{databaseOwner}{objectQualifier}RZC_ProductReviews
	SET
		[ProductID] = @ProductID,
		[DNNUserName] = @DNNUserName,
		[Rate] = @Rate,
		[Comments] = @Comments,
		[NickName] = @NickName,
		[ReviewDate] = @ReviewDate,
		[Approved] = @Approved,
		[DateApproved] = @DateApproved
	WHERE
		[ReviewID] = @ReviewID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateProductRoleDiscount
	@DiscountID INT = NULL,
	@ProductID INT = NULL,
	@RoleID INT = NULL,
	@DiscountPercent DECIMAL(6,2) = NULL,
	@DiscountAmount MONEY = NULL,
	@DiscountLevel VARCHAR(512) = NULL,
	@UserName NVARCHAR(100) = NULL,
	@StartDate DATETIME = NULL,
	@EndDate DATETIME = NULL,
	@InvertRole BIT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	UPDATE
		{databaseOwner}{objectQualifier}RZC_ProductDiscountsByRole
	SET
		[ProductID] = @ProductID,
		[RoleID] = @RoleID,
		[DiscountPercent] = @DiscountPercent,
		[DiscountAmount] = @DiscountAmount,
		[DiscountLevel] = @DiscountLevel,
		[UserName] = @UserName,
		[StartDate] = @StartDate,
		[EndDate] = @EndDate,
		[InvertRole] = @InvertRole,
		[PortalID] = @PortalID
	WHERE
		[DiscountID] = @DiscountID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateProductSearchKey
	@iIndex INT = NULL,
	@ProductID INT = NULL,
	@SearchTerm NVARCHAR(250) = NULL,
	@SearchModuleDD1 NVARCHAR(500) = NULL,
	@SearchModuleDD2 NVARCHAR(500) = NULL
AS
BEGIN
	UPDATE
		{databaseOwner}{objectQualifier}RZC_SearchKeys
	SET
		[ProductID] = @ProductID,
		[SearchTerm] = @SearchTerm,
		[SearchModuleDD1] = @SearchModuleDD1,
		[SearchModuleDD2] = @SearchModuleDD2
	WHERE
		[iIndex] = @iIndex
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateProductStock
	@ProductID INT = NULL,
	@OrderQuantity  INT = NULL
AS
BEGIN
	UPDATE
		{databaseOwner}{objectQualifier}RZC_Products
	SET
		[QuantityOnHand] += @OrderQuantity
	WHERE
		[ProductID] = @ProductID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateProductTemplateField
	@PTID INT = NULL,
	@Label NVARCHAR(256) = NULL,
	@Type VARCHAR(50) = NULL,
	@Value NVARCHAR(2048) = NULL,
	@SortOrder INT = NULL,
	@Share BIT = NULL,
	@PortalID INT = NULL,
	@CategoryID INT = NULL,
	@StoreID INT = NULL
AS
BEGIN
	UPDATE
		{databaseOwner}{objectQualifier}RZC_ProductTemplate
	SET
		[Label] = @Label,
		[Type] = @Type,
		[Value] = @Value,
		[SortOrder] = @SortOrder,
		[Share] = @Share,
		[PortalID] = @PortalID,
		[CategoryID] = @CategoryID,
		[StoreID] = @StoreID
	WHERE
		[PTID] = @PTID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateProductVariant
	@VariantID INT = NULL,
	@ProductID INT = NULL,
	@VariantGroup VARCHAR(50) = NULL,
	@VariantName VARCHAR(50) = NULL,
	@VariantImage NVARCHAR(500) = NULL,
	@PriceAdjustment MONEY = NULL,
	@WeightAdjustment FLOAT = NULL,
	@SortOrder INT = NULL,
	@PortalID INT = NULL,
	@VariantRequired BIT = NULL,
	@VariantDisplayType VARCHAR(50) = NULL,
	@VariantGroupID INT = NULL,
	@Sku VARCHAR(50) = NULL,
	@QtyOnHand INT = NULL,
	@ConditionalGroupID INT = NULL,
	@VariantZoomImage NVARCHAR(200) = NULL,
	@VariantIconImage NVARCHAR(200) = NULL,
	@DropDownImageOption VARCHAR(50) = NULL,
	@IconImageOption VARCHAR(50) = NULL,
	@RenderTextInImage BIT = NULL,
	@LifecycleStatus VARCHAR(50) = NULL,
	@EnablePriceAdjustment BIT = NULL,
	@SalePrice MONEY = NULL,
	@Notes NVARCHAR(500) = NULL,
	@FeaturedVariant BIT = NULL,
	@TaxableAmount MONEY = NULL,
	@PriceType VARCHAR(50) = NULL,
	@VariantDesc VARCHAR(2048) = NULL
AS
BEGIN
	UPDATE
		{databaseOwner}{objectQualifier}RZC_ProductVariant
	SET
		[ProductID] = @ProductID,
		[VariantGroup] = @VariantGroup,
		[VariantName] = @VariantName,
		[VariantImage] = @VariantImage,
		[PriceAdjustment] = @PriceAdjustment,
		[WeightAdjustment] = @WeightAdjustment,
		[SortOrder] = @SortOrder,
		[PortalID] = @PortalID,
		[VariantRequired] = @VariantRequired,
		[VariantDisplayType] = @VariantDisplayType,
		[VariantGroupID] = @VariantGroupID,
		[Sku] = @Sku,
		[QtyOnHand] = @QtyOnHand,
		[ConditionalGroupID] = @ConditionalGroupID,
		[VariantZoomImage] = @VariantZoomImage,
		[VariantIconImage] = @VariantIconImage,
		[DropDownImageOption] = @DropDownImageOption,
		[IconImageOption] = @IconImageOption,
		[RenderTextInImage] = @RenderTextInImage,
		[LifecycleStatus] = @LifecycleStatus,
		[EnablePriceAdjustment] = @EnablePriceAdjustment,
		[SalePrice] = @SalePrice,
		[Notes] = @Notes,
		[FeaturedVariant] = @FeaturedVariant,
		[TaxableAmount] = @TaxableAmount,
		[PriceType] = @PriceType,
		[VariantDesc] = @VariantDesc
	WHERE
		[VariantID] = @VariantID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateProductVariantGroup
	@VariantGroupID INT = NULL,
	@ProductID INT = NULL,
	@VariantGroup VARCHAR(50) = NULL,
	@VariantHelpURL VARCHAR(150) = NULL,
	@PortalID INT = NULL,
	@Hide BIT = NULL,
	@GroupDescription NVARCHAR(2048) = NULL,
	@SortOrder INT = NULL
AS
BEGIN
	UPDATE
		{databaseOwner}{objectQualifier}RZC_ProductVariantGroup
	SET
		[ProductID] = @ProductID,
		[VariantGroup] = @VariantGroup,
		[VariantHelpURL] = @VariantHelpURL,
		[PortalID] = @PortalID,
		[Hide] = @Hide,
		[GroupDescription] = @GroupDescription,
		[SortOrder] = @SortOrder
	WHERE
		[VariantGroupID] = @VariantGroupID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateRegionalTax
	@TaxStateId INT = NULL,
	@StateText VARCHAR(200) = NULL,
	@State VARCHAR(50) = NULL,
	@CountryCode VARCHAR(50) = NULL,
	@PortalID INT = NULL,
	@ZipCode VARCHAR(50) = NULL,
	@TaxExemptAmount DECIMAL(18,2) = NULL,
	@StoreID INT = NULL
AS
BEGIN
	UPDATE
		{databaseOwner}{objectQualifier}RZC_TaxStates
	SET
		[StateText] = @StateText,
		[State] = @State,
		[CountryCode] = @CountryCode,
		[PortalID] = @PortalID,
		[ZipCode] = @ZipCode,
		[TaxExemptAmount] = @TaxExemptAmount,
		[StoreID] = @StoreID
	WHERE
		[TaxStateId] = @TaxStateId
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateSavedShoppingCart
	@CartID INT = NULL,
	@Description VARCHAR(150) = NULL,
	@ShippingTotal MONEY = NULL,
	@HandlingCharge MONEY = NULL,
	@TaxTotal MONEY = NULL,
	@Discount MONEY = NULL,
	@PortalID INT = NULL,
	@StoreID INT = NULL
AS
BEGIN
	UPDATE
		{databaseOwner}{objectQualifier}RZC_SavedCart
	SET
		[Description] = @Description,
		[HandlingCharge] = @HandlingCharge,
		[TaxTotal] = @TaxTotal,
		[Discount] = @Discount
	WHERE
		[CartID] = @CartID
		AND [PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateShippingAmountCost
	@ShipCostID INT = NULL,
	@AmountFrom DECIMAL(18,2) = NULL,
	@AmountTo DECIMAL(18,2) = NULL,
	@Price MONEY = NULL,
	@PortalID INT = NULL,
	@ShipMethodID INT = NULL,
	@CategoryID INT = NULL,
	@IsIntl BIT = NULL,
	@StoreID INT = NULL
AS
BEGIN
	UPDATE
		{databaseOwner}{objectQualifier}RZC_ShippingByAmount
	SET
		[AmountFrom] = @AmountFrom,
		[AmountTo] = @AmountTo,
		[Price] = @Price,
		[PortalID] = @PortalID,
		[ShipMethodID] = @ShipMethodID,
		[CategoryID] = @CategoryID,
		[IsIntl] = @IsIntl,
		[StoreID] = @StoreID
	WHERE
		[ShipCostID] = @ShipCostID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateShippingPostalCost
	@ShipCostID INT = NULL,
	@ZipCode VARCHAR(50) = NULL,
	@Price MONEY = NULL,
	@PortalID INT = NULL,
	@ShipMethodID INT = NULL,
	@CategoryID INT = NULL,
	@Country VARCHAR(50) = NULL,
	@StoreID INT = NULL
AS
BEGIN
	UPDATE
		{databaseOwner}{objectQualifier}RZC_ShippingByZipCode
	SET
		[ZipCode] = @ZipCode,
		[Price] = @Price,
		[PortalID] = @PortalID,
		[ShipMethodID] = @ShipMethodID,
		[CategoryID] = @CategoryID,
		[Country] = @Country,
		[StoreID] = @StoreID
	WHERE
		[ShipCostID] = @ShipCostID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateShippingQuantityCost
	@ShipCostID INT = NULL,
	@QuantityFrom INT = NULL,
	@QuantityTo INT = NULL,
	@Price MONEY = NULL,
	@PortalID INT = NULL,
	@ShipMethodID INT = NULL,
	@CategoryID INT = NULL,
	@ZoneID INT = NULL,
	@ZoneName VARCHAR(200) = NULL,
	@StoreID INT = NULL
AS
BEGIN
	UPDATE
		{databaseOwner}{objectQualifier}RZC_ShippingByQuantity
	SET
		[QuantityFrom] = @QuantityFrom,
		[QuantityTo] = @QuantityTo,
		[Price] = @Price,
		[PortalID] = @PortalID,
		[ShipMethodID] = @ShipMethodID,
		[CategoryID] = @CategoryID,
		[ZoneID] = @ZoneID,
		[ZoneName] = @ZoneName,
		[StoreID] = @StoreID
	WHERE
		[ShipCostID] = @ShipCostID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateShippingWeightCost
	@ShipCostID INT = NULL,
	@WeightFrom DECIMAL(18,2) = NULL,
	@WeightTo DECIMAL(18,2) = NULL,
	@Price MONEY = NULL,
	@PortalID INT = NULL,
	@ShipMethodID INT = NULL,
	@CategoryID INT = NULL,
	@ZoneID INT = NULL,
	@ZoneName VARCHAR(200) = NULL,
	@StoreID INT = NULL
AS
BEGIN
	UPDATE
		{databaseOwner}{objectQualifier}RZC_ShippingByWeight
	SET
		[WeightFrom] = @WeightFrom,
		[WeightTo] = @WeightTo,
		[Price] = @Price,
		[PortalID] = @PortalID,
		[ShipMethodID] = @ShipMethodID,
		[CategoryID] = @CategoryID,
		[ZoneID] = @ZoneID,
		[ZoneName] = @ZoneName,
		[StoreID] = @StoreID
	WHERE
		[ShipCostID] = @ShipCostID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateShippingZone
	@ZoneID INT = NULL,
	@ZoneName NVARCHAR(512) = NULL,
	@Country VARCHAR(1024) = NULL,
	@State VARCHAR(MAX) = NULL,
	@Codes NVARCHAR(MAX) = NULL,
	@Price DECIMAL(18,2) = NULL,
	@PortalID INT = NULL,
	@FreeShipOverAmount DECIMAL(18,2) = NULL,
	@StoreID INT = NULL
AS
BEGIN
	UPDATE
		{databaseOwner}{objectQualifier}RZC_ShipZone
	SET
		[ZoneName] = @ZoneName,
		[Country] = @Country,
		[State] = @State,
		[Codes] = @Codes,
		[Price] = @Price,
		[PortalID] = @PortalID,
		[FreeShipOverAmount] = @FreeShipOverAmount,
		[StoreID] = @StoreID
	WHERE
		[ZoneID] = @ZoneID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateShoppingCartEmail
	@Persistent VARCHAR(16) = NULL,
	@CartCookie VARCHAR(100) = NULL,
	@DNNLogin NVARCHAR(100) = NULL,
	@Email NVARCHAR(256) = NULL,
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	UPDATE
		{databaseOwner}{objectQualifier}RZC_ShoppingCart
	SET
		[Email] = @Email
	WHERE
		([CartCookie] = @CartCookie OR (@Persistent <> 'Machine' AND @DNNLogin <> ''))
		AND ([DNNLogin] = @DNNLogin OR @Persistent <> 'User')
		AND [StoreID] = @StoreID
		AND [PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateShoppingCartItem
	@Persistent VARCHAR(16) = NULL,
	@CartCookie VARCHAR(100) = NULL,
	@DNNLogin NVARCHAR(100) = NULL,
	@CartID INT = NULL,
	@Quantity DECIMAL(10,2) = NULL,
	@UnitCost MONEY = NULL,
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	UPDATE
		{databaseOwner}{objectQualifier}RZC_ShoppingCart
	SET
		[Quantity] = @Quantity,
		[UnitCost] = @UnitCost
	WHERE
		([CartCookie] = @CartCookie OR (@Persistent <> 'Machine' AND @DNNLogin <> ''))
		AND ([DNNLogin] = @DNNLogin OR @Persistent <> 'User')
		AND [CartID] = @CartID
		AND [StoreID] = @StoreID
		AND [PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateShoppingCartVariant
	@CartVariantID INT = NULL,
	@CartID INT = NULL,
	@VariantGroupID INT = NULL,
	@VariantGroup VARCHAR(50) = NULL,
	@VariantID INT = NULL,
	@VariantName VARCHAR(50) = NULL,
	@VariantHasText BIT = NULL,
	@VariantText VARCHAR(200) = NULL,
	@PriceCalculated MONEY = NULL
AS
BEGIN
	UPDATE
		{databaseOwner}{objectQualifier}RZC_ShoppingCartVariant
	SET
		[VariantGroupID] = @VariantGroupID,
		[VariantGroup] = @VariantGroup,
		[VariantID] = @VariantID,
		[VariantName] = @VariantName,
		[VariantHasText] = @VariantHasText,
		[VariantText] = @VariantText,
		[PriceCalculated] = @PriceCalculated
	WHERE
		[CartVariantID] = @CartVariantID
		AND [CartID] = @CartID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateStore
	@StoreName NVARCHAR(150) = NULL,
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	UPDATE
		{databaseOwner}{objectQualifier}RZC_Stores
	SET
		[StoreName] = @StoreName
	WHERE
		[StoreID] = @StoreID
		AND [PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateStorePermission
	@ID INT = NULL,
	@RoleID INT = NULL,
	@Access NVARCHAR(64) = NULL,
	@Section NVARCHAR(64) = NULL,
	@ModifiedBy INT = NULL,
	@StoreID INT = NULL,
	@PortalID INT = NULL
AS
BEGIN
	UPDATE
		{databaseOwner}{objectQualifier}RZC_StorePermissions
	SET
		[RoleID] = @RoleID,
		[Access] = @Access,
		[Section] = @Section,
		[ModifiedBy] = @ModifiedBy,
		[DateModified] = GETDATE()
	WHERE
		[ID] = @ID
		AND [StoreID] = @StoreID
		AND [PortalID] = @PortalID
END
GO
-------------------------------------------------------------------------------------------------------------------------------------
CREATE PROCEDURE {databaseOwner}{objectQualifier}RZC_UpdateSubscription
	@SubscriptionID INT = NULL,
	@CustomerID INT = NULL,
	@ProductID INT = NULL,
	@CreateDate DATETIME = NULL,
	@CancelDate DATETIME = NULL,
	@SubStartDate DATETIME = NULL,
	@SubEndDate DATETIME = NULL,
	@TransID VARCHAR(50) = NULL,
	@PortalID INT = NULL,
	@IPAddress VARCHAR(50) = NULL,
	@CreatedBy NVARCHAR(100) = NULL,
	@ModifiedBy NVARCHAR(100) = NULL,
	@DateModified DATETIME = NULL,
	@OrderID INT = NULL,
	@OrderDetailID INT = NULL,
	@Amount MONEY = NULL,
	@Interval NVARCHAR(50) = NULL,
	@Occurrences INT = NULL,
	@BillingName NVARCHAR(50) = NULL,
	@BillingAddress NVARCHAR(50) = NULL,
	@BillingCity NVARCHAR(50) = NULL,
	@BillingState NVARCHAR(50) = NULL,
	@BillingCountry NVARCHAR(50) = NULL,
	@BillingZip NVARCHAR(50) = NULL,
	@AcctNo VARCHAR(64) = NULL,
	@MaskAcctNo VARCHAR(50) = NULL,
	@ExpRoute VARCHAR(50) = NULL,
	@Status NVARCHAR(50) = NULL,
	@Suspend SMALLINT = NULL,
	@NextPaymentDate DATE = NULL,
	@PayMethodID INT = NULL,
	@PayType VARCHAR(50) = NULL,
	@StoreID INT = NULL
AS
BEGIN
	UPDATE
		{databaseOwner}{objectQualifier}RZC_SubscriptionSC
	SET
		[CustomerID] = @CustomerID,
		[ProductID] = @ProductID,
		[CreateDate] = @CreateDate,
		[CancelDate] = @CancelDate,
		[SubStartDate] = @SubStartDate,
		[SubEndDate] = @SubEndDate,
		[TransID] = @TransID,
		[IPAddress] = @IPAddress,
		[CreatedBy] = @CreatedBy,
		[ModifiedBy] = @ModifiedBy,
		[DateModified] = @DateModified,
		[OrderID] = @OrderID,
		[OrderDetailID] = @OrderDetailID,
		[Amount] = @Amount,
		[Interval] = @Interval,
		[Occurrences] = @Occurrences,
		[BillingName] = @BillingName,
		[BillingAddress] = @BillingAddress,
		[BillingCity] = @BillingCity,
		[BillingState] = @BillingState,
		[BillingCountry] = @BillingCountry,
		[BillingZip] = @BillingZip,
		[AcctNo] = @AcctNo,
		[MaskAcctNo] = @MaskAcctNo,
		[ExpRoute] = @ExpRoute,
		[Status] = @Status,
		[Suspend] = @Suspend,
		[NextPaymentDate] = @NextPaymentDate,
		[PayMethodID] = @PayMethodID,
		[PayType] = @PayType,
		[StoreID] = @StoreID
	WHERE
		[SubscriptionID] = @SubscriptionID
		AND [PortalID] = @PortalID
END
GO



/************************************************************/
/*****             Migrate Old Tables                   *****/
/************************************************************/
DECLARE @TableNames TABLE([OldName] VARCHAR(128), [NewName] VARCHAR(128))
INSERT INTO @TableNames VALUES ('Smith_Analytics', 'RZC_Analytics')
INSERT INTO @TableNames VALUES ('Smith_BookingDisabledDates', 'RZC_BookingDisabledDates')
INSERT INTO @TableNames VALUES ('Smith_BookingDisabledTimes', 'RZC_BookingDisabledTimes')
INSERT INTO @TableNames VALUES ('Smith_BundleProducts', 'RZC_BundleProducts')
INSERT INTO @TableNames VALUES ('Smith_Category', 'RZC_Category')
INSERT INTO @TableNames VALUES ('Smith_CategoryProduct', 'RZC_CategoryProduct')
INSERT INTO @TableNames VALUES ('Smith_CategoryQtyDiscounts', 'RZC_CategoryQtyDiscounts')
INSERT INTO @TableNames VALUES ('Smith_ClientCredentials', 'RZC_ClientCredentials')
INSERT INTO @TableNames VALUES ('Smith_CouponProduct', 'RZC_CouponProduct')
INSERT INTO @TableNames VALUES ('Smith_Coupons', 'RZC_Coupons')
INSERT INTO @TableNames VALUES ('Smith_CouponVariant', 'RZC_CouponVariant')
INSERT INTO @TableNames VALUES ('Smith_Customer', 'RZC_Customer')
INSERT INTO @TableNames VALUES ('Smith_CustomerWallet', 'RZC_CustomerWallet')
INSERT INTO @TableNames VALUES ('Smith_Department', 'RZC_Department')
INSERT INTO @TableNames VALUES ('Smith_EmailCampaign', 'RZC_EmailCampaign')
INSERT INTO @TableNames VALUES ('Smith_EmailTemplateSC', 'RZC_EmailTemplateSC')
INSERT INTO @TableNames VALUES ('Smith_InvoiceTemplate', 'RZC_InvoiceTemplate')
INSERT INTO @TableNames VALUES ('Smith_LicenseKey', 'RZC_LicenseKey')
INSERT INTO @TableNames VALUES ('Smith_Manufacturer', 'RZC_Manufacturer')
INSERT INTO @TableNames VALUES ('Smith_OrderDiscounts', 'RZC_OrderDiscounts')
INSERT INTO @TableNames VALUES ('Smith_OrderFulfillmentDetails', 'RZC_OrderFulfillmentDetails')
INSERT INTO @TableNames VALUES ('Smith_OrderFulfillments', 'RZC_OrderFulfillments')
INSERT INTO @TableNames VALUES ('Smith_OrderNotes', 'RZC_OrderNotes')
INSERT INTO @TableNames VALUES ('Smith_PayHist', 'RZC_PayHist')
INSERT INTO @TableNames VALUES ('Smith_PayHistImages', 'RZC_PayHistImages')
INSERT INTO @TableNames VALUES ('Smith_PaymentMethods', 'RZC_PaymentMethods')
INSERT INTO @TableNames VALUES ('Smith_PaymentMethodsZones', 'RZC_PaymentMethodsZones')
INSERT INTO @TableNames VALUES ('Smith_PriceClass', 'RZC_PriceClass')
INSERT INTO @TableNames VALUES ('Smith_ProductCustomFields', 'RZC_ProductCustomFields')
INSERT INTO @TableNames VALUES ('Smith_ProductDiscountsByRole', 'RZC_ProductDiscountsByRole')
INSERT INTO @TableNames VALUES ('Smith_ProductDownloadHistory', 'RZC_ProductDownloadHistory')
INSERT INTO @TableNames VALUES ('Smith_ProductImages', 'RZC_ProductImages')
INSERT INTO @TableNames VALUES ('Smith_ProductLocalization', 'RZC_ProductLocalization')
INSERT INTO @TableNames VALUES ('Smith_ProductManageRole', 'RZC_ProductManageRole')
INSERT INTO @TableNames VALUES ('Smith_ProductPackage', 'RZC_ProductPackage')
INSERT INTO @TableNames VALUES ('Smith_ProductQtyDiscounts', 'RZC_ProductQtyDiscounts')
INSERT INTO @TableNames VALUES ('Smith_ProductReviews', 'RZC_ProductReviews')
INSERT INTO @TableNames VALUES ('Smith_Products', 'RZC_Products')
INSERT INTO @TableNames VALUES ('Smith_Products2', 'RZC_Products2')
INSERT INTO @TableNames VALUES ('Smith_ProductTemplate', 'RZC_ProductTemplate')
INSERT INTO @TableNames VALUES ('Smith_ProductVariant', 'RZC_ProductVariant')
INSERT INTO @TableNames VALUES ('Smith_ProductVariantGroup', 'RZC_ProductVariantGroup')
INSERT INTO @TableNames VALUES ('Smith_ProductVariantInventory', 'RZC_ProductVariantInventory')
INSERT INTO @TableNames VALUES ('Smith_ProductVariantInvLinker', 'RZC_ProductVariantInvLinker')
INSERT INTO @TableNames VALUES ('Smith_ProductVariantRole', 'RZC_ProductVariantRole')
INSERT INTO @TableNames VALUES ('Smith_ProductVisibilityRole', 'RZC_ProductVisibilityRole')
INSERT INTO @TableNames VALUES ('Smith_RelatedProducts', 'RZC_RelatedProducts')
INSERT INTO @TableNames VALUES ('Smith_SavedCart', 'RZC_SavedCart')
INSERT INTO @TableNames VALUES ('Smith_SavedCartDetail', 'RZC_SavedCartDetail')
INSERT INTO @TableNames VALUES ('Smith_SavedCartDetailVariant', 'RZC_SavedCartDetailVariant')
INSERT INTO @TableNames VALUES ('Smith_SavedSearches', 'RZC_SavedSearches')
INSERT INTO @TableNames VALUES ('Smith_SearchKeys', 'RZC_SearchKeys')
INSERT INTO @TableNames VALUES ('Smith_SessionState', 'RZC_SessionState')
INSERT INTO @TableNames VALUES ('Smith_ShipCategories', 'RZC_ShipCategories')
INSERT INTO @TableNames VALUES ('Smith_ShipFree', 'RZC_ShipFree')
INSERT INTO @TableNames VALUES ('Smith_ShipMethods', 'RZC_ShipMethods')
INSERT INTO @TableNames VALUES ('Smith_ShippingByAmount', 'RZC_ShippingByAmount')
INSERT INTO @TableNames VALUES ('Smith_ShippingByQuantity', 'RZC_ShippingByQuantity')
INSERT INTO @TableNames VALUES ('Smith_ShippingByWeight', 'RZC_ShippingByWeight')
INSERT INTO @TableNames VALUES ('Smith_ShippingByZipCode', 'RZC_ShippingByZipCode')
INSERT INTO @TableNames VALUES ('Smith_ShipZone', 'RZC_ShipZone')
INSERT INTO @TableNames VALUES ('Smith_ShoppingCart', 'RZC_ShoppingCart')
INSERT INTO @TableNames VALUES ('Smith_ShoppingCartVariant', 'RZC_ShoppingCartVariant')
INSERT INTO @TableNames VALUES ('Smith_StoreConfig', 'RZC_StoreConfig')
INSERT INTO @TableNames VALUES ('Smith_StoreOrderDetails', 'RZC_StoreOrderDetails')
INSERT INTO @TableNames VALUES ('Smith_StoreOrderDetailVariant', 'RZC_StoreOrderDetailVariant')
INSERT INTO @TableNames VALUES ('Smith_StoreOrders', 'RZC_StoreOrders')
INSERT INTO @TableNames VALUES ('Smith_StorePermissions', 'RZC_StorePermissions')
INSERT INTO @TableNames VALUES ('Smith_Stores', 'RZC_Stores')
INSERT INTO @TableNames VALUES ('Smith_SubscriptionSC', 'RZC_SubscriptionSC')
INSERT INTO @TableNames VALUES ('Smith_Tax', 'RZC_Tax')
INSERT INTO @TableNames VALUES ('Smith_TaxStates', 'RZC_TaxStates')
INSERT INTO @TableNames VALUES ('Smith_VariantConditionalGroup', 'RZC_VariantConditionalGroup')
INSERT INTO @TableNames VALUES ('Smith_VendorBooking', 'RZC_VendorBooking')
DECLARE @OldName VARCHAR(128),
		@NewName VARCHAR(128)
DECLARE LoopCursor CURSOR FOR  
	SELECT [OldName], [NewName] FROM @TableNames
OPEN LoopCursor WHILE 1 = 1
BEGIN
	FETCH FROM LoopCursor INTO @OldName, @NewName
	IF @@FETCH_STATUS != 0 BREAK
	IF EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}' + @OldName) AND type IN (N'U'))
	AND EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'{databaseOwner}{objectQualifier}' + @NewName) AND type IN (N'U'))
	AND (SELECT ISNULL(SUM(P.rows), 0) FROM sys.objects O INNER JOIN sys.partitions P ON O.object_id = P.object_id WHERE O.object_id = OBJECT_ID(N'' + @NewName) AND O.type IN (N'U')) = 0
	BEGIN
		DECLARE @Command VARCHAR(MAX) = ''
		DECLARE @IdentityColumn BIT = 0
		SET @IdentityColumn = CASE WHEN EXISTS (SELECT * from sys.columns WHERE object_id = Object_ID('{databaseOwner}{objectQualifier}' + @OldName) AND is_identity = 1)
			AND EXISTS (SELECT * from sys.columns WHERE object_id = Object_ID('{databaseOwner}{objectQualifier}' + @NewName) AND is_identity = 1) THEN 1 ELSE 0 END
		IF @IdentityColumn = 1
		BEGIN
			SET @Command += 'SET IDENTITY_INSERT {databaseOwner}{objectQualifier}' + @NewName + ' ON;'
		END
		DECLARE
			@CommonColumns TABLE([ColumnName] NVARCHAR(MAX) NOT NULL)
		INSERT INTO
			@CommonColumns
		SELECT
			COLUMN_NAME
		FROM
			INFORMATION_SCHEMA.COLUMNS
		WHERE
			TABLE_NAME = ('{objectQualifier}' + @OldName)
		INTERSECT SELECT
			COLUMN_NAME
		FROM
			INFORMATION_SCHEMA.COLUMNS
		WHERE
			TABLE_NAME = ('{objectQualifier}' + @NewName)
		DECLARE
			@Columns NVARCHAR(MAX)
		SELECT DISTINCT
			@Columns  = STUFF((SELECT '],[' + LTRIM([ColumnName]) FROM @CommonColumns FOR XML Path('')), 1, 2, '') + ']'
		SET @Command += 'INSERT INTO {databaseOwner}{objectQualifier}' + @NewName + '(' + @Columns + ') SELECT ' + @Columns + ' FROM {databaseOwner}{objectQualifier}' + @OldName + ';'
		IF @IdentityColumn = 1
		BEGIN
			SET @Command += 'SET IDENTITY_INSERT {databaseOwner}{objectQualifier}' + @NewName + ' OFF;'
		END
		EXEC(@Command)
		DELETE FROM @CommonColumns
	END
END
CLOSE LoopCursor
DEALLOCATE LoopCursor



/************************************************************/
/*****               End of Script                      *****/
/************************************************************/